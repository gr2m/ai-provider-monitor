- change: changed
  target: route
  breaking: false
  deprecated: false
  doc_only: true
  note: Updated docs links in description to docs.claude.com
  paths:
    - path: description
      before: ... [user guide](/en/docs/initial-setup)
      after: ... [user guide](https://docs.claude.com/en/docs/initial-setup)
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added top-level cache_control option to auto-mark last cacheable block
  paths:
    - path: requestBody.content.application/json.schema.properties.cache_control
      before: 'null'
      after: '{ type: ''object|null'', description: ''Top-level cache control...'' }'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added top-level container identifier for tool reuse
  paths:
    - path: requestBody.content.application/json.schema.properties.container
      before: 'null'
      after: '{ type: ''string|null'' }'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added inference_geo to select geographic region for inference
  paths:
    - path: requestBody.content.application/json.schema.properties.inference_geo
      before: 'null'
      after: '{ type: ''string|null'' }'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added output_config with effort and JSON schema formatted outputs
  paths:
    - path: requestBody.content.application/json.schema.properties.output_config
      before: 'null'
      after: '{ type: ''object'', properties: { effort, format: { type: ''json_schema'', schema:{} }}}'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: true
  note: Model catalog updated (added opus/sonnet 4.6, opus-4.5-20251101; marked some models deprecated)
  paths:
    - path: requestBody.content.application/json.schema.properties.model.anyOf
      before: '[string | several older constants incl. claude-sonnet-4-5-20250929, haiku 3.5 not deprecated]'
      after: '[string | new constants incl. claude-opus-4-6, claude-sonnet-4-6, claude-opus-4-5-20251101; haiku 3.5 entries deprecated]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Thinking config now supports adaptive mode
  paths:
    - path: requestBody.content.application/json.schema.properties.thinking.oneOf[*].properties.type.const
      before: '"enabled" | "disabled"'
      after: '"enabled" | "disabled" | "adaptive"'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Expanded message content: new server tool result blocks and container_upload'
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: '#/components/schemas/RequestWebFetchToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.bash_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestBashCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.text_editor_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestTextEditorCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.tool_search_tool_result
      before: 'null'
      after: '#/components/schemas/RequestToolSearchToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.container_upload
      before: 'null'
      after: '#/components/schemas/RequestContainerUploadBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: RequestToolUseBlock supports optional caller (direct/server-tool) metadata
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[?title=='RequestToolUseBlock'].properties.caller
      before: 'null'
      after: '{ oneOf: [direct | code_execution_20250825 | code_execution_20260120] }'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: RequestServerToolUseBlock expanded names and added optional caller metadata
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[?title=='RequestServerToolUseBlock'].properties.name
      before: '{ const: "web_search" }'
      after: '{ enum: ["web_search","web_fetch","code_execution","bash_code_execution","text_editor_code_execution","tool_search_tool_regex","tool_search_tool_bm25"] }'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[?title=='RequestServerToolUseBlock'].properties.caller
      before: 'null'
      after: '{ oneOf: [direct | code_execution_20250825 | code_execution_20260120] }'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: tool_result content can now include tool_reference blocks
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[?title=='RequestToolResultBlock'].properties.content.anyOf[1].items.discriminator.mapping.tool_reference
      before: 'null'
      after: '#/components/schemas/RequestToolReferenceBlock'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Web search tool result error codes include new value 'request_too_large'
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[?title=='RequestWebSearchToolResultBlock'].properties.content.anyOf[1].properties.error_code.enum
      before: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long"]'
      after: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long","request_too_large"]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Introduced new server tool result block types (web_fetch, code_execution, bash_code_execution, text_editor_code_execution, tool_search)
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: '#/components/schemas/RequestWebFetchToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.bash_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestBashCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.text_editor_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestTextEditorCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.tool_search_tool_result
      before: 'null'
      after: '#/components/schemas/RequestToolSearchToolResultBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Expanded tool definitions: new code_execution (20250522/20250825/20260120), memory (20250818), web_fetch (20250910/20260209), web_search (20260209), and tool_search (bm25/regex) tools; plus optional tool fields (allowed_callers, defer_loading, eager_input_streaming, input_examples, strict)'
  paths:
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf
      before: No code_execution/web_fetch/memory/tool_search variants or extra tool options
      after: Includes code_execution*, memory_20250818, web_fetch*, web_search_20260209, tool_search_tool_*; extra optional fields allowed_callers/defer_loading/eager_input_streaming/input_examples/strict
  date: '2026-02-20'
- change: changed
  target: response
  breaking: true
  deprecated: false
  doc_only: false
  note: Added top-level container info to Message response and made it required
  paths:
    - path: responses.200.content.application/json.schema.properties.container
      before: 'null'
      after: '{ type: ''object|null'', properties: { id, expires_at } }'
    - path: responses.200.content.application/json.schema.required
      before: '["id","type","role","content","model","stop_reason","stop_sequence","usage"]'
      after: '["id","type","role","content","model","stop_reason","stop_sequence","usage","container"]'
  date: '2026-02-20'
- change: added
  target: response
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Expanded response content types: new server tool result blocks and container_upload'
  paths:
    - path: responses.200.content.application/json.schema.properties.content.items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: '#/components/schemas/ResponseWebFetchToolResultBlock'
    - path: responses.200.content.application/json.schema.properties.content.items.discriminator.mapping.code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/ResponseCodeExecutionToolResultBlock'
    - path: responses.200.content.application/json.schema.properties.content.items.discriminator.mapping.bash_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/ResponseBashCodeExecutionToolResultBlock'
    - path: responses.200.content.application/json.schema.properties.content.items.discriminator.mapping.text_editor_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/ResponseTextEditorCodeExecutionToolResultBlock'
    - path: responses.200.content.application/json.schema.properties.content.items.discriminator.mapping.tool_search_tool_result
      before: 'null'
      after: '#/components/schemas/ResponseToolSearchToolResultBlock'
    - path: responses.200.content.application/json.schema.properties.content.items.discriminator.mapping.container_upload
      before: 'null'
      after: '#/components/schemas/ResponseContainerUploadBlock'
  date: '2026-02-20'
- change: changed
  target: response
  breaking: true
  deprecated: false
  doc_only: false
  note: Response tool_use block now includes required caller metadata
  paths:
    - path: responses.200.content.application/json.schema.properties.content.items.oneOf[?title=='ResponseToolUseBlock'].properties.caller
      before: absent
      after: '{ default: {type:''direct''}, oneOf: [direct | code_execution_20250825 | code_execution_20260120] }'
    - path: responses.200.content.application/json.schema.properties.content.items.oneOf[?title=='ResponseToolUseBlock'].required
      before: '["id","input","name","type"]'
      after: '["caller","id","input","name","type"]'
  date: '2026-02-20'
- change: changed
  target: response
  breaking: true
  deprecated: false
  doc_only: false
  note: Response server_tool_use block now includes required caller metadata
  paths:
    - path: responses.200.content.application/json.schema.properties.content.items.oneOf[?title=='ResponseServerToolUseBlock'].properties.caller
      before: absent
      after: '{ default: {type:''direct''}, oneOf: [direct | code_execution_20250825 | code_execution_20260120] }'
    - path: responses.200.content.application/json.schema.properties.content.items.oneOf[?title=='ResponseServerToolUseBlock'].required
      before: '["id","input","name","type"]'
      after: '["caller","id","input","name","type"]'
  date: '2026-02-20'
- change: changed
  target: response
  breaking: true
  deprecated: false
  doc_only: false
  note: Response web_search_tool_result block now includes required caller metadata
  paths:
    - path: responses.200.content.application/json.schema.properties.content.items.oneOf[?title=='ResponseWebSearchToolResultBlock'].properties.caller
      before: absent
      after: '{ default: {type:''direct''}, oneOf: [direct | code_execution_20250825 | code_execution_20260120] }'
    - path: responses.200.content.application/json.schema.properties.content.items.oneOf[?title=='ResponseWebSearchToolResultBlock'].required
      before: '["content","tool_use_id","type"]'
      after: '["caller","content","tool_use_id","type"]'
  date: '2026-02-20'
- change: changed
  target: response
  breaking: false
  deprecated: false
  doc_only: false
  note: Web search tool result error codes include new value 'request_too_large'
  paths:
    - path: responses.200.content.application/json.schema.properties.content.items.oneOf[?title=='ResponseWebSearchToolResultBlock'].properties.content.anyOf[0].properties.error_code.enum
      before: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long"]'
      after: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long","request_too_large"]'
  date: '2026-02-20'
- change: added
  target: response
  breaking: false
  deprecated: false
  doc_only: false
  note: Added new web_fetch_tool_result response block
  paths:
    - path: responses.200.content.application/json.schema.properties.content.items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: '#/components/schemas/ResponseWebFetchToolResultBlock'
  date: '2026-02-20'
- change: changed
  target: response
  breaking: true
  deprecated: false
  doc_only: false
  note: Usage now includes required inference_geo and expanded server tool usage counters
  paths:
    - path: responses.200.content.application/json.schema.properties.usage.properties.inference_geo
      before: absent
      after: '{ type: ''string|null'' }'
    - path: responses.200.content.application/json.schema.properties.usage.required
      before: '["cache_creation","cache_creation_input_tokens","cache_read_input_tokens","input_tokens","output_tokens","server_tool_use","service_tier"]'
      after: '["cache_creation","cache_creation_input_tokens","cache_read_input_tokens","inference_geo","input_tokens","output_tokens","server_tool_use","service_tier"]'
    - path: responses.200.content.application/json.schema.properties.usage.properties.server_tool_use.properties.web_fetch_requests
      before: absent
      after: '{ type: ''integer'', default: 0 }'
    - path: responses.200.content.application/json.schema.properties.usage.properties.server_tool_use.required
      before: '["web_search_requests"]'
      after: '["web_fetch_requests","web_search_requests"]'
  date: '2026-02-20'
- change: changed
  target: response
  breaking: false
  deprecated: false
  doc_only: true
  note: Response model catalog updated to include new 4.6 and 4.5 releases and deprecations
  paths:
    - path: responses.200.content.application/json.schema.properties.model.anyOf
      before: '[string | older constants]'
      after: '[string | includes claude-opus-4-6, claude-sonnet-4-6, claude-opus-4-5-20251101, etc.]'
  date: '2026-02-20'

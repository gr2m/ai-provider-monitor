- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added top-level cache_control to apply a cache marker to the last cacheable block automatically.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.cache_control
      before: 'null'
      after: '{"anyOf":[{"oneOf":[{"type":"object","title":"CacheControlEphemeral","additionalProperties":false,"required":["type"],"properties":{"type":{"const":"ephemeral","type":"string","title":"Type"},"ttl":{"enum":["5m","1h"],"type":"string","title":"Ttl","description":"The time-to-live for the cache control breakpoint.\n\nThis may be one the following values:\n- `5m`: 5 minutes\n- `1h`: 1 hour\n\nDefaults to `5m`."}}}]} , {"type":"null"}],"description":"Top-level cache control automatically applies a cache_control marker to the last cacheable block in the request.","title":"Cache Control"}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added output_config to control output format and effort.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.output_config
      before: 'null'
      after: '{"type":"object","title":"OutputConfig","description":"Configuration options for the model''s output, such as the output format.","additionalProperties":false,"properties":{"effort":{"anyOf":[{"type":"string","title":"EffortLevel","enum":["low","medium","high","max" ]},{"type":"null"}],"description":"How much effort the model should put into its response. Higher effort levels may result in more thorough analysis but take longer.\n\nValid values are `low`, `medium`, `high`, or `max`."},"format":{"anyOf":[{"type":"object","title":"JsonOutputFormat","required":["schema","type"],"additionalProperties":false,"properties":{"type":{"const":"json_schema","type":"string","title":"Type"},"schema":{"type":"object","title":"Schema","additionalProperties":true,"description":"The JSON schema of the format"}}},{"type":"null"}],"description":"A schema to specify Claude''s output format in responses. See [structured outputs](https://platform.claude.com/docs/en/build-with-claude/structured-outputs)"}}}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Added multiple new message content block types: container_upload, web_fetch_tool_result (+ web_fetch_result), code_execution_tool_result, bash_code_execution_tool_result, text_editor_code_execution_tool_result, tool_search_tool_result.'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf
      before: did not include the above block types
      after: now includes RequestContainerUploadBlock, RequestWebFetchToolResultBlock (with RequestWebFetchResultBlock), RequestCodeExecutionToolResultBlock, RequestBashCodeExecutionToolResultBlock, RequestTextEditorCodeExecutionToolResultBlock, RequestToolSearchToolResultBlock
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: tool_use content block now supports a caller field (direct or server tool).
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestToolUseBlock].properties.caller
      before: 'null'
      after: '{"oneOf":[{"type":"object","title":"DirectCaller","required":["type"],"additionalProperties":false,"description":"Tool invocation directly from the model.","properties":{"type":{"const":"direct","type":"string","title":"Type"}}},{"type":"object","title":"ServerToolCaller","required":["tool_id","type"],"additionalProperties":false,"description":"Tool invocation generated by a server-side tool.","properties":{"type":{"const":"code_execution_20250825","type":"string","title":"Type"},"tool_id":{"type":"string","title":"Tool Id","pattern":"^srvtoolu_[a-zA-Z0-9_]+$"}}},{"type":"object","title":"ServerToolCaller_20260120","required":["tool_id","type"],"additionalProperties":false,"properties":{"type":{"const":"code_execution_20260120","type":"string","title":"Type"},"tool_id":{"type":"string","title":"Tool Id","pattern":"^srvtoolu_[a-zA-Z0-9_]+$"}}}],"title":"Caller"}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: server_tool_use content block now supports a caller field (direct or server tool).
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestServerToolUseBlock].properties.caller
      before: 'null'
      after: '{"oneOf":[{"type":"object","title":"DirectCaller","required":["type"],"additionalProperties":false,"description":"Tool invocation directly from the model.","properties":{"type":{"const":"direct","type":"string","title":"Type"}}},{"type":"object","title":"ServerToolCaller","required":["tool_id","type"],"additionalProperties":false,"description":"Tool invocation generated by a server-side tool.","properties":{"type":{"const":"code_execution_20250825","type":"string","title":"Type"},"tool_id":{"type":"string","title":"Tool Id","pattern":"^srvtoolu_[a-zA-Z0-9_]+$"}}},{"type":"object","title":"ServerToolCaller_20260120","required":["tool_id","type"],"additionalProperties":false,"properties":{"type":{"const":"code_execution_20260120","type":"string","title":"Type"},"tool_id":{"type":"string","title":"Tool Id","pattern":"^srvtoolu_[a-zA-Z0-9_]+$"}}}],"title":"Caller"}'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Expanded server_tool_use.name to support multiple server tools (web_search, web_fetch, code_execution, bash_code_execution, text_editor_code_execution, tool_search_tool_regex, tool_search_tool_bm25).
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestServerToolUseBlock].properties.name.enum
      before: '["web_search"]'
      after: '["web_search","web_fetch","code_execution","bash_code_execution","text_editor_code_execution","tool_search_tool_regex","tool_search_tool_bm25"]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: tool_result content may now include a tool_reference block.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestToolResultBlock].properties.content.anyOf[1].items.discriminator.mapping.tool_reference
      before: 'null'
      after: '"#/components/schemas/RequestToolReferenceBlock"'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: web_search_tool_result error_code enum includes new value request_too_large.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestWebSearchToolResultBlock].properties.content.anyOf[1].properties.error_code.enum
      before: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long"]'
      after: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long","request_too_large"]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added web_fetch_tool_result content block with support for either web_fetch_result or web_fetch_tool_result_error.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestWebFetchToolResultBlock]
      before: 'null'
      after: '{"type":"object","title":"RequestWebFetchToolResultBlock","required":["content","tool_use_id","type"],"additionalProperties":false,"properties":{"type":{"const":"web_fetch_tool_result","type":"string","title":"Type"},"tool_use_id":{"type":"string","title":"Tool Use Id","pattern":"^srvtoolu_[a-zA-Z0-9_]+$"},"caller":{...},"content":{"anyOf":[{"type":"object","title":"RequestWebFetchToolResultError","required":["error_code","type"],"additionalProperties":false,"properties":{"type":{"const":"web_fetch_tool_result_error","type":"string","title":"Type"},"error_code":{"type":"string","title":"WebFetchToolResultErrorCode","enum":["invalid_tool_input","url_too_long","url_not_allowed","url_not_accessible","unsupported_content_type","too_many_requests","max_uses_exceeded","unavailable"]}}},{"type":"object","title":"RequestWebFetchResultBlock","required":["content","type","url"],"additionalProperties":false,"properties":{"type":{"const":"web_fetch_result","type":"string","title":"Type"},"url":{"type":"string","title":"Url","description":"Fetched content URL"},"retrieved_at":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Retrieved At","description":"ISO 8601 timestamp when the content was retrieved"},"content":{...}}}]}}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added code_execution_tool_result and bash_code_execution_tool_result content blocks with result and error variants.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestCodeExecutionToolResultBlock]
      before: 'null'
      after: '{"type":"object","title":"RequestCodeExecutionToolResultBlock",...}'
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestBashCodeExecutionToolResultBlock]
      before: 'null'
      after: '{"type":"object","title":"RequestBashCodeExecutionToolResultBlock",...}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added text_editor_code_execution_tool_result content block with multiple result and error variants.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestTextEditorCodeExecutionToolResultBlock]
      before: 'null'
      after: '{"type":"object","title":"RequestTextEditorCodeExecutionToolResultBlock",...}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added tool_search_tool_result content block including tool_search results and errors.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[title=RequestToolSearchToolResultBlock]
      before: 'null'
      after: '{"type":"object","title":"RequestToolSearchToolResultBlock",...}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added ThinkingConfigAdaptive as a new thinking option.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.thinking.oneOf[title=ThinkingConfigAdaptive]
      before: 'null'
      after: '{"type":"object","title":"ThinkingConfigAdaptive","required":["type"],"additionalProperties":false,"properties":{"type":{"const":"adaptive","type":"string","title":"Type"}}}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Generic custom Tool schema gained allowed_callers, defer_loading, eager_input_streaming, input_examples, strict.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=Tool].properties.allowed_callers
      before: 'null'
      after: '{"type":"array","title":"Allowed Callers","items":{"type":"string","enum":["direct","code_execution_20250825","code_execution_20260120"]}}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=Tool].properties.defer_loading
      before: 'null'
      after: '{"type":"boolean","title":"Defer Loading","description":"If true, tool will not be included in initial system prompt. Only loaded when returned via tool_reference from tool search."}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=Tool].properties.eager_input_streaming
      before: 'null'
      after: '{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Eager Input Streaming","description":"Enable eager input streaming for this tool..."}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=Tool].properties.input_examples
      before: 'null'
      after: '{"type":"array","title":"Input Examples","items":{"type":"object","additionalProperties":{}}}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=Tool].properties.strict
      before: 'null'
      after: '{"type":"boolean","title":"Strict","description":"When true, guarantees schema validation on tool names and inputs"}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Added many new tool definitions: CodeExecutionTool_20250522, CodeExecutionTool_20250825, CodeExecutionTool_20260120, MemoryTool_20250818, WebFetchTool_20250910, WebFetchTool_20260209, WebSearchTool_20260209, ToolSearchToolBM25_20251119, ToolSearchToolRegex_20251119.'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=CodeExecutionTool_20250522]
      before: 'null'
      after: '{"type":"object","title":"CodeExecutionTool_20250522",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=CodeExecutionTool_20250825]
      before: 'null'
      after: '{"type":"object","title":"CodeExecutionTool_20250825",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=CodeExecutionTool_20260120]
      before: 'null'
      after: '{"type":"object","title":"CodeExecutionTool_20260120",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=MemoryTool_20250818]
      before: 'null'
      after: '{"type":"object","title":"MemoryTool_20250818",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebFetchTool_20250910]
      before: 'null'
      after: '{"type":"object","title":"WebFetchTool_20250910",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebFetchTool_20260209]
      before: 'null'
      after: '{"type":"object","title":"WebFetchTool_20260209",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebSearchTool_20260209]
      before: 'null'
      after: '{"type":"object","title":"WebSearchTool_20260209",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=ToolSearchToolBM25_20251119]
      before: 'null'
      after: '{"type":"object","title":"ToolSearchToolBM25_20251119",...}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=ToolSearchToolRegex_20251119]
      before: 'null'
      after: '{"type":"object","title":"ToolSearchToolRegex_20251119",...}'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Augmented existing tool definitions (e.g., Bash, TextEditor, WebSearch) with allowed_callers, defer_loading, input_examples, and strict properties.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=BashTool_20250124].properties.allowed_callers
      before: 'null'
      after: '{"type":"array","title":"Allowed Callers","items":{"type":"string","enum":["direct","code_execution_20250825","code_execution_20260120"]}}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=TextEditor_20250124].properties.defer_loading
      before: 'null'
      after: '{"type":"boolean","title":"Defer Loading"}'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebSearchTool_20250305].properties.strict
      before: 'null'
      after: '{"type":"boolean","title":"Strict"}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Added new model options: claude-opus-4-6, claude-sonnet-4-6, claude-opus-4-5-20251101, claude-opus-4-5.'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.model.anyOf
      before: did not include these constants
      after: 'now includes consts: "claude-opus-4-6","claude-sonnet-4-6","claude-opus-4-5-20251101","claude-opus-4-5"'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: true
  note: Marked models claude-3-5-haiku-latest and claude-3-5-haiku-20241022 as deprecated.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.model.anyOf[const=claude-3-5-haiku-latest].deprecated
      before: false or unspecified
      after: 'true'
    - path: $.requestBody.content.application/json.schema.properties.model.anyOf[const=claude-3-5-haiku-20241022].deprecated
      before: false or unspecified
      after: 'true'
  date: '2026-02-20'
- change: changed
  target: route
  breaking: false
  deprecated: false
  doc_only: true
  note: Documentation link in description updated to https://docs.claude.com URL.
  paths:
    - path: $.description
      before: ...token-counting)
      after: ...token-counting)
  date: '2026-02-20'

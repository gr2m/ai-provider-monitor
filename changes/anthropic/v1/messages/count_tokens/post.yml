- change: changed
  target: route
  breaking: false
  deprecated: false
  doc_only: true
  note: Description link updated to full docs URL
  paths:
    - path: $.description
      before: |-
        Count the number of tokens in a Message.

        The Token Count API can be used to count the number of tokens in a Message, including tools, images, and documents, without creating it.

        Learn more about token counting in our [user guide](/en/docs/build-with-claude/token-counting)
      after: |-
        Count the number of tokens in a Message.

        The Token Count API can be used to count the number of tokens in a Message, including tools, images, and documents, without creating it.

        Learn more about token counting in our [user guide](https://docs.claude.com/en/docs/build-with-claude/token-counting)
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: true
  note: Example request model updated
  paths:
    - path: $.requestBody.content.application/json.schema.examples[0].model
      before: claude-sonnet-4-5-20250929
      after: claude-opus-4-6
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added top-level cache_control option for automatic breakpointing
  paths:
    - path: $.requestBody.content.application/json.schema.properties.cache_control
      before: 'null'
      after: '{ type: ''object|null'', oneOf: [CacheControlEphemeral] }'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added output_config to control output format and effort
  paths:
    - path: $.requestBody.content.application/json.schema.properties.output_config
      before: 'null'
      after: '{ type: ''object'', properties: { format, effort } }'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: true
  doc_only: true
  note: 'Model list updated: added claude-opus-4-6, claude-sonnet-4-6, claude-opus-4-5(-20251101); marked claude-3-5-haiku-latest and claude-3-5-haiku-20241022 as deprecated'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.model.anyOf
      before: Did not include opus-4-6/sonnet-4-6 and haiku variants not deprecated
      after: Includes opus-4-6/sonnet-4-6/opus-4-5(-20251101) and marks haiku variants deprecated
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: New message content block types added (web_fetch_tool_result, code_execution_tool_result, bash_code_execution_tool_result, text_editor_code_execution_tool_result, tool_search_tool_result, container_upload)
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: '#/components/schemas/RequestWebFetchToolResultBlock'
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestCodeExecutionToolResultBlock'
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.bash_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestBashCodeExecutionToolResultBlock'
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.text_editor_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestTextEditorCodeExecutionToolResultBlock'
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.tool_search_tool_result
      before: 'null'
      after: '#/components/schemas/RequestToolSearchToolResultBlock'
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.container_upload
      before: 'null'
      after: '#/components/schemas/RequestContainerUploadBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: tool_result content can include a new tool_reference block
  paths:
    - path: $.requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[*].properties.content.anyOf[1].items.discriminator.mapping.tool_reference
      before: 'null'
      after: '#/components/schemas/RequestToolReferenceBlock'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'server_tool_use block expanded: name now supports multiple server tools and optional caller field added'
  paths:
    - path: $.components.schemas.RequestServerToolUseBlock.properties.name
      before: '{ const: "web_search" }'
      after: '{ enum: ["web_search","web_fetch","code_execution","bash_code_execution","text_editor_code_execution","tool_search_tool_regex","tool_search_tool_bm25"] }'
    - path: $.components.schemas.RequestServerToolUseBlock.properties.caller
      before: 'null'
      after: '{ oneOf: [DirectCaller, ServerToolCaller(code_execution_20250825), ServerToolCaller_20260120] }'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: tool_use block now supports optional caller field (direct or server tool caller)
  paths:
    - path: $.components.schemas.RequestToolUseBlock.properties.caller
      before: 'null'
      after: '{ oneOf: [DirectCaller, ServerToolCaller(code_execution_20250825), ServerToolCaller_20260120] }'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: web_search_tool_result error_code enum extended with request_too_large
  paths:
    - path: $.components.schemas.RequestWebSearchToolResultBlock.properties.content.anyOf[1].properties.error_code.enum
      before: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long"]'
      after: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long","request_too_large"]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Tools (custom Tool object) gained new optional fields: allowed_callers, defer_loading, eager_input_streaming, input_examples, strict'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.allowed_callers
      before: 'null'
      after: '{ type: array<string>, enum items: ["direct","code_execution_20250825","code_execution_20260120"] }'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.defer_loading
      before: 'null'
      after: '{ type: boolean }'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.eager_input_streaming
      before: 'null'
      after: '{ type: boolean|null }'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.input_examples
      before: 'null'
      after: '{ type: array<object> }'
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.strict
      before: 'null'
      after: '{ type: boolean }'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: New server tool definitions supported in tools array (code_execution 20250522/20250825/20260120, memory_20250818, web_fetch 20250910/20260209, web_search 20260209, tool_search_tool_regex/tool_search_tool_bm25 20251119)
  paths:
    - path: $.requestBody.content.application/json.schema.properties.tools.items.oneOf
      before: Did not include these server tool variants
      after: Includes new oneOf entries for code_execution/web_fetch/web_search/memory/tool_search tool types
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Thinking config now supports adaptive mode
  paths:
    - path: $.requestBody.content.application/json.schema.properties.thinking.discriminator.mapping.adaptive
      before: 'null'
      after: '#/components/schemas/ThinkingConfigAdaptive'
    - path: $.requestBody.content.application/json.schema.properties.thinking.oneOf[2]
      before: 'null'
      after: '{ title: "ThinkingConfigAdaptive", type: object, properties: { type: "adaptive" } }'
  date: '2026-02-20'

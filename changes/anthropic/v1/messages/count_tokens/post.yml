- change: changed
  target: route
  breaking: false
  deprecated: false
  doc_only: true
  note: Updated docs link in route description to absolute URL.
  paths:
    - path: description
      before: ...Learn more about token counting in our [user guide](/en/docs/build-with-claude/token-counting)
      after: ...Learn more about token counting in our [user guide](https://docs.claude.com/en/docs/build-with-claude/token-counting)
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: true
  note: Request example model updated.
  paths:
    - path: requestBody.content.application/json.schema.examples[0].model
      before: claude-sonnet-4-5-20250929
      after: claude-opus-4-6
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added top-level cache_control to request schema.
  paths:
    - path: requestBody.content.application/json.schema.properties.cache_control
      before: 'null'
      after: anyOf[CacheControlEphemeral|null]
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added output_config to configure model output (effort, structured outputs).
  paths:
    - path: requestBody.content.application/json.schema.properties.output_config
      before: 'null'
      after: OutputConfig object with effort and format (json_schema)
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Expanded message content blocks: added new block types for server tool results and uploads.'
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.bash_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestBashCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.text_editor_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestTextEditorCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.tool_search_tool_result
      before: 'null'
      after: '#/components/schemas/RequestToolSearchToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: '#/components/schemas/RequestWebFetchToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.container_upload
      before: 'null'
      after: '#/components/schemas/RequestContainerUploadBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Tool result content can now include tool_reference blocks.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[*type=tool_result].properties.content.anyOf[1].items.discriminator.mapping.tool_reference
      before: 'null'
      after: '#/components/schemas/RequestToolReferenceBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added caller metadata to tool_use blocks (direct or server tool generated).
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[*type=tool_use].properties.caller
      before: 'null'
      after: oneOf[DirectCaller|ServerToolCaller|ServerToolCaller_20260120]
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added caller metadata to server_tool_use blocks.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[*type=server_tool_use].properties.caller
      before: 'null'
      after: oneOf[DirectCaller|ServerToolCaller|ServerToolCaller_20260120]
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: server_tool_use name expanded from only web_search to multiple server tools.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[*title=RequestServerToolUseBlock].properties.name
      before: 'const: "web_search"'
      after: 'enum: ["web_search","web_fetch","code_execution","bash_code_execution","text_editor_code_execution","tool_search_tool_regex","tool_search_tool_bm25"]'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added new error_code value to web_search_tool_result errors.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.oneOf[*title=RequestWebSearchToolResultBlock].properties.content.anyOf[1].properties.error_code.enum
      before: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long"]'
      after: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long","request_too_large"]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added web_fetch_tool_result block with success and error variants.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: '#/components/schemas/RequestWebFetchToolResultBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added code_execution_tool_result, bash_code_execution_tool_result, and text_editor_code_execution_tool_result blocks.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.bash_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestBashCodeExecutionToolResultBlock'
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.text_editor_code_execution_tool_result
      before: 'null'
      after: '#/components/schemas/RequestTextEditorCodeExecutionToolResultBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added tool_search_tool_result block for tool discovery results.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.tool_search_tool_result
      before: 'null'
      after: '#/components/schemas/RequestToolSearchToolResultBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added container_upload content block to upload files to container.
  paths:
    - path: requestBody.content.application/json.schema.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.container_upload
      before: 'null'
      after: '#/components/schemas/RequestContainerUploadBlock'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: New model IDs added.
  paths:
    - path: requestBody.content.application/json.schema.properties.model.anyOf[*].const
      before: 'did not include: claude-opus-4-6'
      after: 'includes: claude-opus-4-6'
    - path: requestBody.content.application/json.schema.properties.model.anyOf[*].const
      before: 'did not include: claude-sonnet-4-6'
      after: 'includes: claude-sonnet-4-6'
    - path: requestBody.content.application/json.schema.properties.model.anyOf[*].const
      before: 'did not include: claude-opus-4-5-20251101'
      after: 'includes: claude-opus-4-5-20251101'
    - path: requestBody.content.application/json.schema.properties.model.anyOf[*].const
      before: 'did not include: claude-opus-4-5'
      after: 'includes: claude-opus-4-5'
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Marked haiku models as deprecated.
  paths:
    - path: requestBody.content.application/json.schema.properties.model.anyOf[const=claude-3-5-haiku-latest].deprecated
      before: 'null'
      after: 'true'
    - path: requestBody.content.application/json.schema.properties.model.anyOf[const=claude-3-5-haiku-20241022].deprecated
      before: 'null'
      after: 'true'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Thinking config now supports adaptive mode.
  paths:
    - path: requestBody.content.application/json.schema.properties.thinking.discriminator.mapping.adaptive
      before: 'null'
      after: '#/components/schemas/ThinkingConfigAdaptive'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Extended custom tool schema with optional fields (allowed_callers, defer_loading, eager_input_streaming, input_examples, strict).
  paths:
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.allowed_callers
      before: 'null'
      after: array[string]
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.defer_loading
      before: 'null'
      after: boolean
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.eager_input_streaming
      before: 'null'
      after: boolean|null
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.input_examples
      before: 'null'
      after: array[object]
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.strict
      before: 'null'
      after: boolean
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Custom tool input_schema.properties.properties relaxed to allow nested schemas with additionalProperties.
  paths:
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[0].properties.input_schema.properties.properties.anyOf[0]
      before: 'type: object'
      after: 'type: object, additionalProperties: true'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added optional fields to several built-in tool definitions (allowed_callers, defer_loading, input_examples, strict).
  paths:
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=BashTool_20250124].properties.allowed_callers
      before: 'null'
      after: array[string]
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=TextEditor_20250124].properties.allowed_callers
      before: 'null'
      after: array[string]
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=TextEditor_20250429].properties.allowed_callers
      before: 'null'
      after: array[string]
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=TextEditor_20250728].properties.allowed_callers
      before: 'null'
      after: array[string]
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebSearchTool_20250305].properties.allowed_callers
      before: 'null'
      after: array[string]
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Introduced new tool definitions: code_execution (20250522, 20250825, 20260120), memory_20250818, web_fetch (20250910, 20260209), web_search_20260209, and tool_search (bm25, regex).'
  paths:
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=CodeExecutionTool_20250522]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=CodeExecutionTool_20250825]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=CodeExecutionTool_20260120]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=MemoryTool_20250818]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebFetchTool_20250910]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebFetchTool_20260209]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=WebSearchTool_20260209]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=ToolSearchToolBM25_20251119]
      before: 'null'
      after: definition added
    - path: requestBody.content.application/json.schema.properties.tools.items.oneOf[title=ToolSearchToolRegex_20251119]
      before: 'null'
      after: definition added
  date: '2026-02-20'
- change: changed
  target: response
  breaking: false
  deprecated: false
  doc_only: false
  note: Relaxed 4XX error schema (removed enum/default on type fields; no functional change).
  paths:
    - path: responses.4XX.content.application/json.schema.properties.type
      before: 'const: "error", enum: ["error"], default: "error"'
      after: 'const: "error"'
    - path: responses.4XX.content.application/json.schema.properties.error.oneOf[*].properties.type
      before: const with enum/default present
      after: const only (enum/default removed)
  date: '2026-02-20'

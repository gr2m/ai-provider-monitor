- change: changed
  target: route
  breaking: false
  deprecated: false
  doc_only: true
  note: Updated user guide link in operation description to absolute docs URL.
  paths:
    - path: $.description
      before: |-
        Send a batch of Message creation requests.

        The Message Batches API can be used to process multiple Messages API requests at once. Once a Message Batch is created, it begins processing immediately. Batches can take up to 24 hours to complete.

        Learn more about the Message Batches API in our [user guide](/en/docs/build-with-claude/batch-processing)
      after: |-
        Send a batch of Message creation requests.

        The Message Batches API can be used to process multiple Messages API requests at once. Once a Message Batch is created, it begins processing immediately. Batches can take up to 24 hours to complete.

        Learn more about the Message Batches API in our [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Increased maximum number of requests per batch from 10,000 to 100,000.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.maxItems
      before: '10000'
      after: '100000'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added top-level request cache_control that auto-applies to the last cacheable block.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.cache_control
      before: 'null'
      after: CacheControlEphemeral | null
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added container parameter to reuse a container across requests.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.container
      before: 'null'
      after: string | null
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added inference_geo to select geographic region for inference.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.inference_geo
      before: 'null'
      after: string | null
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added output_config to control response format (e.g., JSON schema, effort).
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.output_config
      before: 'null'
      after: object
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added adaptive option to thinking configuration.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.thinking.oneOf[2]
      before: 'null'
      after: ThinkingConfigAdaptive
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Expanded Messages content block types: added container_upload, web_fetch_tool_result, code_execution_tool_result, bash_code_execution_tool_result, text_editor_code_execution_tool_result, tool_search_tool_result.'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping
      before: '{document,image,redacted_thinking,search_result,server_tool_use,text,thinking,tool_result,tool_use,web_search_tool_result}'
      after: '{document,image,redacted_thinking,search_result,server_tool_use,text,thinking,tool_result,tool_use,web_search_tool_result,web_fetch_tool_result,code_execution_tool_result,bash_code_execution_tool_result,text_editor_code_execution_tool_result,tool_search_tool_result,container_upload}'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: tool_result content can now include tool_reference blocks.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.oneOf[*](tool_result).properties.content.anyOf[1].items.discriminator.mapping.tool_reference
      before: 'null'
      after: present
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.oneOf[*](tool_result).properties.content.anyOf[1].items.oneOf[*](tool_reference)
      before: 'null'
      after: RequestToolReferenceBlock
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added caller field to tool_use blocks to indicate direct vs server-originated invocation.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.oneOf[*](tool_use).properties.caller
      before: 'null'
      after: DirectCaller | ServerToolCaller | ServerToolCaller_20260120
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Server tool use blocks now include a caller field and support additional tool names (web_fetch, code_execution, bash_code_execution, text_editor_code_execution, tool_search_tool_regex, tool_search_tool_bm25).
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.oneOf[*](server_tool_use).properties.caller
      before: 'null'
      after: DirectCaller | ServerToolCaller | ServerToolCaller_20260120
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.oneOf[*](server_tool_use).properties.name.enum
      before: '["web_search"]'
      after: '["web_search","web_fetch","code_execution","bash_code_execution","text_editor_code_execution","tool_search_tool_regex","tool_search_tool_bm25"]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Added new server tool result block types: web_fetch_tool_result, code_execution_tool_result, bash_code_execution_tool_result, text_editor_code_execution_tool_result, tool_search_tool_result (with their result/error shapes).'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.web_fetch_tool_result
      before: 'null'
      after: present
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.code_execution_tool_result
      before: 'null'
      after: present
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.bash_code_execution_tool_result
      before: 'null'
      after: present
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.text_editor_code_execution_tool_result
      before: 'null'
      after: present
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.discriminator.mapping.tool_search_tool_result
      before: 'null'
      after: present
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: Added new error_code value "request_too_large" for web_search_tool_result errors.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.messages.items.properties.content.anyOf[1].items.oneOf[*](web_search_tool_result).properties.content.oneOf[1].properties.error_code.enum
      before: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long"]'
      after: '["invalid_tool_input","unavailable","max_uses_exceeded","too_many_requests","query_too_long","request_too_large"]'
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Expanded tools: added new built-in tool types (code_execution 20250522/20250825/20260120, memory 20250818, web_fetch 20250910/20260209, web_search 20260209, tool_search_tool_regex/tool_search_tool_bm25 20251119).'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.tools.items.oneOf
      before: 6 variants
      after: 13+ variants including code_execution, memory, web_fetch, tool_search
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Enhanced tool definitions with optional fields: allowed_callers, defer_loading, strict, input_examples, and for custom tools eager_input_streaming.'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.tools.items.oneOf[0].properties.allowed_callers
      before: 'null'
      after: array<string>
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.tools.items.oneOf[0].properties.defer_loading
      before: 'null'
      after: boolean
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.tools.items.oneOf[0].properties.strict
      before: 'null'
      after: boolean
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.tools.items.oneOf[0].properties.input_examples
      before: 'null'
      after: array<object>
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.tools.items.oneOf[0].properties.eager_input_streaming
      before: 'null'
      after: boolean | null
  date: '2026-02-20'
- change: added
  target: request
  breaking: false
  deprecated: false
  doc_only: false
  note: 'Added new model IDs to params.model: claude-opus-4-6, claude-sonnet-4-6, claude-opus-4-5, claude-opus-4-5-20251101; some older Haiku 3.5 IDs now marked deprecated.'
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.properties.model.anyOf
      before: did not include opus-4-6/sonnet-4-6/opus-4-5 variants
      after: includes opus-4-6, sonnet-4-6, opus-4-5, opus-4-5-20251101 plus deprecations
  date: '2026-02-20'
- change: changed
  target: request
  breaking: false
  deprecated: false
  doc_only: true
  note: Updated example model in params example from claude-sonnet-4-5-20250929 to claude-opus-4-6.
  paths:
    - path: $.requestBody.content.application/json.schema.properties.requests.items.properties.params.example.model
      before: claude-sonnet-4-5-20250929
      after: claude-opus-4-6
  date: '2026-02-20'

{
  "description": "Streams the results of a Message Batch as a `.jsonl` file.\n\nEach line in the file is a JSON object containing the result of a single request in the Message Batch. Results are not guaranteed to be in the same order as requests. Use the `custom_id` field to match results to requests.\n\nLearn more about the Message Batches API in our [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)",
  "operationId": "beta_message_batches_results",
  "parameters": [
    {
      "description": "ID of the Message Batch.",
      "in": "path",
      "name": "message_batch_id",
      "required": true,
      "schema": {
        "description": "ID of the Message Batch.",
        "title": "Message Batch Id",
        "type": "string"
      }
    },
    {
      "description": "Optional header to specify the beta version(s) you want to use.\n\nTo use multiple betas, use a comma separated list like `beta1,beta2` or specify the header multiple times for each beta.",
      "in": "header",
      "name": "anthropic-beta",
      "required": false,
      "schema": {
        "description": "Optional header to specify the beta version(s) you want to use.\n\nTo use multiple betas, use a comma separated list like `beta1,beta2` or specify the header multiple times for each beta.",
        "items": {
          "type": "string"
        },
        "title": "Anthropic-Beta",
        "type": "string"
      }
    },
    {
      "description": "The version of the Claude API you want to use.\n\nRead more about versioning and our version history [here](https://docs.claude.com/en/api/versioning).",
      "in": "header",
      "name": "anthropic-version",
      "required": false,
      "schema": {
        "description": "The version of the Claude API you want to use.\n\nRead more about versioning and our version history [here](https://docs.claude.com/en/api/versioning).",
        "title": "Anthropic-Version",
        "type": "string"
      }
    },
    {
      "description": "Your unique API key for authentication.\n\nThis key is required in the header of all API requests, to authenticate your account and access Anthropic's services. Get your API key through the [Console](https://console.anthropic.com/settings/keys). Each key is scoped to a Workspace.",
      "in": "header",
      "name": "x-api-key",
      "required": false,
      "schema": {
        "description": "Your unique API key for authentication.\n\nThis key is required in the header of all API requests, to authenticate your account and access Anthropic's services. Get your API key through the [Console](https://console.anthropic.com/settings/keys). Each key is scoped to a Workspace.",
        "title": "X-Api-Key",
        "type": "string"
      }
    }
  ],
  "responses": {
    "200": {
      "content": {
        "application/x-jsonl": {
          "schema": {
            "description": "This is a single line in the response `.jsonl` file and does not represent the response as a whole.",
            "properties": {
              "custom_id": {
                "description": "Developer-provided ID created for each request in a Message Batch. Useful for matching results to requests, as results may be given out of request order.\n\nMust be unique for each request within the Message Batch.",
                "examples": [
                  "my-custom-id-1"
                ],
                "title": "Custom Id",
                "type": "string"
              },
              "result": {
                "description": "Processing result for this request.\n\nContains a Message output if processing was successful, an error response if processing failed, or the reason why processing was not attempted, such as cancellation or expiration.",
                "discriminator": {
                  "mapping": {
                    "canceled": "#/components/schemas/BetaCanceledResult",
                    "errored": "#/components/schemas/BetaErroredResult",
                    "expired": "#/components/schemas/BetaExpiredResult",
                    "succeeded": "#/components/schemas/BetaSucceededResult"
                  },
                  "propertyName": "type"
                },
                "oneOf": [
                  {
                    "properties": {
                      "message": {
                        "examples": [
                          {
                            "content": [
                              {
                                "citations": null,
                                "text": "Hi! My name is Claude.",
                                "type": "text"
                              }
                            ],
                            "id": "msg_013Zva2CMHLNnXjNJJKqJ2EF",
                            "model": "claude-opus-4-6",
                            "role": "assistant",
                            "stop_reason": "end_turn",
                            "stop_sequence": null,
                            "type": "message",
                            "usage": {
                              "input_tokens": 2095,
                              "output_tokens": 503
                            }
                          }
                        ],
                        "properties": {
                          "container": {
                            "anyOf": [
                              {
                                "description": "Information about the container used in the request (for the code execution tool)",
                                "properties": {
                                  "expires_at": {
                                    "description": "The time at which the container will expire.",
                                    "format": "date-time",
                                    "title": "Expires At",
                                    "type": "string"
                                  },
                                  "id": {
                                    "description": "Identifier for the container used in this request",
                                    "title": "Id",
                                    "type": "string"
                                  },
                                  "skills": {
                                    "anyOf": [
                                      {
                                        "items": {
                                          "description": "A skill that was loaded in a container (response model).",
                                          "properties": {
                                            "skill_id": {
                                              "description": "Skill ID",
                                              "maxLength": 64,
                                              "minLength": 1,
                                              "title": "Skill Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "description": "Type of skill - either 'anthropic' (built-in) or 'custom' (user-defined)",
                                              "enum": [
                                                "anthropic",
                                                "custom"
                                              ],
                                              "title": "Type",
                                              "type": "string"
                                            },
                                            "version": {
                                              "description": "Skill version or 'latest' for most recent version",
                                              "maxLength": 64,
                                              "minLength": 1,
                                              "title": "Version",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "skill_id",
                                            "type",
                                            "version"
                                          ],
                                          "title": "Skill",
                                          "type": "object"
                                        },
                                        "type": "array"
                                      },
                                      {
                                        "type": "null"
                                      }
                                    ],
                                    "default": null,
                                    "description": "Skills loaded in the container",
                                    "title": "Skills"
                                  }
                                },
                                "required": [
                                  "expires_at",
                                  "id",
                                  "skills"
                                ],
                                "title": "Container",
                                "type": "object"
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null,
                            "description": "Information about the container used in this request.\n\nThis will be non-null if a container tool (e.g. code execution) was used."
                          },
                          "content": {
                            "description": "Content generated by the model.\n\nThis is an array of content blocks, each of which has a `type` that determines its shape.\n\nExample:\n\n```json\n[{\"type\": \"text\", \"text\": \"Hi, I'm Claude.\"}]\n```\n\nIf the request input `messages` ended with an `assistant` turn, then the response `content` will continue directly from that last turn. You can use this to constrain the model's output.\n\nFor example, if the input `messages` were:\n```json\n[\n  {\"role\": \"user\", \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"},\n  {\"role\": \"assistant\", \"content\": \"The best answer is (\"}\n]\n```\n\nThen the response `content` might be:\n\n```json\n[{\"type\": \"text\", \"text\": \"B)\"}]\n```",
                            "examples": [
                              [
                                {
                                  "citations": null,
                                  "text": "Hi! My name is Claude.",
                                  "type": "text"
                                }
                              ]
                            ],
                            "items": {
                              "discriminator": {
                                "mapping": {
                                  "bash_code_execution_tool_result": "#/components/schemas/BetaResponseBashCodeExecutionToolResultBlock",
                                  "code_execution_tool_result": "#/components/schemas/BetaResponseCodeExecutionToolResultBlock",
                                  "compaction": "#/components/schemas/BetaResponseCompactionBlock",
                                  "container_upload": "#/components/schemas/BetaResponseContainerUploadBlock",
                                  "mcp_tool_result": "#/components/schemas/BetaResponseMCPToolResultBlock",
                                  "mcp_tool_use": "#/components/schemas/BetaResponseMCPToolUseBlock",
                                  "redacted_thinking": "#/components/schemas/BetaResponseRedactedThinkingBlock",
                                  "server_tool_use": "#/components/schemas/BetaResponseServerToolUseBlock",
                                  "text": "#/components/schemas/BetaResponseTextBlock",
                                  "text_editor_code_execution_tool_result": "#/components/schemas/BetaResponseTextEditorCodeExecutionToolResultBlock",
                                  "thinking": "#/components/schemas/BetaResponseThinkingBlock",
                                  "tool_search_tool_result": "#/components/schemas/BetaResponseToolSearchToolResultBlock",
                                  "tool_use": "#/components/schemas/BetaResponseToolUseBlock",
                                  "web_fetch_tool_result": "#/components/schemas/BetaResponseWebFetchToolResultBlock",
                                  "web_search_tool_result": "#/components/schemas/BetaResponseWebSearchToolResultBlock"
                                },
                                "propertyName": "type"
                              },
                              "oneOf": [
                                {
                                  "properties": {
                                    "citations": {
                                      "anyOf": [
                                        {
                                          "items": {
                                            "discriminator": {
                                              "mapping": {
                                                "char_location": "#/components/schemas/BetaResponseCharLocationCitation",
                                                "content_block_location": "#/components/schemas/BetaResponseContentBlockLocationCitation",
                                                "page_location": "#/components/schemas/BetaResponsePageLocationCitation",
                                                "search_result_location": "#/components/schemas/BetaResponseSearchResultLocationCitation",
                                                "web_search_result_location": "#/components/schemas/BetaResponseWebSearchResultLocationCitation"
                                              },
                                              "propertyName": "type"
                                            },
                                            "oneOf": [
                                              {
                                                "properties": {
                                                  "cited_text": {
                                                    "title": "Cited Text",
                                                    "type": "string"
                                                  },
                                                  "document_index": {
                                                    "minimum": 0,
                                                    "title": "Document Index",
                                                    "type": "integer"
                                                  },
                                                  "document_title": {
                                                    "anyOf": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "title": "Document Title"
                                                  },
                                                  "end_char_index": {
                                                    "title": "End Char Index",
                                                    "type": "integer"
                                                  },
                                                  "file_id": {
                                                    "anyOf": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "default": null,
                                                    "title": "File Id"
                                                  },
                                                  "start_char_index": {
                                                    "minimum": 0,
                                                    "title": "Start Char Index",
                                                    "type": "integer"
                                                  },
                                                  "type": {
                                                    "const": "char_location",
                                                    "default": "char_location",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "cited_text",
                                                  "document_index",
                                                  "document_title",
                                                  "end_char_index",
                                                  "file_id",
                                                  "start_char_index",
                                                  "type"
                                                ],
                                                "title": "ResponseCharLocationCitation",
                                                "type": "object"
                                              },
                                              {
                                                "properties": {
                                                  "cited_text": {
                                                    "title": "Cited Text",
                                                    "type": "string"
                                                  },
                                                  "document_index": {
                                                    "minimum": 0,
                                                    "title": "Document Index",
                                                    "type": "integer"
                                                  },
                                                  "document_title": {
                                                    "anyOf": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "title": "Document Title"
                                                  },
                                                  "end_page_number": {
                                                    "title": "End Page Number",
                                                    "type": "integer"
                                                  },
                                                  "file_id": {
                                                    "anyOf": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "default": null,
                                                    "title": "File Id"
                                                  },
                                                  "start_page_number": {
                                                    "minimum": 1,
                                                    "title": "Start Page Number",
                                                    "type": "integer"
                                                  },
                                                  "type": {
                                                    "const": "page_location",
                                                    "default": "page_location",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "cited_text",
                                                  "document_index",
                                                  "document_title",
                                                  "end_page_number",
                                                  "file_id",
                                                  "start_page_number",
                                                  "type"
                                                ],
                                                "title": "ResponsePageLocationCitation",
                                                "type": "object"
                                              },
                                              {
                                                "properties": {
                                                  "cited_text": {
                                                    "title": "Cited Text",
                                                    "type": "string"
                                                  },
                                                  "document_index": {
                                                    "minimum": 0,
                                                    "title": "Document Index",
                                                    "type": "integer"
                                                  },
                                                  "document_title": {
                                                    "anyOf": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "title": "Document Title"
                                                  },
                                                  "end_block_index": {
                                                    "title": "End Block Index",
                                                    "type": "integer"
                                                  },
                                                  "file_id": {
                                                    "anyOf": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "default": null,
                                                    "title": "File Id"
                                                  },
                                                  "start_block_index": {
                                                    "minimum": 0,
                                                    "title": "Start Block Index",
                                                    "type": "integer"
                                                  },
                                                  "type": {
                                                    "const": "content_block_location",
                                                    "default": "content_block_location",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "cited_text",
                                                  "document_index",
                                                  "document_title",
                                                  "end_block_index",
                                                  "file_id",
                                                  "start_block_index",
                                                  "type"
                                                ],
                                                "title": "ResponseContentBlockLocationCitation",
                                                "type": "object"
                                              },
                                              {
                                                "properties": {
                                                  "cited_text": {
                                                    "title": "Cited Text",
                                                    "type": "string"
                                                  },
                                                  "encrypted_index": {
                                                    "title": "Encrypted Index",
                                                    "type": "string"
                                                  },
                                                  "title": {
                                                    "anyOf": [
                                                      {
                                                        "maxLength": 512,
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "title": "Title"
                                                  },
                                                  "type": {
                                                    "const": "web_search_result_location",
                                                    "default": "web_search_result_location",
                                                    "title": "Type",
                                                    "type": "string"
                                                  },
                                                  "url": {
                                                    "title": "Url",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "cited_text",
                                                  "encrypted_index",
                                                  "title",
                                                  "type",
                                                  "url"
                                                ],
                                                "title": "ResponseWebSearchResultLocationCitation",
                                                "type": "object"
                                              },
                                              {
                                                "properties": {
                                                  "cited_text": {
                                                    "title": "Cited Text",
                                                    "type": "string"
                                                  },
                                                  "end_block_index": {
                                                    "title": "End Block Index",
                                                    "type": "integer"
                                                  },
                                                  "search_result_index": {
                                                    "minimum": 0,
                                                    "title": "Search Result Index",
                                                    "type": "integer"
                                                  },
                                                  "source": {
                                                    "title": "Source",
                                                    "type": "string"
                                                  },
                                                  "start_block_index": {
                                                    "minimum": 0,
                                                    "title": "Start Block Index",
                                                    "type": "integer"
                                                  },
                                                  "title": {
                                                    "anyOf": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "null"
                                                      }
                                                    ],
                                                    "title": "Title"
                                                  },
                                                  "type": {
                                                    "const": "search_result_location",
                                                    "default": "search_result_location",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "cited_text",
                                                  "end_block_index",
                                                  "search_result_index",
                                                  "source",
                                                  "start_block_index",
                                                  "title",
                                                  "type"
                                                ],
                                                "title": "ResponseSearchResultLocationCitation",
                                                "type": "object"
                                              }
                                            ]
                                          },
                                          "type": "array"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ],
                                      "default": null,
                                      "description": "Citations supporting the text block.\n\nThe type of citation returned will depend on the type of document being cited. Citing a PDF results in `page_location`, plain text results in `char_location`, and content document results in `content_block_location`.",
                                      "title": "Citations"
                                    },
                                    "text": {
                                      "maxLength": 5000000,
                                      "minLength": 0,
                                      "title": "Text",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "text",
                                      "default": "text",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "citations",
                                    "text",
                                    "type"
                                  ],
                                  "title": "ResponseTextBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "signature": {
                                      "title": "Signature",
                                      "type": "string"
                                    },
                                    "thinking": {
                                      "title": "Thinking",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "thinking",
                                      "default": "thinking",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "signature",
                                    "thinking",
                                    "type"
                                  ],
                                  "title": "ResponseThinkingBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "data": {
                                      "title": "Data",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "redacted_thinking",
                                      "default": "redacted_thinking",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "data",
                                    "type"
                                  ],
                                  "title": "ResponseRedactedThinkingBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "caller": {
                                      "discriminator": {
                                        "mapping": {
                                          "code_execution_20250825": "#/components/schemas/BetaServerToolCaller",
                                          "code_execution_20260120": "#/components/schemas/BetaServerToolCaller_20260120",
                                          "direct": "#/components/schemas/BetaDirectCaller"
                                        },
                                        "propertyName": "type"
                                      },
                                      "oneOf": [
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation directly from the model.",
                                          "properties": {
                                            "type": {
                                              "const": "direct",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "type"
                                          ],
                                          "title": "DirectCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation generated by a server-side tool.",
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20250825",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20260120",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller_20260120",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Caller"
                                    },
                                    "id": {
                                      "pattern": "^[a-zA-Z0-9_-]+$",
                                      "title": "Id",
                                      "type": "string"
                                    },
                                    "input": {
                                      "additionalProperties": true,
                                      "title": "Input",
                                      "type": "object"
                                    },
                                    "name": {
                                      "minLength": 1,
                                      "title": "Name",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "tool_use",
                                      "default": "tool_use",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "input",
                                    "name",
                                    "type"
                                  ],
                                  "title": "ResponseToolUseBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "caller": {
                                      "discriminator": {
                                        "mapping": {
                                          "code_execution_20250825": "#/components/schemas/BetaServerToolCaller",
                                          "code_execution_20260120": "#/components/schemas/BetaServerToolCaller_20260120",
                                          "direct": "#/components/schemas/BetaDirectCaller"
                                        },
                                        "propertyName": "type"
                                      },
                                      "oneOf": [
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation directly from the model.",
                                          "properties": {
                                            "type": {
                                              "const": "direct",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "type"
                                          ],
                                          "title": "DirectCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation generated by a server-side tool.",
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20250825",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20260120",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller_20260120",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Caller"
                                    },
                                    "id": {
                                      "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                      "title": "Id",
                                      "type": "string"
                                    },
                                    "input": {
                                      "additionalProperties": true,
                                      "title": "Input",
                                      "type": "object"
                                    },
                                    "name": {
                                      "enum": [
                                        "web_search",
                                        "web_fetch",
                                        "code_execution",
                                        "bash_code_execution",
                                        "text_editor_code_execution",
                                        "tool_search_tool_regex",
                                        "tool_search_tool_bm25"
                                      ],
                                      "title": "Name",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "server_tool_use",
                                      "default": "server_tool_use",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "input",
                                    "name",
                                    "type"
                                  ],
                                  "title": "ResponseServerToolUseBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "caller": {
                                      "discriminator": {
                                        "mapping": {
                                          "code_execution_20250825": "#/components/schemas/BetaServerToolCaller",
                                          "code_execution_20260120": "#/components/schemas/BetaServerToolCaller_20260120",
                                          "direct": "#/components/schemas/BetaDirectCaller"
                                        },
                                        "propertyName": "type"
                                      },
                                      "oneOf": [
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation directly from the model.",
                                          "properties": {
                                            "type": {
                                              "const": "direct",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "type"
                                          ],
                                          "title": "DirectCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation generated by a server-side tool.",
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20250825",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20260120",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller_20260120",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Caller"
                                    },
                                    "content": {
                                      "anyOf": [
                                        {
                                          "properties": {
                                            "error_code": {
                                              "enum": [
                                                "invalid_tool_input",
                                                "unavailable",
                                                "max_uses_exceeded",
                                                "too_many_requests",
                                                "query_too_long",
                                                "request_too_large"
                                              ],
                                              "title": "WebSearchToolResultErrorCode",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "web_search_tool_result_error",
                                              "default": "web_search_tool_result_error",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "error_code",
                                            "type"
                                          ],
                                          "title": "ResponseWebSearchToolResultError",
                                          "type": "object"
                                        },
                                        {
                                          "items": {
                                            "properties": {
                                              "encrypted_content": {
                                                "title": "Encrypted Content",
                                                "type": "string"
                                              },
                                              "page_age": {
                                                "anyOf": [
                                                  {
                                                    "type": "string"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ],
                                                "default": null,
                                                "title": "Page Age"
                                              },
                                              "title": {
                                                "title": "Title",
                                                "type": "string"
                                              },
                                              "type": {
                                                "const": "web_search_result",
                                                "default": "web_search_result",
                                                "title": "Type",
                                                "type": "string"
                                              },
                                              "url": {
                                                "title": "Url",
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "encrypted_content",
                                              "page_age",
                                              "title",
                                              "type",
                                              "url"
                                            ],
                                            "title": "ResponseWebSearchResultBlock",
                                            "type": "object"
                                          },
                                          "type": "array"
                                        }
                                      ],
                                      "title": "Content"
                                    },
                                    "tool_use_id": {
                                      "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                      "title": "Tool Use Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "web_search_tool_result",
                                      "default": "web_search_tool_result",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "tool_use_id",
                                    "type"
                                  ],
                                  "title": "ResponseWebSearchToolResultBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "caller": {
                                      "discriminator": {
                                        "mapping": {
                                          "code_execution_20250825": "#/components/schemas/BetaServerToolCaller",
                                          "code_execution_20260120": "#/components/schemas/BetaServerToolCaller_20260120",
                                          "direct": "#/components/schemas/BetaDirectCaller"
                                        },
                                        "propertyName": "type"
                                      },
                                      "oneOf": [
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation directly from the model.",
                                          "properties": {
                                            "type": {
                                              "const": "direct",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "type"
                                          ],
                                          "title": "DirectCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "description": "Tool invocation generated by a server-side tool.",
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20250825",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller",
                                          "type": "object"
                                        },
                                        {
                                          "additionalProperties": false,
                                          "properties": {
                                            "tool_id": {
                                              "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                              "title": "Tool Id",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_20260120",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_id",
                                            "type"
                                          ],
                                          "title": "ServerToolCaller_20260120",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Caller"
                                    },
                                    "content": {
                                      "anyOf": [
                                        {
                                          "properties": {
                                            "error_code": {
                                              "enum": [
                                                "invalid_tool_input",
                                                "url_too_long",
                                                "url_not_allowed",
                                                "url_not_accessible",
                                                "unsupported_content_type",
                                                "too_many_requests",
                                                "max_uses_exceeded",
                                                "unavailable"
                                              ],
                                              "title": "WebFetchToolResultErrorCode",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "web_fetch_tool_result_error",
                                              "default": "web_fetch_tool_result_error",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "error_code",
                                            "type"
                                          ],
                                          "title": "ResponseWebFetchToolResultError",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "content": {
                                              "properties": {
                                                "citations": {
                                                  "anyOf": [
                                                    {
                                                      "properties": {
                                                        "enabled": {
                                                          "default": false,
                                                          "title": "Enabled",
                                                          "type": "boolean"
                                                        }
                                                      },
                                                      "required": [
                                                        "enabled"
                                                      ],
                                                      "title": "ResponseCitationsConfig",
                                                      "type": "object"
                                                    },
                                                    {
                                                      "type": "null"
                                                    }
                                                  ],
                                                  "default": null,
                                                  "description": "Citation configuration for the document"
                                                },
                                                "source": {
                                                  "discriminator": {
                                                    "mapping": {
                                                      "base64": "#/components/schemas/BetaBase64PDFSource",
                                                      "text": "#/components/schemas/BetaPlainTextSource"
                                                    },
                                                    "propertyName": "type"
                                                  },
                                                  "oneOf": [
                                                    {
                                                      "additionalProperties": false,
                                                      "properties": {
                                                        "data": {
                                                          "format": "byte",
                                                          "title": "Data",
                                                          "type": "string"
                                                        },
                                                        "media_type": {
                                                          "const": "application/pdf",
                                                          "title": "Media Type",
                                                          "type": "string"
                                                        },
                                                        "type": {
                                                          "const": "base64",
                                                          "title": "Type",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "data",
                                                        "media_type",
                                                        "type"
                                                      ],
                                                      "title": "Base64PDFSource",
                                                      "type": "object"
                                                    },
                                                    {
                                                      "additionalProperties": false,
                                                      "properties": {
                                                        "data": {
                                                          "title": "Data",
                                                          "type": "string"
                                                        },
                                                        "media_type": {
                                                          "const": "text/plain",
                                                          "title": "Media Type",
                                                          "type": "string"
                                                        },
                                                        "type": {
                                                          "const": "text",
                                                          "title": "Type",
                                                          "type": "string"
                                                        }
                                                      },
                                                      "required": [
                                                        "data",
                                                        "media_type",
                                                        "type"
                                                      ],
                                                      "title": "PlainTextSource",
                                                      "type": "object"
                                                    }
                                                  ],
                                                  "title": "Source"
                                                },
                                                "title": {
                                                  "anyOf": [
                                                    {
                                                      "type": "string"
                                                    },
                                                    {
                                                      "type": "null"
                                                    }
                                                  ],
                                                  "default": null,
                                                  "description": "The title of the document",
                                                  "title": "Title"
                                                },
                                                "type": {
                                                  "const": "document",
                                                  "default": "document",
                                                  "title": "Type",
                                                  "type": "string"
                                                }
                                              },
                                              "required": [
                                                "citations",
                                                "source",
                                                "title",
                                                "type"
                                              ],
                                              "title": "ResponseDocumentBlock",
                                              "type": "object"
                                            },
                                            "retrieved_at": {
                                              "anyOf": [
                                                {
                                                  "type": "string"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "description": "ISO 8601 timestamp when the content was retrieved",
                                              "title": "Retrieved At"
                                            },
                                            "type": {
                                              "const": "web_fetch_result",
                                              "default": "web_fetch_result",
                                              "title": "Type",
                                              "type": "string"
                                            },
                                            "url": {
                                              "description": "Fetched content URL",
                                              "title": "Url",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "content",
                                            "retrieved_at",
                                            "type",
                                            "url"
                                          ],
                                          "title": "ResponseWebFetchResultBlock",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Content"
                                    },
                                    "tool_use_id": {
                                      "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                      "title": "Tool Use Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "web_fetch_tool_result",
                                      "default": "web_fetch_tool_result",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "tool_use_id",
                                    "type"
                                  ],
                                  "title": "ResponseWebFetchToolResultBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "content": {
                                      "anyOf": [
                                        {
                                          "properties": {
                                            "error_code": {
                                              "enum": [
                                                "invalid_tool_input",
                                                "unavailable",
                                                "too_many_requests",
                                                "execution_time_exceeded"
                                              ],
                                              "title": "CodeExecutionToolResultErrorCode",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_tool_result_error",
                                              "default": "code_execution_tool_result_error",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "error_code",
                                            "type"
                                          ],
                                          "title": "ResponseCodeExecutionToolResultError",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "content": {
                                              "items": {
                                                "properties": {
                                                  "file_id": {
                                                    "title": "File Id",
                                                    "type": "string"
                                                  },
                                                  "type": {
                                                    "const": "code_execution_output",
                                                    "default": "code_execution_output",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "file_id",
                                                  "type"
                                                ],
                                                "title": "ResponseCodeExecutionOutputBlock",
                                                "type": "object"
                                              },
                                              "title": "Content",
                                              "type": "array"
                                            },
                                            "return_code": {
                                              "title": "Return Code",
                                              "type": "integer"
                                            },
                                            "stderr": {
                                              "title": "Stderr",
                                              "type": "string"
                                            },
                                            "stdout": {
                                              "title": "Stdout",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "code_execution_result",
                                              "default": "code_execution_result",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "content",
                                            "return_code",
                                            "stderr",
                                            "stdout",
                                            "type"
                                          ],
                                          "title": "ResponseCodeExecutionResultBlock",
                                          "type": "object"
                                        },
                                        {
                                          "description": "Code execution result with encrypted stdout for PFC + web_search results.",
                                          "properties": {
                                            "content": {
                                              "items": {
                                                "properties": {
                                                  "file_id": {
                                                    "title": "File Id",
                                                    "type": "string"
                                                  },
                                                  "type": {
                                                    "const": "code_execution_output",
                                                    "default": "code_execution_output",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "file_id",
                                                  "type"
                                                ],
                                                "title": "ResponseCodeExecutionOutputBlock",
                                                "type": "object"
                                              },
                                              "title": "Content",
                                              "type": "array"
                                            },
                                            "encrypted_stdout": {
                                              "title": "Encrypted Stdout",
                                              "type": "string"
                                            },
                                            "return_code": {
                                              "title": "Return Code",
                                              "type": "integer"
                                            },
                                            "stderr": {
                                              "title": "Stderr",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "encrypted_code_execution_result",
                                              "default": "encrypted_code_execution_result",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "content",
                                            "encrypted_stdout",
                                            "return_code",
                                            "stderr",
                                            "type"
                                          ],
                                          "title": "ResponseEncryptedCodeExecutionResultBlock",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Content"
                                    },
                                    "tool_use_id": {
                                      "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                      "title": "Tool Use Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "code_execution_tool_result",
                                      "default": "code_execution_tool_result",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "tool_use_id",
                                    "type"
                                  ],
                                  "title": "ResponseCodeExecutionToolResultBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "content": {
                                      "anyOf": [
                                        {
                                          "properties": {
                                            "error_code": {
                                              "enum": [
                                                "invalid_tool_input",
                                                "unavailable",
                                                "too_many_requests",
                                                "execution_time_exceeded",
                                                "output_file_too_large"
                                              ],
                                              "title": "BashCodeExecutionToolResultErrorCode",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "bash_code_execution_tool_result_error",
                                              "default": "bash_code_execution_tool_result_error",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "error_code",
                                            "type"
                                          ],
                                          "title": "ResponseBashCodeExecutionToolResultError",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "content": {
                                              "items": {
                                                "properties": {
                                                  "file_id": {
                                                    "title": "File Id",
                                                    "type": "string"
                                                  },
                                                  "type": {
                                                    "const": "bash_code_execution_output",
                                                    "default": "bash_code_execution_output",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "file_id",
                                                  "type"
                                                ],
                                                "title": "ResponseBashCodeExecutionOutputBlock",
                                                "type": "object"
                                              },
                                              "title": "Content",
                                              "type": "array"
                                            },
                                            "return_code": {
                                              "title": "Return Code",
                                              "type": "integer"
                                            },
                                            "stderr": {
                                              "title": "Stderr",
                                              "type": "string"
                                            },
                                            "stdout": {
                                              "title": "Stdout",
                                              "type": "string"
                                            },
                                            "type": {
                                              "const": "bash_code_execution_result",
                                              "default": "bash_code_execution_result",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "content",
                                            "return_code",
                                            "stderr",
                                            "stdout",
                                            "type"
                                          ],
                                          "title": "ResponseBashCodeExecutionResultBlock",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Content"
                                    },
                                    "tool_use_id": {
                                      "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                      "title": "Tool Use Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "bash_code_execution_tool_result",
                                      "default": "bash_code_execution_tool_result",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "tool_use_id",
                                    "type"
                                  ],
                                  "title": "ResponseBashCodeExecutionToolResultBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "content": {
                                      "anyOf": [
                                        {
                                          "properties": {
                                            "error_code": {
                                              "enum": [
                                                "invalid_tool_input",
                                                "unavailable",
                                                "too_many_requests",
                                                "execution_time_exceeded",
                                                "file_not_found"
                                              ],
                                              "title": "TextEditorCodeExecutionToolResultErrorCode",
                                              "type": "string"
                                            },
                                            "error_message": {
                                              "anyOf": [
                                                {
                                                  "type": "string"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Error Message"
                                            },
                                            "type": {
                                              "const": "text_editor_code_execution_tool_result_error",
                                              "default": "text_editor_code_execution_tool_result_error",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "error_code",
                                            "error_message",
                                            "type"
                                          ],
                                          "title": "ResponseTextEditorCodeExecutionToolResultError",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "content": {
                                              "title": "Content",
                                              "type": "string"
                                            },
                                            "file_type": {
                                              "enum": [
                                                "text",
                                                "image",
                                                "pdf"
                                              ],
                                              "title": "File Type",
                                              "type": "string"
                                            },
                                            "num_lines": {
                                              "anyOf": [
                                                {
                                                  "type": "integer"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Num Lines"
                                            },
                                            "start_line": {
                                              "anyOf": [
                                                {
                                                  "type": "integer"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Start Line"
                                            },
                                            "total_lines": {
                                              "anyOf": [
                                                {
                                                  "type": "integer"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Total Lines"
                                            },
                                            "type": {
                                              "const": "text_editor_code_execution_view_result",
                                              "default": "text_editor_code_execution_view_result",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "content",
                                            "file_type",
                                            "num_lines",
                                            "start_line",
                                            "total_lines",
                                            "type"
                                          ],
                                          "title": "ResponseTextEditorCodeExecutionViewResultBlock",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "is_file_update": {
                                              "title": "Is File Update",
                                              "type": "boolean"
                                            },
                                            "type": {
                                              "const": "text_editor_code_execution_create_result",
                                              "default": "text_editor_code_execution_create_result",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "is_file_update",
                                            "type"
                                          ],
                                          "title": "ResponseTextEditorCodeExecutionCreateResultBlock",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "lines": {
                                              "anyOf": [
                                                {
                                                  "items": {
                                                    "type": "string"
                                                  },
                                                  "type": "array"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Lines"
                                            },
                                            "new_lines": {
                                              "anyOf": [
                                                {
                                                  "type": "integer"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "New Lines"
                                            },
                                            "new_start": {
                                              "anyOf": [
                                                {
                                                  "type": "integer"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "New Start"
                                            },
                                            "old_lines": {
                                              "anyOf": [
                                                {
                                                  "type": "integer"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Old Lines"
                                            },
                                            "old_start": {
                                              "anyOf": [
                                                {
                                                  "type": "integer"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Old Start"
                                            },
                                            "type": {
                                              "const": "text_editor_code_execution_str_replace_result",
                                              "default": "text_editor_code_execution_str_replace_result",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "lines",
                                            "new_lines",
                                            "new_start",
                                            "old_lines",
                                            "old_start",
                                            "type"
                                          ],
                                          "title": "ResponseTextEditorCodeExecutionStrReplaceResultBlock",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Content"
                                    },
                                    "tool_use_id": {
                                      "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                      "title": "Tool Use Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "text_editor_code_execution_tool_result",
                                      "default": "text_editor_code_execution_tool_result",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "tool_use_id",
                                    "type"
                                  ],
                                  "title": "ResponseTextEditorCodeExecutionToolResultBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "content": {
                                      "anyOf": [
                                        {
                                          "properties": {
                                            "error_code": {
                                              "enum": [
                                                "invalid_tool_input",
                                                "unavailable",
                                                "too_many_requests",
                                                "execution_time_exceeded"
                                              ],
                                              "title": "ToolSearchToolResultErrorCode",
                                              "type": "string"
                                            },
                                            "error_message": {
                                              "anyOf": [
                                                {
                                                  "type": "string"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "title": "Error Message"
                                            },
                                            "type": {
                                              "const": "tool_search_tool_result_error",
                                              "default": "tool_search_tool_result_error",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "error_code",
                                            "error_message",
                                            "type"
                                          ],
                                          "title": "ResponseToolSearchToolResultError",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "tool_references": {
                                              "items": {
                                                "properties": {
                                                  "tool_name": {
                                                    "maxLength": 256,
                                                    "minLength": 1,
                                                    "pattern": "^[a-zA-Z0-9_-]{1,256}$",
                                                    "title": "Tool Name",
                                                    "type": "string"
                                                  },
                                                  "type": {
                                                    "const": "tool_reference",
                                                    "default": "tool_reference",
                                                    "title": "Type",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "tool_name",
                                                  "type"
                                                ],
                                                "title": "ResponseToolReferenceBlock",
                                                "type": "object"
                                              },
                                              "title": "Tool References",
                                              "type": "array"
                                            },
                                            "type": {
                                              "const": "tool_search_tool_search_result",
                                              "default": "tool_search_tool_search_result",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "tool_references",
                                            "type"
                                          ],
                                          "title": "ResponseToolSearchToolSearchResultBlock",
                                          "type": "object"
                                        }
                                      ],
                                      "title": "Content"
                                    },
                                    "tool_use_id": {
                                      "pattern": "^srvtoolu_[a-zA-Z0-9_]+$",
                                      "title": "Tool Use Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "tool_search_tool_result",
                                      "default": "tool_search_tool_result",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "tool_use_id",
                                    "type"
                                  ],
                                  "title": "ResponseToolSearchToolResultBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "id": {
                                      "pattern": "^[a-zA-Z0-9_-]+$",
                                      "title": "Id",
                                      "type": "string"
                                    },
                                    "input": {
                                      "additionalProperties": true,
                                      "title": "Input",
                                      "type": "object"
                                    },
                                    "name": {
                                      "description": "The name of the MCP tool",
                                      "title": "Name",
                                      "type": "string"
                                    },
                                    "server_name": {
                                      "description": "The name of the MCP server",
                                      "title": "Server Name",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "mcp_tool_use",
                                      "default": "mcp_tool_use",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "id",
                                    "input",
                                    "name",
                                    "server_name",
                                    "type"
                                  ],
                                  "title": "ResponseMCPToolUseBlock",
                                  "type": "object"
                                },
                                {
                                  "properties": {
                                    "content": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "items": {
                                            "properties": {
                                              "citations": {
                                                "anyOf": [
                                                  {
                                                    "items": {
                                                      "discriminator": {
                                                        "mapping": {
                                                          "char_location": "#/components/schemas/BetaResponseCharLocationCitation",
                                                          "content_block_location": "#/components/schemas/BetaResponseContentBlockLocationCitation",
                                                          "page_location": "#/components/schemas/BetaResponsePageLocationCitation",
                                                          "search_result_location": "#/components/schemas/BetaResponseSearchResultLocationCitation",
                                                          "web_search_result_location": "#/components/schemas/BetaResponseWebSearchResultLocationCitation"
                                                        },
                                                        "propertyName": "type"
                                                      },
                                                      "oneOf": [
                                                        {
                                                          "properties": {
                                                            "cited_text": {
                                                              "title": "Cited Text",
                                                              "type": "string"
                                                            },
                                                            "document_index": {
                                                              "minimum": 0,
                                                              "title": "Document Index",
                                                              "type": "integer"
                                                            },
                                                            "document_title": {
                                                              "anyOf": [
                                                                {
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "title": "Document Title"
                                                            },
                                                            "end_char_index": {
                                                              "title": "End Char Index",
                                                              "type": "integer"
                                                            },
                                                            "file_id": {
                                                              "anyOf": [
                                                                {
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "default": null,
                                                              "title": "File Id"
                                                            },
                                                            "start_char_index": {
                                                              "minimum": 0,
                                                              "title": "Start Char Index",
                                                              "type": "integer"
                                                            },
                                                            "type": {
                                                              "const": "char_location",
                                                              "default": "char_location",
                                                              "title": "Type",
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "cited_text",
                                                            "document_index",
                                                            "document_title",
                                                            "end_char_index",
                                                            "file_id",
                                                            "start_char_index",
                                                            "type"
                                                          ],
                                                          "title": "ResponseCharLocationCitation",
                                                          "type": "object"
                                                        },
                                                        {
                                                          "properties": {
                                                            "cited_text": {
                                                              "title": "Cited Text",
                                                              "type": "string"
                                                            },
                                                            "document_index": {
                                                              "minimum": 0,
                                                              "title": "Document Index",
                                                              "type": "integer"
                                                            },
                                                            "document_title": {
                                                              "anyOf": [
                                                                {
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "title": "Document Title"
                                                            },
                                                            "end_page_number": {
                                                              "title": "End Page Number",
                                                              "type": "integer"
                                                            },
                                                            "file_id": {
                                                              "anyOf": [
                                                                {
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "default": null,
                                                              "title": "File Id"
                                                            },
                                                            "start_page_number": {
                                                              "minimum": 1,
                                                              "title": "Start Page Number",
                                                              "type": "integer"
                                                            },
                                                            "type": {
                                                              "const": "page_location",
                                                              "default": "page_location",
                                                              "title": "Type",
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "cited_text",
                                                            "document_index",
                                                            "document_title",
                                                            "end_page_number",
                                                            "file_id",
                                                            "start_page_number",
                                                            "type"
                                                          ],
                                                          "title": "ResponsePageLocationCitation",
                                                          "type": "object"
                                                        },
                                                        {
                                                          "properties": {
                                                            "cited_text": {
                                                              "title": "Cited Text",
                                                              "type": "string"
                                                            },
                                                            "document_index": {
                                                              "minimum": 0,
                                                              "title": "Document Index",
                                                              "type": "integer"
                                                            },
                                                            "document_title": {
                                                              "anyOf": [
                                                                {
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "title": "Document Title"
                                                            },
                                                            "end_block_index": {
                                                              "title": "End Block Index",
                                                              "type": "integer"
                                                            },
                                                            "file_id": {
                                                              "anyOf": [
                                                                {
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "default": null,
                                                              "title": "File Id"
                                                            },
                                                            "start_block_index": {
                                                              "minimum": 0,
                                                              "title": "Start Block Index",
                                                              "type": "integer"
                                                            },
                                                            "type": {
                                                              "const": "content_block_location",
                                                              "default": "content_block_location",
                                                              "title": "Type",
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "cited_text",
                                                            "document_index",
                                                            "document_title",
                                                            "end_block_index",
                                                            "file_id",
                                                            "start_block_index",
                                                            "type"
                                                          ],
                                                          "title": "ResponseContentBlockLocationCitation",
                                                          "type": "object"
                                                        },
                                                        {
                                                          "properties": {
                                                            "cited_text": {
                                                              "title": "Cited Text",
                                                              "type": "string"
                                                            },
                                                            "encrypted_index": {
                                                              "title": "Encrypted Index",
                                                              "type": "string"
                                                            },
                                                            "title": {
                                                              "anyOf": [
                                                                {
                                                                  "maxLength": 512,
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "title": "Title"
                                                            },
                                                            "type": {
                                                              "const": "web_search_result_location",
                                                              "default": "web_search_result_location",
                                                              "title": "Type",
                                                              "type": "string"
                                                            },
                                                            "url": {
                                                              "title": "Url",
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "cited_text",
                                                            "encrypted_index",
                                                            "title",
                                                            "type",
                                                            "url"
                                                          ],
                                                          "title": "ResponseWebSearchResultLocationCitation",
                                                          "type": "object"
                                                        },
                                                        {
                                                          "properties": {
                                                            "cited_text": {
                                                              "title": "Cited Text",
                                                              "type": "string"
                                                            },
                                                            "end_block_index": {
                                                              "title": "End Block Index",
                                                              "type": "integer"
                                                            },
                                                            "search_result_index": {
                                                              "minimum": 0,
                                                              "title": "Search Result Index",
                                                              "type": "integer"
                                                            },
                                                            "source": {
                                                              "title": "Source",
                                                              "type": "string"
                                                            },
                                                            "start_block_index": {
                                                              "minimum": 0,
                                                              "title": "Start Block Index",
                                                              "type": "integer"
                                                            },
                                                            "title": {
                                                              "anyOf": [
                                                                {
                                                                  "type": "string"
                                                                },
                                                                {
                                                                  "type": "null"
                                                                }
                                                              ],
                                                              "title": "Title"
                                                            },
                                                            "type": {
                                                              "const": "search_result_location",
                                                              "default": "search_result_location",
                                                              "title": "Type",
                                                              "type": "string"
                                                            }
                                                          },
                                                          "required": [
                                                            "cited_text",
                                                            "end_block_index",
                                                            "search_result_index",
                                                            "source",
                                                            "start_block_index",
                                                            "title",
                                                            "type"
                                                          ],
                                                          "title": "ResponseSearchResultLocationCitation",
                                                          "type": "object"
                                                        }
                                                      ]
                                                    },
                                                    "type": "array"
                                                  },
                                                  {
                                                    "type": "null"
                                                  }
                                                ],
                                                "default": null,
                                                "description": "Citations supporting the text block.\n\nThe type of citation returned will depend on the type of document being cited. Citing a PDF results in `page_location`, plain text results in `char_location`, and content document results in `content_block_location`.",
                                                "title": "Citations"
                                              },
                                              "text": {
                                                "maxLength": 5000000,
                                                "minLength": 0,
                                                "title": "Text",
                                                "type": "string"
                                              },
                                              "type": {
                                                "const": "text",
                                                "default": "text",
                                                "title": "Type",
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "citations",
                                              "text",
                                              "type"
                                            ],
                                            "title": "ResponseTextBlock",
                                            "type": "object"
                                          },
                                          "title": "beta_mcp_tool_result_block_content",
                                          "type": "array"
                                        }
                                      ],
                                      "title": "Content"
                                    },
                                    "is_error": {
                                      "default": false,
                                      "title": "Is Error",
                                      "type": "boolean"
                                    },
                                    "tool_use_id": {
                                      "pattern": "^[a-zA-Z0-9_-]+$",
                                      "title": "Tool Use Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "mcp_tool_result",
                                      "default": "mcp_tool_result",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "is_error",
                                    "tool_use_id",
                                    "type"
                                  ],
                                  "title": "ResponseMCPToolResultBlock",
                                  "type": "object"
                                },
                                {
                                  "description": "Response model for a file uploaded to the container.",
                                  "properties": {
                                    "file_id": {
                                      "title": "File Id",
                                      "type": "string"
                                    },
                                    "type": {
                                      "const": "container_upload",
                                      "default": "container_upload",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "file_id",
                                    "type"
                                  ],
                                  "title": "ResponseContainerUploadBlock",
                                  "type": "object"
                                },
                                {
                                  "description": "A compaction block returned when autocompact is triggered.\n\nWhen content is None, it indicates the compaction failed to produce a valid\nsummary (e.g., malformed output from the model). Clients may round-trip\ncompaction blocks with null content; the server treats them as no-ops.",
                                  "properties": {
                                    "content": {
                                      "anyOf": [
                                        {
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ],
                                      "description": "Summary of compacted content, or null if compaction failed",
                                      "title": "Content"
                                    },
                                    "type": {
                                      "const": "compaction",
                                      "default": "compaction",
                                      "title": "Type",
                                      "type": "string"
                                    }
                                  },
                                  "required": [
                                    "content",
                                    "type"
                                  ],
                                  "title": "ResponseCompactionBlock",
                                  "type": "object"
                                }
                              ]
                            },
                            "title": "Content",
                            "type": "array"
                          },
                          "context_management": {
                            "anyOf": [
                              {
                                "properties": {
                                  "applied_edits": {
                                    "description": "List of context management edits that were applied.",
                                    "items": {
                                      "discriminator": {
                                        "mapping": {
                                          "clear_thinking_20251015": "#/components/schemas/BetaResponseClearThinking20251015Edit",
                                          "clear_tool_uses_20250919": "#/components/schemas/BetaResponseClearToolUses20250919Edit"
                                        },
                                        "propertyName": "type"
                                      },
                                      "oneOf": [
                                        {
                                          "properties": {
                                            "cleared_input_tokens": {
                                              "description": "Number of input tokens cleared by this edit.",
                                              "minimum": 0,
                                              "title": "Cleared Input Tokens",
                                              "type": "integer"
                                            },
                                            "cleared_tool_uses": {
                                              "description": "Number of tool uses that were cleared.",
                                              "minimum": 0,
                                              "title": "Cleared Tool Uses",
                                              "type": "integer"
                                            },
                                            "type": {
                                              "const": "clear_tool_uses_20250919",
                                              "default": "clear_tool_uses_20250919",
                                              "description": "The type of context management edit applied.",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "cleared_input_tokens",
                                            "cleared_tool_uses",
                                            "type"
                                          ],
                                          "title": "ResponseClearToolUses20250919Edit",
                                          "type": "object"
                                        },
                                        {
                                          "properties": {
                                            "cleared_input_tokens": {
                                              "description": "Number of input tokens cleared by this edit.",
                                              "minimum": 0,
                                              "title": "Cleared Input Tokens",
                                              "type": "integer"
                                            },
                                            "cleared_thinking_turns": {
                                              "description": "Number of thinking turns that were cleared.",
                                              "minimum": 0,
                                              "title": "Cleared Thinking Turns",
                                              "type": "integer"
                                            },
                                            "type": {
                                              "const": "clear_thinking_20251015",
                                              "default": "clear_thinking_20251015",
                                              "description": "The type of context management edit applied.",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "cleared_input_tokens",
                                            "cleared_thinking_turns",
                                            "type"
                                          ],
                                          "title": "ResponseClearThinking20251015Edit",
                                          "type": "object"
                                        }
                                      ]
                                    },
                                    "title": "Applied Edits",
                                    "type": "array"
                                  }
                                },
                                "required": [
                                  "applied_edits"
                                ],
                                "title": "ResponseContextManagement",
                                "type": "object"
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null,
                            "description": "Context management response.\n\nInformation about context management strategies applied during the request."
                          },
                          "id": {
                            "description": "Unique object identifier.\n\nThe format and length of IDs may change over time.",
                            "examples": [
                              "msg_013Zva2CMHLNnXjNJJKqJ2EF"
                            ],
                            "title": "Id",
                            "type": "string"
                          },
                          "model": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "const": "claude-opus-4-6",
                                "description": "Most intelligent model for building agents and coding"
                              },
                              {
                                "const": "claude-sonnet-4-6",
                                "description": "Frontier intelligence at scale  built for coding, agents, and enterprise workflows"
                              },
                              {
                                "const": "claude-opus-4-5-20251101",
                                "description": "Premium model combining maximum intelligence with practical performance"
                              },
                              {
                                "const": "claude-opus-4-5",
                                "description": "Premium model combining maximum intelligence with practical performance"
                              },
                              {
                                "const": "claude-3-7-sonnet-latest",
                                "deprecated": true,
                                "description": "High-performance model with early extended thinking"
                              },
                              {
                                "const": "claude-3-7-sonnet-20250219",
                                "deprecated": true,
                                "description": "High-performance model with early extended thinking"
                              },
                              {
                                "const": "claude-3-5-haiku-latest",
                                "deprecated": true,
                                "description": "Fastest and most compact model for near-instant responsiveness"
                              },
                              {
                                "const": "claude-3-5-haiku-20241022",
                                "deprecated": true,
                                "description": "Our fastest model"
                              },
                              {
                                "const": "claude-haiku-4-5",
                                "description": "Hybrid model, capable of near-instant responses and extended thinking"
                              },
                              {
                                "const": "claude-haiku-4-5-20251001",
                                "description": "Hybrid model, capable of near-instant responses and extended thinking"
                              },
                              {
                                "const": "claude-sonnet-4-20250514",
                                "description": "High-performance model with extended thinking"
                              },
                              {
                                "const": "claude-sonnet-4-0",
                                "description": "High-performance model with extended thinking"
                              },
                              {
                                "const": "claude-4-sonnet-20250514",
                                "description": "High-performance model with extended thinking"
                              },
                              {
                                "const": "claude-sonnet-4-5",
                                "description": "Our best model for real-world agents and coding"
                              },
                              {
                                "const": "claude-sonnet-4-5-20250929",
                                "description": "Our best model for real-world agents and coding"
                              },
                              {
                                "const": "claude-opus-4-0",
                                "description": "Our most capable model"
                              },
                              {
                                "const": "claude-opus-4-20250514",
                                "description": "Our most capable model"
                              },
                              {
                                "const": "claude-4-opus-20250514",
                                "description": "Our most capable model"
                              },
                              {
                                "const": "claude-opus-4-1-20250805",
                                "description": "Our most capable model"
                              },
                              {
                                "const": "claude-3-opus-latest",
                                "deprecated": true,
                                "description": "Excels at writing and complex tasks"
                              },
                              {
                                "const": "claude-3-opus-20240229",
                                "deprecated": true,
                                "description": "Excels at writing and complex tasks"
                              },
                              {
                                "const": "claude-3-haiku-20240307",
                                "description": "Our previous most fast and cost-effective"
                              }
                            ],
                            "description": "The model that will complete your prompt.\\n\\nSee [models](https://docs.anthropic.com/en/docs/models-overview) for additional details and options.",
                            "title": "Model"
                          },
                          "role": {
                            "const": "assistant",
                            "default": "assistant",
                            "description": "Conversational role of the generated message.\n\nThis will always be `\"assistant\"`.",
                            "title": "Role",
                            "type": "string"
                          },
                          "stop_reason": {
                            "anyOf": [
                              {
                                "enum": [
                                  "end_turn",
                                  "max_tokens",
                                  "stop_sequence",
                                  "tool_use",
                                  "pause_turn",
                                  "compaction",
                                  "refusal",
                                  "model_context_window_exceeded"
                                ],
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "description": "The reason that we stopped.\n\nThis may be one the following values:\n* `\"end_turn\"`: the model reached a natural stopping point\n* `\"max_tokens\"`: we exceeded the requested `max_tokens` or the model's maximum\n* `\"stop_sequence\"`: one of your provided custom `stop_sequences` was generated\n* `\"tool_use\"`: the model invoked one or more tools\n* `\"pause_turn\"`: we paused a long-running turn. You may provide the response back as-is in a subsequent request to let the model continue.\n* `\"refusal\"`: when streaming classifiers intervene to handle potential policy violations\n\nIn non-streaming mode this value is always non-null. In streaming mode, it is null in the `message_start` event and non-null otherwise.",
                            "title": "Stop Reason"
                          },
                          "stop_sequence": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null,
                            "description": "Which custom stop sequence was generated, if any.\n\nThis value will be a non-null string if one of your custom stop sequences was generated.",
                            "title": "Stop Sequence"
                          },
                          "type": {
                            "const": "message",
                            "default": "message",
                            "description": "Object type.\n\nFor Messages, this is always `\"message\"`.",
                            "title": "Type",
                            "type": "string"
                          },
                          "usage": {
                            "description": "Billing and rate-limit usage.\n\nAnthropic's API bills and rate-limits by token counts, as tokens represent the underlying cost to our systems.\n\nUnder the hood, the API transforms requests into a format suitable for the model. The model's output then goes through a parsing stage before becoming an API response. As a result, the token counts in `usage` will not match one-to-one with the exact visible content of an API request or response.\n\nFor example, `output_tokens` will be non-zero, even for an empty string response from Claude.\n\nTotal input tokens in a request is the summation of `input_tokens`, `cache_creation_input_tokens`, and `cache_read_input_tokens`.",
                            "examples": [
                              {
                                "input_tokens": 2095,
                                "output_tokens": 503
                              }
                            ],
                            "properties": {
                              "cache_creation": {
                                "anyOf": [
                                  {
                                    "properties": {
                                      "ephemeral_1h_input_tokens": {
                                        "default": 0,
                                        "description": "The number of input tokens used to create the 1 hour cache entry.",
                                        "minimum": 0,
                                        "title": "Ephemeral 1H Input Tokens",
                                        "type": "integer"
                                      },
                                      "ephemeral_5m_input_tokens": {
                                        "default": 0,
                                        "description": "The number of input tokens used to create the 5 minute cache entry.",
                                        "minimum": 0,
                                        "title": "Ephemeral 5M Input Tokens",
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "ephemeral_1h_input_tokens",
                                      "ephemeral_5m_input_tokens"
                                    ],
                                    "title": "CacheCreation",
                                    "type": "object"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "Breakdown of cached tokens by TTL"
                              },
                              "cache_creation_input_tokens": {
                                "anyOf": [
                                  {
                                    "minimum": 0,
                                    "type": "integer"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "The number of input tokens used to create the cache entry.",
                                "examples": [
                                  2051
                                ],
                                "title": "Cache Creation Input Tokens"
                              },
                              "cache_read_input_tokens": {
                                "anyOf": [
                                  {
                                    "minimum": 0,
                                    "type": "integer"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "The number of input tokens read from the cache.",
                                "examples": [
                                  2051
                                ],
                                "title": "Cache Read Input Tokens"
                              },
                              "inference_geo": {
                                "anyOf": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "The geographic region where inference was performed for this request.",
                                "title": "Inference Geo"
                              },
                              "input_tokens": {
                                "description": "The number of input tokens which were used.",
                                "examples": [
                                  2095
                                ],
                                "minimum": 0,
                                "title": "Input Tokens",
                                "type": "integer"
                              },
                              "iterations": {
                                "anyOf": [
                                  {
                                    "items": {
                                      "anyOf": [
                                        {
                                          "description": "Token usage for a sampling iteration.",
                                          "properties": {
                                            "cache_creation": {
                                              "anyOf": [
                                                {
                                                  "properties": {
                                                    "ephemeral_1h_input_tokens": {
                                                      "default": 0,
                                                      "description": "The number of input tokens used to create the 1 hour cache entry.",
                                                      "minimum": 0,
                                                      "title": "Ephemeral 1H Input Tokens",
                                                      "type": "integer"
                                                    },
                                                    "ephemeral_5m_input_tokens": {
                                                      "default": 0,
                                                      "description": "The number of input tokens used to create the 5 minute cache entry.",
                                                      "minimum": 0,
                                                      "title": "Ephemeral 5M Input Tokens",
                                                      "type": "integer"
                                                    }
                                                  },
                                                  "required": [
                                                    "ephemeral_1h_input_tokens",
                                                    "ephemeral_5m_input_tokens"
                                                  ],
                                                  "title": "CacheCreation",
                                                  "type": "object"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "description": "Breakdown of cached tokens by TTL"
                                            },
                                            "cache_creation_input_tokens": {
                                              "default": 0,
                                              "description": "The number of input tokens used to create the cache entry.",
                                              "minimum": 0,
                                              "title": "Cache Creation Input Tokens",
                                              "type": "integer"
                                            },
                                            "cache_read_input_tokens": {
                                              "default": 0,
                                              "description": "The number of input tokens read from the cache.",
                                              "minimum": 0,
                                              "title": "Cache Read Input Tokens",
                                              "type": "integer"
                                            },
                                            "input_tokens": {
                                              "description": "The number of input tokens which were used.",
                                              "minimum": 0,
                                              "title": "Input Tokens",
                                              "type": "integer"
                                            },
                                            "output_tokens": {
                                              "description": "The number of output tokens which were used.",
                                              "minimum": 0,
                                              "title": "Output Tokens",
                                              "type": "integer"
                                            },
                                            "type": {
                                              "const": "message",
                                              "default": "message",
                                              "description": "Usage for a sampling iteration",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "cache_creation",
                                            "cache_creation_input_tokens",
                                            "cache_read_input_tokens",
                                            "input_tokens",
                                            "output_tokens",
                                            "type"
                                          ],
                                          "title": "MessageIterationUsage",
                                          "type": "object"
                                        },
                                        {
                                          "description": "Token usage for a compaction iteration.",
                                          "properties": {
                                            "cache_creation": {
                                              "anyOf": [
                                                {
                                                  "properties": {
                                                    "ephemeral_1h_input_tokens": {
                                                      "default": 0,
                                                      "description": "The number of input tokens used to create the 1 hour cache entry.",
                                                      "minimum": 0,
                                                      "title": "Ephemeral 1H Input Tokens",
                                                      "type": "integer"
                                                    },
                                                    "ephemeral_5m_input_tokens": {
                                                      "default": 0,
                                                      "description": "The number of input tokens used to create the 5 minute cache entry.",
                                                      "minimum": 0,
                                                      "title": "Ephemeral 5M Input Tokens",
                                                      "type": "integer"
                                                    }
                                                  },
                                                  "required": [
                                                    "ephemeral_1h_input_tokens",
                                                    "ephemeral_5m_input_tokens"
                                                  ],
                                                  "title": "CacheCreation",
                                                  "type": "object"
                                                },
                                                {
                                                  "type": "null"
                                                }
                                              ],
                                              "default": null,
                                              "description": "Breakdown of cached tokens by TTL"
                                            },
                                            "cache_creation_input_tokens": {
                                              "default": 0,
                                              "description": "The number of input tokens used to create the cache entry.",
                                              "minimum": 0,
                                              "title": "Cache Creation Input Tokens",
                                              "type": "integer"
                                            },
                                            "cache_read_input_tokens": {
                                              "default": 0,
                                              "description": "The number of input tokens read from the cache.",
                                              "minimum": 0,
                                              "title": "Cache Read Input Tokens",
                                              "type": "integer"
                                            },
                                            "input_tokens": {
                                              "description": "The number of input tokens which were used.",
                                              "minimum": 0,
                                              "title": "Input Tokens",
                                              "type": "integer"
                                            },
                                            "output_tokens": {
                                              "description": "The number of output tokens which were used.",
                                              "minimum": 0,
                                              "title": "Output Tokens",
                                              "type": "integer"
                                            },
                                            "type": {
                                              "const": "compaction",
                                              "default": "compaction",
                                              "description": "Usage for a compaction iteration",
                                              "title": "Type",
                                              "type": "string"
                                            }
                                          },
                                          "required": [
                                            "cache_creation",
                                            "cache_creation_input_tokens",
                                            "cache_read_input_tokens",
                                            "input_tokens",
                                            "output_tokens",
                                            "type"
                                          ],
                                          "title": "CompactionIterationUsage",
                                          "type": "object"
                                        }
                                      ]
                                    },
                                    "type": "array"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "Per-iteration token usage breakdown.\n\nEach entry represents one sampling iteration, with its own input/output token counts and cache statistics. This allows you to:\n- Determine which iterations exceeded long context thresholds (>=200k tokens)\n- Calculate the true context window size from the last iteration\n- Understand token accumulation across server-side tool use loops",
                                "title": "Iterations"
                              },
                              "output_tokens": {
                                "description": "The number of output tokens which were used.",
                                "examples": [
                                  503
                                ],
                                "minimum": 0,
                                "title": "Output Tokens",
                                "type": "integer"
                              },
                              "server_tool_use": {
                                "anyOf": [
                                  {
                                    "properties": {
                                      "web_fetch_requests": {
                                        "default": 0,
                                        "description": "The number of web fetch tool requests.",
                                        "examples": [
                                          2
                                        ],
                                        "minimum": 0,
                                        "title": "Web Fetch Requests",
                                        "type": "integer"
                                      },
                                      "web_search_requests": {
                                        "default": 0,
                                        "description": "The number of web search tool requests.",
                                        "examples": [
                                          0
                                        ],
                                        "minimum": 0,
                                        "title": "Web Search Requests",
                                        "type": "integer"
                                      }
                                    },
                                    "required": [
                                      "web_fetch_requests",
                                      "web_search_requests"
                                    ],
                                    "title": "ServerToolUsage",
                                    "type": "object"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "The number of server tool requests."
                              },
                              "service_tier": {
                                "anyOf": [
                                  {
                                    "enum": [
                                      "standard",
                                      "priority",
                                      "batch"
                                    ],
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "If the request used the priority, standard, or batch tier.",
                                "title": "Service Tier"
                              },
                              "speed": {
                                "anyOf": [
                                  {
                                    "enum": [
                                      "standard",
                                      "fast"
                                    ],
                                    "title": "Speed",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ],
                                "default": null,
                                "description": "The inference speed mode used for this request."
                              }
                            },
                            "required": [
                              "cache_creation",
                              "cache_creation_input_tokens",
                              "cache_read_input_tokens",
                              "inference_geo",
                              "input_tokens",
                              "iterations",
                              "output_tokens",
                              "server_tool_use",
                              "service_tier",
                              "speed"
                            ],
                            "title": "Usage",
                            "type": "object"
                          }
                        },
                        "required": [
                          "id",
                          "type",
                          "role",
                          "content",
                          "model",
                          "stop_reason",
                          "stop_sequence",
                          "usage",
                          "context_management",
                          "container"
                        ],
                        "title": "Message",
                        "type": "object"
                      },
                      "type": {
                        "const": "succeeded",
                        "default": "succeeded",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "SucceededResult",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "error": {
                        "properties": {
                          "error": {
                            "discriminator": {
                              "mapping": {
                                "api_error": "#/components/schemas/BetaAPIError",
                                "authentication_error": "#/components/schemas/BetaAuthenticationError",
                                "billing_error": "#/components/schemas/BetaBillingError",
                                "invalid_request_error": "#/components/schemas/BetaInvalidRequestError",
                                "not_found_error": "#/components/schemas/BetaNotFoundError",
                                "overloaded_error": "#/components/schemas/BetaOverloadedError",
                                "permission_error": "#/components/schemas/BetaPermissionError",
                                "rate_limit_error": "#/components/schemas/BetaRateLimitError",
                                "timeout_error": "#/components/schemas/BetaGatewayTimeoutError"
                              },
                              "propertyName": "type"
                            },
                            "oneOf": [
                              {
                                "properties": {
                                  "message": {
                                    "default": "Invalid request",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "invalid_request_error",
                                    "default": "invalid_request_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "InvalidRequestError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Authentication error",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "authentication_error",
                                    "default": "authentication_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "AuthenticationError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Billing error",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "billing_error",
                                    "default": "billing_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "BillingError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Permission denied",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "permission_error",
                                    "default": "permission_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "PermissionError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Not found",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "not_found_error",
                                    "default": "not_found_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "NotFoundError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Rate limited",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "rate_limit_error",
                                    "default": "rate_limit_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "RateLimitError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Request timeout",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "timeout_error",
                                    "default": "timeout_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "GatewayTimeoutError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Internal server error",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "api_error",
                                    "default": "api_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "APIError",
                                "type": "object"
                              },
                              {
                                "properties": {
                                  "message": {
                                    "default": "Overloaded",
                                    "title": "Message",
                                    "type": "string"
                                  },
                                  "type": {
                                    "const": "overloaded_error",
                                    "default": "overloaded_error",
                                    "title": "Type",
                                    "type": "string"
                                  }
                                },
                                "required": [
                                  "message",
                                  "type"
                                ],
                                "title": "OverloadedError",
                                "type": "object"
                              }
                            ],
                            "title": "Error"
                          },
                          "request_id": {
                            "anyOf": [
                              {
                                "type": "string"
                              },
                              {
                                "type": "null"
                              }
                            ],
                            "default": null,
                            "title": "Request Id"
                          },
                          "type": {
                            "const": "error",
                            "default": "error",
                            "title": "Type",
                            "type": "string"
                          }
                        },
                        "required": [
                          "error",
                          "request_id",
                          "type"
                        ],
                        "title": "ErrorResponse",
                        "type": "object"
                      },
                      "type": {
                        "const": "errored",
                        "default": "errored",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "error",
                      "type"
                    ],
                    "title": "ErroredResult",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "type": {
                        "const": "canceled",
                        "default": "canceled",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "type"
                    ],
                    "title": "CanceledResult",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "type": {
                        "const": "expired",
                        "default": "expired",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "type"
                    ],
                    "title": "ExpiredResult",
                    "type": "object"
                  }
                ],
                "title": "Result"
              }
            },
            "required": [
              "custom_id",
              "result"
            ],
            "title": "MessageBatchIndividualResponse",
            "type": "object"
          }
        }
      },
      "description": "Successful Response"
    },
    "4XX": {
      "content": {
        "application/json": {
          "schema": {
            "properties": {
              "error": {
                "discriminator": {
                  "mapping": {
                    "api_error": "#/components/schemas/BetaAPIError",
                    "authentication_error": "#/components/schemas/BetaAuthenticationError",
                    "billing_error": "#/components/schemas/BetaBillingError",
                    "invalid_request_error": "#/components/schemas/BetaInvalidRequestError",
                    "not_found_error": "#/components/schemas/BetaNotFoundError",
                    "overloaded_error": "#/components/schemas/BetaOverloadedError",
                    "permission_error": "#/components/schemas/BetaPermissionError",
                    "rate_limit_error": "#/components/schemas/BetaRateLimitError",
                    "timeout_error": "#/components/schemas/BetaGatewayTimeoutError"
                  },
                  "propertyName": "type"
                },
                "oneOf": [
                  {
                    "properties": {
                      "message": {
                        "default": "Invalid request",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "invalid_request_error",
                        "default": "invalid_request_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "InvalidRequestError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Authentication error",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "authentication_error",
                        "default": "authentication_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "AuthenticationError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Billing error",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "billing_error",
                        "default": "billing_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "BillingError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Permission denied",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "permission_error",
                        "default": "permission_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "PermissionError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Not found",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "not_found_error",
                        "default": "not_found_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "NotFoundError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Rate limited",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "rate_limit_error",
                        "default": "rate_limit_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "RateLimitError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Request timeout",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "timeout_error",
                        "default": "timeout_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "GatewayTimeoutError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Internal server error",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "api_error",
                        "default": "api_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "APIError",
                    "type": "object"
                  },
                  {
                    "properties": {
                      "message": {
                        "default": "Overloaded",
                        "title": "Message",
                        "type": "string"
                      },
                      "type": {
                        "const": "overloaded_error",
                        "default": "overloaded_error",
                        "title": "Type",
                        "type": "string"
                      }
                    },
                    "required": [
                      "message",
                      "type"
                    ],
                    "title": "OverloadedError",
                    "type": "object"
                  }
                ],
                "title": "Error"
              },
              "request_id": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ],
                "default": null,
                "title": "Request Id"
              },
              "type": {
                "const": "error",
                "default": "error",
                "title": "Type",
                "type": "string"
              }
            },
            "required": [
              "error",
              "request_id",
              "type"
            ],
            "title": "ErrorResponse",
            "type": "object"
          }
        }
      },
      "description": "Error response.\n\nSee our [errors documentation](https://docs.claude.com/en/api/errors) for more details."
    }
  },
  "summary": "Retrieve Message Batch results"
}

{
  "description": "Get moderations usage details for the organization.",
  "operationId": "usage-moderations",
  "parameters": [
    {
      "description": "Start time (Unix seconds) of the query time range, inclusive.",
      "in": "query",
      "name": "start_time",
      "required": true,
      "schema": {
        "type": "integer"
      }
    },
    {
      "description": "End time (Unix seconds) of the query time range, exclusive.",
      "in": "query",
      "name": "end_time",
      "required": false,
      "schema": {
        "type": "integer"
      }
    },
    {
      "description": "Width of each time bucket in response. Currently `1m`, `1h` and `1d` are supported, default to `1d`.",
      "in": "query",
      "name": "bucket_width",
      "required": false,
      "schema": {
        "default": "1d",
        "enum": [
          "1m",
          "1h",
          "1d"
        ],
        "type": "string"
      }
    },
    {
      "description": "Return only usage for these projects.",
      "in": "query",
      "name": "project_ids",
      "required": false,
      "schema": {
        "items": {
          "type": "string"
        },
        "type": "array"
      }
    },
    {
      "description": "Return only usage for these users.",
      "in": "query",
      "name": "user_ids",
      "required": false,
      "schema": {
        "items": {
          "type": "string"
        },
        "type": "array"
      }
    },
    {
      "description": "Return only usage for these API keys.",
      "in": "query",
      "name": "api_key_ids",
      "required": false,
      "schema": {
        "items": {
          "type": "string"
        },
        "type": "array"
      }
    },
    {
      "description": "Return only usage for these models.",
      "in": "query",
      "name": "models",
      "required": false,
      "schema": {
        "items": {
          "type": "string"
        },
        "type": "array"
      }
    },
    {
      "description": "Group the usage data by the specified fields. Support fields include `project_id`, `user_id`, `api_key_id`, `model` or any combination of them.",
      "in": "query",
      "name": "group_by",
      "required": false,
      "schema": {
        "items": {
          "enum": [
            "project_id",
            "user_id",
            "api_key_id",
            "model"
          ],
          "type": "string"
        },
        "type": "array"
      }
    },
    {
      "description": "Specifies the number of buckets to return.\n- `bucket_width=1d`: default: 7, max: 31\n- `bucket_width=1h`: default: 24, max: 168\n- `bucket_width=1m`: default: 60, max: 1440\n",
      "in": "query",
      "name": "limit",
      "required": false,
      "schema": {
        "type": "integer"
      }
    },
    {
      "description": "A cursor for use in pagination. Corresponding to the `next_page` field from the previous response.",
      "in": "query",
      "name": "page",
      "schema": {
        "type": "string"
      }
    }
  ],
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "properties": {
              "data": {
                "items": {
                  "properties": {
                    "end_time": {
                      "type": "integer"
                    },
                    "object": {
                      "enum": [
                        "bucket"
                      ],
                      "type": "string"
                    },
                    "result": {
                      "items": {
                        "anyOf": [
                          {
                            "description": "The aggregated completions usage details of the specific time bucket.",
                            "properties": {
                              "api_key_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=api_key_id`, this field provides the API key ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "batch": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=batch`, this field tells whether the grouped usage result is batch or not.",
                                    "type": "boolean"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "input_audio_tokens": {
                                "description": "The aggregated number of audio input tokens used, including cached tokens.",
                                "type": "integer"
                              },
                              "input_cached_tokens": {
                                "description": "The aggregated number of text input tokens that has been cached from previous requests. For customers subscribe to scale tier, this includes scale tier tokens.",
                                "type": "integer"
                              },
                              "input_tokens": {
                                "description": "The aggregated number of text input tokens used, including cached tokens. For customers subscribe to scale tier, this includes scale tier tokens.",
                                "type": "integer"
                              },
                              "model": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=model`, this field provides the model name of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "num_model_requests": {
                                "description": "The count of requests made to the model.",
                                "type": "integer"
                              },
                              "object": {
                                "enum": [
                                  "organization.usage.completions.result"
                                ],
                                "type": "string"
                              },
                              "output_audio_tokens": {
                                "description": "The aggregated number of audio output tokens used.",
                                "type": "integer"
                              },
                              "output_tokens": {
                                "description": "The aggregated number of text output tokens used. For customers subscribe to scale tier, this includes scale tier tokens.",
                                "type": "integer"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "service_tier": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=service_tier`, this field provides the service tier of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "user_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=user_id`, this field provides the user ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object",
                              "input_tokens",
                              "output_tokens",
                              "num_model_requests"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated embeddings usage details of the specific time bucket.",
                            "properties": {
                              "api_key_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=api_key_id`, this field provides the API key ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "input_tokens": {
                                "description": "The aggregated number of input tokens used.",
                                "type": "integer"
                              },
                              "model": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=model`, this field provides the model name of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "num_model_requests": {
                                "description": "The count of requests made to the model.",
                                "type": "integer"
                              },
                              "object": {
                                "enum": [
                                  "organization.usage.embeddings.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "user_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=user_id`, this field provides the user ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object",
                              "input_tokens",
                              "num_model_requests"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated moderations usage details of the specific time bucket.",
                            "properties": {
                              "api_key_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=api_key_id`, this field provides the API key ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "input_tokens": {
                                "description": "The aggregated number of input tokens used.",
                                "type": "integer"
                              },
                              "model": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=model`, this field provides the model name of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "num_model_requests": {
                                "description": "The count of requests made to the model.",
                                "type": "integer"
                              },
                              "object": {
                                "enum": [
                                  "organization.usage.moderations.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "user_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=user_id`, this field provides the user ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object",
                              "input_tokens",
                              "num_model_requests"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated images usage details of the specific time bucket.",
                            "properties": {
                              "api_key_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=api_key_id`, this field provides the API key ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "images": {
                                "description": "The number of images processed.",
                                "type": "integer"
                              },
                              "model": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=model`, this field provides the model name of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "num_model_requests": {
                                "description": "The count of requests made to the model.",
                                "type": "integer"
                              },
                              "object": {
                                "enum": [
                                  "organization.usage.images.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "size": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=size`, this field provides the image size of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "source": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=source`, this field provides the source of the grouped usage result, possible values are `image.generation`, `image.edit`, `image.variation`.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "user_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=user_id`, this field provides the user ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object",
                              "images",
                              "num_model_requests"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated audio speeches usage details of the specific time bucket.",
                            "properties": {
                              "api_key_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=api_key_id`, this field provides the API key ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "characters": {
                                "description": "The number of characters processed.",
                                "type": "integer"
                              },
                              "model": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=model`, this field provides the model name of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "num_model_requests": {
                                "description": "The count of requests made to the model.",
                                "type": "integer"
                              },
                              "object": {
                                "enum": [
                                  "organization.usage.audio_speeches.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "user_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=user_id`, this field provides the user ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object",
                              "characters",
                              "num_model_requests"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated audio transcriptions usage details of the specific time bucket.",
                            "properties": {
                              "api_key_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=api_key_id`, this field provides the API key ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "model": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=model`, this field provides the model name of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "num_model_requests": {
                                "description": "The count of requests made to the model.",
                                "type": "integer"
                              },
                              "object": {
                                "enum": [
                                  "organization.usage.audio_transcriptions.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "seconds": {
                                "description": "The number of seconds processed.",
                                "type": "integer"
                              },
                              "user_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=user_id`, this field provides the user ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object",
                              "seconds",
                              "num_model_requests"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated vector stores usage details of the specific time bucket.",
                            "properties": {
                              "object": {
                                "enum": [
                                  "organization.usage.vector_stores.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "usage_bytes": {
                                "description": "The vector stores usage in bytes.",
                                "type": "integer"
                              }
                            },
                            "required": [
                              "object",
                              "usage_bytes"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated code interpreter sessions usage details of the specific time bucket.",
                            "properties": {
                              "num_sessions": {
                                "description": "The number of code interpreter sessions.",
                                "type": "integer"
                              },
                              "object": {
                                "enum": [
                                  "organization.usage.code_interpreter_sessions.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped usage result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object",
                              "sessions"
                            ],
                            "type": "object"
                          },
                          {
                            "description": "The aggregated costs details of the specific time bucket.",
                            "properties": {
                              "amount": {
                                "description": "The monetary value in its associated currency.",
                                "properties": {
                                  "currency": {
                                    "description": "Lowercase ISO-4217 currency e.g. \"usd\"",
                                    "type": "string"
                                  },
                                  "value": {
                                    "description": "The numeric value of the cost.",
                                    "type": "number"
                                  }
                                },
                                "type": "object"
                              },
                              "line_item": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=line_item`, this field provides the line item of the grouped costs result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              },
                              "object": {
                                "enum": [
                                  "organization.costs.result"
                                ],
                                "type": "string"
                              },
                              "project_id": {
                                "anyOf": [
                                  {
                                    "description": "When `group_by=project_id`, this field provides the project ID of the grouped costs result.",
                                    "type": "string"
                                  },
                                  {
                                    "type": "null"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "object"
                            ],
                            "type": "object"
                          }
                        ],
                        "discriminator": {
                          "propertyName": "object"
                        }
                      },
                      "type": "array"
                    },
                    "start_time": {
                      "type": "integer"
                    }
                  },
                  "required": [
                    "object",
                    "start_time",
                    "end_time",
                    "result"
                  ],
                  "type": "object"
                },
                "type": "array"
              },
              "has_more": {
                "type": "boolean"
              },
              "next_page": {
                "type": "string"
              },
              "object": {
                "enum": [
                  "page"
                ],
                "type": "string"
              }
            },
            "required": [
              "object",
              "data",
              "has_more",
              "next_page"
            ],
            "type": "object"
          }
        }
      },
      "description": "Usage data retrieved successfully."
    }
  },
  "summary": "Moderations",
  "tags": [
    "Usage"
  ]
}

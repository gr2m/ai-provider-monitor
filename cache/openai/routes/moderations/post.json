{
  "operationId": "createModeration",
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "$ref": "#/components/schemas/CreateModerationRequest"
        }
      }
    },
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/CreateModerationResponse"
          }
        }
      },
      "description": "OK"
    }
  },
  "summary": "Classifies if text and/or image inputs are potentially harmful. Learn\nmore in the [moderation guide](/docs/guides/moderation).\n",
  "tags": [
    "Moderations"
  ],
  "components": {
    "schemas": {
      "CreateModerationRequest": {
        "properties": {
          "input": {
            "description": "Input (or inputs) to classify. Can be a single string, an array of strings, or\nan array of multi-modal input objects similar to other models.\n",
            "oneOf": [
              {
                "default": "",
                "description": "A string of text to classify for moderation.",
                "example": "I want to kill them.",
                "type": "string"
              },
              {
                "description": "An array of strings to classify for moderation.",
                "items": {
                  "default": "",
                  "example": "I want to kill them.",
                  "type": "string"
                },
                "type": "array"
              },
              {
                "description": "An array of multi-modal inputs to the moderation model.",
                "items": {
                  "oneOf": [
                    {
                      "description": "An object describing an image to classify.",
                      "properties": {
                        "image_url": {
                          "description": "Contains either an image URL or a data URL for a base64 encoded image.",
                          "properties": {
                            "url": {
                              "description": "Either a URL of the image or the base64 encoded image data.",
                              "example": "https://example.com/image.jpg",
                              "format": "uri",
                              "type": "string"
                            }
                          },
                          "required": [
                            "url"
                          ],
                          "type": "object"
                        },
                        "type": {
                          "description": "Always `image_url`.",
                          "enum": [
                            "image_url"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "type",
                        "image_url"
                      ],
                      "type": "object"
                    },
                    {
                      "description": "An object describing text to classify.",
                      "properties": {
                        "text": {
                          "description": "A string of text to classify.",
                          "example": "I want to kill them",
                          "type": "string"
                        },
                        "type": {
                          "description": "Always `text`.",
                          "enum": [
                            "text"
                          ],
                          "type": "string"
                        }
                      },
                      "required": [
                        "type",
                        "text"
                      ],
                      "type": "object"
                    }
                  ]
                },
                "type": "array"
              }
            ]
          },
          "model": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "enum": [
                  "omni-moderation-latest",
                  "omni-moderation-2024-09-26",
                  "text-moderation-latest",
                  "text-moderation-stable"
                ],
                "type": "string"
              }
            ],
            "default": "omni-moderation-latest",
            "description": "The content moderation model you would like to use. Learn more in\n[the moderation guide](/docs/guides/moderation), and learn about\navailable models [here](/docs/models#moderation).\n",
            "example": "omni-moderation-2024-09-26",
            "nullable": false
          }
        },
        "required": [
          "input"
        ],
        "type": "object"
      },
      "CreateModerationResponse": {
        "description": "Represents if a given text input is potentially harmful.",
        "properties": {
          "id": {
            "description": "The unique identifier for the moderation request.",
            "type": "string"
          },
          "model": {
            "description": "The model used to generate the moderation results.",
            "type": "string"
          },
          "results": {
            "description": "A list of moderation objects.",
            "items": {
              "properties": {
                "categories": {
                  "description": "A list of the categories, and whether they are flagged or not.",
                  "properties": {
                    "harassment": {
                      "description": "Content that expresses, incites, or promotes harassing language towards any target.",
                      "type": "boolean"
                    },
                    "harassment/threatening": {
                      "description": "Harassment content that also includes violence or serious harm towards any target.",
                      "type": "boolean"
                    },
                    "hate": {
                      "description": "Content that expresses, incites, or promotes hate based on race, gender, ethnicity, religion, nationality, sexual orientation, disability status, or caste. Hateful content aimed at non-protected groups (e.g., chess players) is harassment.",
                      "type": "boolean"
                    },
                    "hate/threatening": {
                      "description": "Hateful content that also includes violence or serious harm towards the targeted group based on race, gender, ethnicity, religion, nationality, sexual orientation, disability status, or caste.",
                      "type": "boolean"
                    },
                    "illicit": {
                      "anyOf": [
                        {
                          "description": "Content that includes instructions or advice that facilitate the planning or execution of wrongdoing, or that gives advice or instruction on how to commit illicit acts. For example, \"how to shoplift\" would fit this category.",
                          "type": "boolean"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "illicit/violent": {
                      "anyOf": [
                        {
                          "description": "Content that includes instructions or advice that facilitate the planning or execution of wrongdoing that also includes violence, or that gives advice or instruction on the procurement of any weapon.",
                          "type": "boolean"
                        },
                        {
                          "type": "null"
                        }
                      ]
                    },
                    "self-harm": {
                      "description": "Content that promotes, encourages, or depicts acts of self-harm, such as suicide, cutting, and eating disorders.",
                      "type": "boolean"
                    },
                    "self-harm/instructions": {
                      "description": "Content that encourages performing acts of self-harm, such as suicide, cutting, and eating disorders, or that gives instructions or advice on how to commit such acts.",
                      "type": "boolean"
                    },
                    "self-harm/intent": {
                      "description": "Content where the speaker expresses that they are engaging or intend to engage in acts of self-harm, such as suicide, cutting, and eating disorders.",
                      "type": "boolean"
                    },
                    "sexual": {
                      "description": "Content meant to arouse sexual excitement, such as the description of sexual activity, or that promotes sexual services (excluding sex education and wellness).",
                      "type": "boolean"
                    },
                    "sexual/minors": {
                      "description": "Sexual content that includes an individual who is under 18 years old.",
                      "type": "boolean"
                    },
                    "violence": {
                      "description": "Content that depicts death, violence, or physical injury.",
                      "type": "boolean"
                    },
                    "violence/graphic": {
                      "description": "Content that depicts death, violence, or physical injury in graphic detail.",
                      "type": "boolean"
                    }
                  },
                  "required": [
                    "hate",
                    "hate/threatening",
                    "harassment",
                    "harassment/threatening",
                    "illicit",
                    "illicit/violent",
                    "self-harm",
                    "self-harm/intent",
                    "self-harm/instructions",
                    "sexual",
                    "sexual/minors",
                    "violence",
                    "violence/graphic"
                  ],
                  "type": "object"
                },
                "category_applied_input_types": {
                  "description": "A list of the categories along with the input type(s) that the score applies to.",
                  "properties": {
                    "harassment": {
                      "description": "The applied input type(s) for the category 'harassment'.",
                      "items": {
                        "enum": [
                          "text"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "harassment/threatening": {
                      "description": "The applied input type(s) for the category 'harassment/threatening'.",
                      "items": {
                        "enum": [
                          "text"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "hate": {
                      "description": "The applied input type(s) for the category 'hate'.",
                      "items": {
                        "enum": [
                          "text"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "hate/threatening": {
                      "description": "The applied input type(s) for the category 'hate/threatening'.",
                      "items": {
                        "enum": [
                          "text"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "illicit": {
                      "description": "The applied input type(s) for the category 'illicit'.",
                      "items": {
                        "enum": [
                          "text"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "illicit/violent": {
                      "description": "The applied input type(s) for the category 'illicit/violent'.",
                      "items": {
                        "enum": [
                          "text"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "self-harm": {
                      "description": "The applied input type(s) for the category 'self-harm'.",
                      "items": {
                        "enum": [
                          "text",
                          "image"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "self-harm/instructions": {
                      "description": "The applied input type(s) for the category 'self-harm/instructions'.",
                      "items": {
                        "enum": [
                          "text",
                          "image"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "self-harm/intent": {
                      "description": "The applied input type(s) for the category 'self-harm/intent'.",
                      "items": {
                        "enum": [
                          "text",
                          "image"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "sexual": {
                      "description": "The applied input type(s) for the category 'sexual'.",
                      "items": {
                        "enum": [
                          "text",
                          "image"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "sexual/minors": {
                      "description": "The applied input type(s) for the category 'sexual/minors'.",
                      "items": {
                        "enum": [
                          "text"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "violence": {
                      "description": "The applied input type(s) for the category 'violence'.",
                      "items": {
                        "enum": [
                          "text",
                          "image"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    },
                    "violence/graphic": {
                      "description": "The applied input type(s) for the category 'violence/graphic'.",
                      "items": {
                        "enum": [
                          "text",
                          "image"
                        ],
                        "type": "string"
                      },
                      "type": "array"
                    }
                  },
                  "required": [
                    "hate",
                    "hate/threatening",
                    "harassment",
                    "harassment/threatening",
                    "illicit",
                    "illicit/violent",
                    "self-harm",
                    "self-harm/intent",
                    "self-harm/instructions",
                    "sexual",
                    "sexual/minors",
                    "violence",
                    "violence/graphic"
                  ],
                  "type": "object"
                },
                "category_scores": {
                  "description": "A list of the categories along with their scores as predicted by model.",
                  "properties": {
                    "harassment": {
                      "description": "The score for the category 'harassment'.",
                      "type": "number"
                    },
                    "harassment/threatening": {
                      "description": "The score for the category 'harassment/threatening'.",
                      "type": "number"
                    },
                    "hate": {
                      "description": "The score for the category 'hate'.",
                      "type": "number"
                    },
                    "hate/threatening": {
                      "description": "The score for the category 'hate/threatening'.",
                      "type": "number"
                    },
                    "illicit": {
                      "description": "The score for the category 'illicit'.",
                      "type": "number"
                    },
                    "illicit/violent": {
                      "description": "The score for the category 'illicit/violent'.",
                      "type": "number"
                    },
                    "self-harm": {
                      "description": "The score for the category 'self-harm'.",
                      "type": "number"
                    },
                    "self-harm/instructions": {
                      "description": "The score for the category 'self-harm/instructions'.",
                      "type": "number"
                    },
                    "self-harm/intent": {
                      "description": "The score for the category 'self-harm/intent'.",
                      "type": "number"
                    },
                    "sexual": {
                      "description": "The score for the category 'sexual'.",
                      "type": "number"
                    },
                    "sexual/minors": {
                      "description": "The score for the category 'sexual/minors'.",
                      "type": "number"
                    },
                    "violence": {
                      "description": "The score for the category 'violence'.",
                      "type": "number"
                    },
                    "violence/graphic": {
                      "description": "The score for the category 'violence/graphic'.",
                      "type": "number"
                    }
                  },
                  "required": [
                    "hate",
                    "hate/threatening",
                    "harassment",
                    "harassment/threatening",
                    "illicit",
                    "illicit/violent",
                    "self-harm",
                    "self-harm/intent",
                    "self-harm/instructions",
                    "sexual",
                    "sexual/minors",
                    "violence",
                    "violence/graphic"
                  ],
                  "type": "object"
                },
                "flagged": {
                  "description": "Whether any of the below categories are flagged.",
                  "type": "boolean"
                }
              },
              "required": [
                "flagged",
                "categories",
                "category_scores",
                "category_applied_input_types"
              ],
              "type": "object"
            },
            "type": "array"
          }
        },
        "required": [
          "id",
          "model",
          "results"
        ],
        "type": "object"
      }
    }
  }
}

{
  "operationId": "runGrader",
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "$ref": "#/components/schemas/RunGraderRequest"
        }
      }
    },
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/RunGraderResponse"
          }
        }
      },
      "description": "OK"
    }
  },
  "summary": "Run a grader.\n",
  "tags": [
    "Fine-tuning"
  ],
  "components": {
    "schemas": {
      "RunGraderRequest": {
        "properties": {
          "grader": {
            "description": "The grader used for the fine-tuning job.",
            "oneOf": [
              {
                "$ref": "#/components/schemas/GraderStringCheck"
              },
              {
                "$ref": "#/components/schemas/GraderTextSimilarity"
              },
              {
                "$ref": "#/components/schemas/GraderPython"
              },
              {
                "$ref": "#/components/schemas/GraderScoreModel"
              },
              {
                "$ref": "#/components/schemas/GraderMulti"
              }
            ],
            "type": "object"
          },
          "item": {
            "description": "The dataset item provided to the grader. This will be used to populate \nthe `item` namespace. See [the guide](/docs/guides/graders) for more details. \n",
            "type": "object"
          },
          "model_sample": {
            "description": "The model sample to be evaluated. This value will be used to populate \nthe `sample` namespace. See [the guide](/docs/guides/graders) for more details.\nThe `output_json` variable will be populated if the model sample is a \nvalid JSON string.\n \n",
            "type": "string"
          }
        },
        "required": [
          "grader",
          "model_sample"
        ],
        "title": "RunGraderRequest",
        "type": "object"
      },
      "RunGraderResponse": {
        "properties": {
          "metadata": {
            "properties": {
              "errors": {
                "properties": {
                  "formula_parse_error": {
                    "type": "boolean"
                  },
                  "invalid_variable_error": {
                    "type": "boolean"
                  },
                  "model_grader_parse_error": {
                    "type": "boolean"
                  },
                  "model_grader_refusal_error": {
                    "type": "boolean"
                  },
                  "model_grader_server_error": {
                    "type": "boolean"
                  },
                  "model_grader_server_error_details": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "other_error": {
                    "type": "boolean"
                  },
                  "python_grader_runtime_error": {
                    "type": "boolean"
                  },
                  "python_grader_runtime_error_details": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "python_grader_server_error": {
                    "type": "boolean"
                  },
                  "python_grader_server_error_type": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "sample_parse_error": {
                    "type": "boolean"
                  },
                  "truncated_observation_error": {
                    "type": "boolean"
                  },
                  "unresponsive_reward_error": {
                    "type": "boolean"
                  }
                },
                "required": [
                  "formula_parse_error",
                  "sample_parse_error",
                  "truncated_observation_error",
                  "unresponsive_reward_error",
                  "invalid_variable_error",
                  "other_error",
                  "python_grader_server_error",
                  "python_grader_server_error_type",
                  "python_grader_runtime_error",
                  "python_grader_runtime_error_details",
                  "model_grader_server_error",
                  "model_grader_refusal_error",
                  "model_grader_parse_error",
                  "model_grader_server_error_details"
                ],
                "type": "object"
              },
              "execution_time": {
                "type": "number"
              },
              "name": {
                "type": "string"
              },
              "sampled_model_name": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "scores": {
                "additionalProperties": {},
                "type": "object"
              },
              "token_usage": {
                "anyOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "type": {
                "type": "string"
              }
            },
            "required": [
              "name",
              "type",
              "errors",
              "execution_time",
              "scores",
              "token_usage",
              "sampled_model_name"
            ],
            "type": "object"
          },
          "model_grader_token_usage_per_model": {
            "additionalProperties": {},
            "type": "object"
          },
          "reward": {
            "type": "number"
          },
          "sub_rewards": {
            "additionalProperties": {},
            "type": "object"
          }
        },
        "required": [
          "reward",
          "metadata",
          "sub_rewards",
          "model_grader_token_usage_per_model"
        ],
        "type": "object"
      },
      "GraderStringCheck": {
        "description": "A StringCheckGrader object that performs a string comparison between input and reference using a specified operation.\n",
        "properties": {
          "input": {
            "description": "The input text. This may include template strings.",
            "type": "string"
          },
          "name": {
            "description": "The name of the grader.",
            "type": "string"
          },
          "operation": {
            "description": "The string check operation to perform. One of `eq`, `ne`, `like`, or `ilike`.",
            "enum": [
              "eq",
              "ne",
              "like",
              "ilike"
            ],
            "type": "string"
          },
          "reference": {
            "description": "The reference text. This may include template strings.",
            "type": "string"
          },
          "type": {
            "description": "The object type, which is always `string_check`.",
            "enum": [
              "string_check"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "name",
          "input",
          "reference",
          "operation"
        ],
        "title": "StringCheckGrader",
        "type": "object"
      },
      "GraderTextSimilarity": {
        "description": "A TextSimilarityGrader object which grades text based on similarity metrics.\n",
        "properties": {
          "evaluation_metric": {
            "description": "The evaluation metric to use. One of `cosine`, `fuzzy_match`, `bleu`, \n`gleu`, `meteor`, `rouge_1`, `rouge_2`, `rouge_3`, `rouge_4`, `rouge_5`, \nor `rouge_l`.\n",
            "enum": [
              "cosine",
              "fuzzy_match",
              "bleu",
              "gleu",
              "meteor",
              "rouge_1",
              "rouge_2",
              "rouge_3",
              "rouge_4",
              "rouge_5",
              "rouge_l"
            ],
            "type": "string"
          },
          "input": {
            "description": "The text being graded.",
            "type": "string"
          },
          "name": {
            "description": "The name of the grader.",
            "type": "string"
          },
          "reference": {
            "description": "The text being graded against.",
            "type": "string"
          },
          "type": {
            "default": "text_similarity",
            "description": "The type of grader.",
            "enum": [
              "text_similarity"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "name",
          "input",
          "reference",
          "evaluation_metric"
        ],
        "title": "TextSimilarityGrader",
        "type": "object"
      },
      "GraderPython": {
        "description": "A PythonGrader object that runs a python script on the input.\n",
        "properties": {
          "image_tag": {
            "description": "The image tag to use for the python script.",
            "type": "string"
          },
          "name": {
            "description": "The name of the grader.",
            "type": "string"
          },
          "source": {
            "description": "The source code of the python script.",
            "type": "string"
          },
          "type": {
            "description": "The object type, which is always `python`.",
            "enum": [
              "python"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "name",
          "source"
        ],
        "title": "PythonGrader",
        "type": "object"
      },
      "GraderScoreModel": {
        "description": "A ScoreModelGrader object that uses a model to assign a score to the input.\n",
        "properties": {
          "input": {
            "description": "The input messages evaluated by the grader. Supports text, output text, input image, and input audio content blocks, and may include template strings.\n",
            "items": {
              "$ref": "#/components/schemas/EvalItem"
            },
            "type": "array"
          },
          "model": {
            "description": "The model to use for the evaluation.",
            "type": "string"
          },
          "name": {
            "description": "The name of the grader.",
            "type": "string"
          },
          "range": {
            "description": "The range of the score. Defaults to `[0, 1]`.",
            "items": {
              "max_items": 2,
              "min_items": 2,
              "type": "number"
            },
            "type": "array"
          },
          "sampling_params": {
            "description": "The sampling parameters for the model.",
            "properties": {
              "max_completions_tokens": {
                "anyOf": [
                  {
                    "description": "The maximum number of tokens the grader model may generate in its response.\n",
                    "minimum": 1,
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "reasoning_effort": {
                "$ref": "#/components/schemas/ReasoningEffort"
              },
              "seed": {
                "anyOf": [
                  {
                    "description": "A seed value to initialize the randomness, during sampling.\n",
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "temperature": {
                "anyOf": [
                  {
                    "description": "A higher temperature increases randomness in the outputs.\n",
                    "type": "number"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "top_p": {
                "anyOf": [
                  {
                    "default": 1,
                    "description": "An alternative to temperature for nucleus sampling; 1.0 includes all tokens.\n",
                    "example": 1,
                    "type": "number"
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            },
            "type": "object"
          },
          "type": {
            "description": "The object type, which is always `score_model`.",
            "enum": [
              "score_model"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "name",
          "input",
          "model"
        ],
        "title": "ScoreModelGrader",
        "type": "object"
      },
      "GraderMulti": {
        "description": "A MultiGrader object combines the output of multiple graders to produce a single score.",
        "properties": {
          "calculate_output": {
            "description": "A formula to calculate the output based on grader results.",
            "type": "string"
          },
          "graders": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/GraderStringCheck"
              },
              {
                "$ref": "#/components/schemas/GraderTextSimilarity"
              },
              {
                "$ref": "#/components/schemas/GraderPython"
              },
              {
                "$ref": "#/components/schemas/GraderScoreModel"
              },
              {
                "$ref": "#/components/schemas/GraderLabelModel"
              }
            ]
          },
          "name": {
            "description": "The name of the grader.",
            "type": "string"
          },
          "type": {
            "default": "multi",
            "description": "The object type, which is always `multi`.",
            "enum": [
              "multi"
            ],
            "type": "string"
          }
        },
        "required": [
          "name",
          "type",
          "graders",
          "calculate_output"
        ],
        "title": "MultiGrader",
        "type": "object"
      },
      "EvalItem": {
        "description": "A message input to the model with a role indicating instruction following\nhierarchy. Instructions given with the `developer` or `system` role take\nprecedence over instructions given with the `user` role. Messages with the\n`assistant` role are presumed to have been generated by the model in previous\ninteractions.\n",
        "properties": {
          "content": {
            "$ref": "#/components/schemas/EvalItemContent"
          },
          "role": {
            "description": "The role of the message input. One of `user`, `assistant`, `system`, or\n`developer`.\n",
            "enum": [
              "user",
              "assistant",
              "system",
              "developer"
            ],
            "type": "string"
          },
          "type": {
            "description": "The type of the message input. Always `message`.\n",
            "enum": [
              "message"
            ],
            "type": "string"
          }
        },
        "required": [
          "role",
          "content"
        ],
        "title": "Eval message object",
        "type": "object"
      },
      "ReasoningEffort": {
        "anyOf": [
          {
            "default": "medium",
            "description": "Constrains effort on reasoning for\n[reasoning models](https://platform.openai.com/docs/guides/reasoning).\nCurrently supported values are `none`, `minimal`, `low`, `medium`, `high`, and `xhigh`. Reducing\nreasoning effort can result in faster responses and fewer tokens used\non reasoning in a response.\n\n- `gpt-5.1` defaults to `none`, which does not perform reasoning. The supported reasoning values for `gpt-5.1` are `none`, `low`, `medium`, and `high`. Tool calls are supported for all reasoning values in gpt-5.1.\n- All models before `gpt-5.1` default to `medium` reasoning effort, and do not support `none`.\n- The `gpt-5-pro` model defaults to (and only supports) `high` reasoning effort.\n- `xhigh` is supported for all models after `gpt-5.1-codex-max`.\n",
            "enum": [
              "none",
              "minimal",
              "low",
              "medium",
              "high",
              "xhigh"
            ],
            "type": "string"
          },
          {
            "type": "null"
          }
        ]
      },
      "GraderLabelModel": {
        "description": "A LabelModelGrader object which uses a model to assign labels to each item\nin the evaluation.\n",
        "properties": {
          "input": {
            "items": {
              "$ref": "#/components/schemas/EvalItem"
            },
            "type": "array"
          },
          "labels": {
            "description": "The labels to assign to each item in the evaluation.",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "model": {
            "description": "The model to use for the evaluation. Must support structured outputs.",
            "type": "string"
          },
          "name": {
            "description": "The name of the grader.",
            "type": "string"
          },
          "passing_labels": {
            "description": "The labels that indicate a passing result. Must be a subset of labels.",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "type": {
            "description": "The object type, which is always `label_model`.",
            "enum": [
              "label_model"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "model",
          "input",
          "passing_labels",
          "labels",
          "name"
        ],
        "title": "LabelModelGrader",
        "type": "object"
      },
      "EvalItemContent": {
        "description": "Inputs to the model - can contain template strings. Supports text, output text, input images, and input audio, either as a single item or an array of items.\n",
        "oneOf": [
          {
            "$ref": "#/components/schemas/EvalItemContentItem"
          },
          {
            "$ref": "#/components/schemas/EvalItemContentArray"
          }
        ],
        "title": "Eval content"
      },
      "EvalItemContentItem": {
        "description": "A single content item: input text, output text, input image, or input audio.\n",
        "oneOf": [
          {
            "$ref": "#/components/schemas/EvalItemContentText"
          },
          {
            "$ref": "#/components/schemas/InputTextContent"
          },
          {
            "$ref": "#/components/schemas/EvalItemContentOutputText"
          },
          {
            "$ref": "#/components/schemas/EvalItemInputImage"
          },
          {
            "$ref": "#/components/schemas/InputAudio"
          }
        ],
        "title": "Eval content item"
      },
      "EvalItemContentArray": {
        "description": "A list of inputs, each of which may be either an input text, output text, input\nimage, or input audio object.\n",
        "items": {
          "$ref": "#/components/schemas/EvalItemContentItem"
        },
        "title": "An array of Input text, Output text, Input image, and Input audio",
        "type": "array"
      },
      "EvalItemContentText": {
        "description": "A text input to the model.\n",
        "title": "Text input",
        "type": "string"
      },
      "InputTextContent": {
        "description": "A text input to the model.",
        "properties": {
          "text": {
            "description": "The text input to the model.",
            "type": "string"
          },
          "type": {
            "default": "input_text",
            "description": "The type of the input item. Always `input_text`.",
            "enum": [
              "input_text"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "text"
        ],
        "title": "Input text",
        "type": "object"
      },
      "EvalItemContentOutputText": {
        "description": "A text output from the model.\n",
        "properties": {
          "text": {
            "description": "The text output from the model.\n",
            "type": "string"
          },
          "type": {
            "description": "The type of the output text. Always `output_text`.\n",
            "enum": [
              "output_text"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "text"
        ],
        "title": "Output text",
        "type": "object"
      },
      "EvalItemInputImage": {
        "description": "An image input block used within EvalItem content arrays.",
        "properties": {
          "detail": {
            "description": "The detail level of the image to be sent to the model. One of `high`, `low`, or `auto`. Defaults to `auto`.\n",
            "type": "string"
          },
          "image_url": {
            "description": "The URL of the image input.\n",
            "type": "string"
          },
          "type": {
            "description": "The type of the image input. Always `input_image`.\n",
            "enum": [
              "input_image"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "image_url"
        ],
        "title": "Input image",
        "type": "object"
      },
      "InputAudio": {
        "description": "An audio input to the model.\n",
        "properties": {
          "input_audio": {
            "properties": {
              "data": {
                "description": "Base64-encoded audio data.\n",
                "type": "string"
              },
              "format": {
                "description": "The format of the audio data. Currently supported formats are `mp3` and\n`wav`.\n",
                "enum": [
                  "mp3",
                  "wav"
                ],
                "type": "string"
              }
            },
            "required": [
              "data",
              "format"
            ],
            "type": "object"
          },
          "type": {
            "description": "The type of the input item. Always `input_audio`.\n",
            "enum": [
              "input_audio"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "input_audio"
        ],
        "title": "Input audio",
        "type": "object"
      }
    }
  }
}

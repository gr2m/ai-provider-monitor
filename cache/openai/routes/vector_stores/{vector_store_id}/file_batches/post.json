{
  "description": "The maximum number of files in a single batch request is 2000.",
  "operationId": "createVectorStoreFileBatch",
  "parameters": [
    {
      "description": "The ID of the vector store for which to create a File Batch.\n",
      "in": "path",
      "name": "vector_store_id",
      "required": true,
      "schema": {
        "example": "vs_abc123",
        "type": "string"
      }
    }
  ],
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "$ref": "#/components/schemas/CreateVectorStoreFileBatchRequest"
        }
      }
    },
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/VectorStoreFileBatchObject"
          }
        }
      },
      "description": "OK"
    }
  },
  "summary": "Create a vector store file batch.",
  "tags": [
    "Vector stores"
  ],
  "components": {
    "schemas": {
      "CreateVectorStoreFileBatchRequest": {
        "additionalProperties": false,
        "anyOf": [
          {
            "required": [
              "file_ids"
            ]
          },
          {
            "required": [
              "files"
            ]
          }
        ],
        "properties": {
          "attributes": {
            "$ref": "#/components/schemas/VectorStoreFileAttributes"
          },
          "chunking_strategy": {
            "$ref": "#/components/schemas/ChunkingStrategyRequestParam"
          },
          "file_ids": {
            "description": "A list of [File](/docs/api-reference/files) IDs that the vector store should use. Useful for tools like `file_search` that can access files.  If `attributes` or `chunking_strategy` are provided, they will be  applied to all files in the batch. The maximum batch size is 2000 files. Mutually exclusive with `files`.",
            "items": {
              "type": "string"
            },
            "maxItems": 2000,
            "minItems": 1,
            "type": "array"
          },
          "files": {
            "description": "A list of objects that each include a `file_id` plus optional `attributes` or `chunking_strategy`. Use this when you need to override metadata for specific files. The global `attributes` or `chunking_strategy` will be ignored and must be specified for each file. The maximum batch size is 2000 files. Mutually exclusive with `file_ids`.",
            "items": {
              "$ref": "#/components/schemas/CreateVectorStoreFileRequest"
            },
            "maxItems": 2000,
            "minItems": 1,
            "type": "array"
          }
        },
        "type": "object"
      },
      "VectorStoreFileBatchObject": {
        "description": "A batch of files attached to a vector store.",
        "properties": {
          "created_at": {
            "description": "The Unix timestamp (in seconds) for when the vector store files batch was created.",
            "type": "integer"
          },
          "file_counts": {
            "properties": {
              "cancelled": {
                "description": "The number of files that where cancelled.",
                "type": "integer"
              },
              "completed": {
                "description": "The number of files that have been processed.",
                "type": "integer"
              },
              "failed": {
                "description": "The number of files that have failed to process.",
                "type": "integer"
              },
              "in_progress": {
                "description": "The number of files that are currently being processed.",
                "type": "integer"
              },
              "total": {
                "description": "The total number of files.",
                "type": "integer"
              }
            },
            "required": [
              "in_progress",
              "completed",
              "cancelled",
              "failed",
              "total"
            ],
            "type": "object"
          },
          "id": {
            "description": "The identifier, which can be referenced in API endpoints.",
            "type": "string"
          },
          "object": {
            "description": "The object type, which is always `vector_store.file_batch`.",
            "enum": [
              "vector_store.files_batch"
            ],
            "type": "string"
          },
          "status": {
            "description": "The status of the vector store files batch, which can be either `in_progress`, `completed`, `cancelled` or `failed`.",
            "enum": [
              "in_progress",
              "completed",
              "cancelled",
              "failed"
            ],
            "type": "string"
          },
          "vector_store_id": {
            "description": "The ID of the [vector store](/docs/api-reference/vector-stores/object) that the [File](/docs/api-reference/files) is attached to.",
            "type": "string"
          }
        },
        "required": [
          "id",
          "object",
          "created_at",
          "vector_store_id",
          "status",
          "file_counts"
        ],
        "title": "Vector store file batch",
        "type": "object"
      },
      "VectorStoreFileAttributes": {
        "anyOf": [
          {
            "additionalProperties": {
              "oneOf": [
                {
                  "maxLength": 512,
                  "type": "string"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                }
              ]
            },
            "description": "Set of 16 key-value pairs that can be attached to an object. This can be\nuseful for storing additional information about the object in a structured\nformat, and querying for objects via API or the dashboard. Keys are strings\nwith a maximum length of 64 characters. Values are strings with a maximum\nlength of 512 characters, booleans, or numbers.\n",
            "maxProperties": 16,
            "propertyNames": {
              "maxLength": 64,
              "type": "string"
            },
            "type": "object"
          },
          {
            "type": "null"
          }
        ]
      },
      "ChunkingStrategyRequestParam": {
        "description": "The chunking strategy used to chunk the file(s). If not set, will use the `auto` strategy.",
        "discriminator": {
          "propertyName": "type"
        },
        "oneOf": [
          {
            "$ref": "#/components/schemas/AutoChunkingStrategyRequestParam"
          },
          {
            "$ref": "#/components/schemas/StaticChunkingStrategyRequestParam"
          }
        ],
        "type": "object"
      },
      "CreateVectorStoreFileRequest": {
        "additionalProperties": false,
        "properties": {
          "attributes": {
            "$ref": "#/components/schemas/VectorStoreFileAttributes"
          },
          "chunking_strategy": {
            "$ref": "#/components/schemas/ChunkingStrategyRequestParam"
          },
          "file_id": {
            "description": "A [File](/docs/api-reference/files) ID that the vector store should use. Useful for tools like `file_search` that can access files.",
            "type": "string"
          }
        },
        "required": [
          "file_id"
        ],
        "type": "object"
      },
      "AutoChunkingStrategyRequestParam": {
        "additionalProperties": false,
        "description": "The default strategy. This strategy currently uses a `max_chunk_size_tokens` of `800` and `chunk_overlap_tokens` of `400`.",
        "properties": {
          "type": {
            "description": "Always `auto`.",
            "enum": [
              "auto"
            ],
            "type": "string"
          }
        },
        "required": [
          "type"
        ],
        "title": "Auto Chunking Strategy",
        "type": "object"
      },
      "StaticChunkingStrategyRequestParam": {
        "additionalProperties": false,
        "description": "Customize your own chunking strategy by setting chunk size and chunk overlap.",
        "properties": {
          "static": {
            "$ref": "#/components/schemas/StaticChunkingStrategy"
          },
          "type": {
            "description": "Always `static`.",
            "enum": [
              "static"
            ],
            "type": "string"
          }
        },
        "required": [
          "type",
          "static"
        ],
        "title": "Static Chunking Strategy",
        "type": "object"
      },
      "StaticChunkingStrategy": {
        "additionalProperties": false,
        "properties": {
          "chunk_overlap_tokens": {
            "description": "The number of tokens that overlap between chunks. The default value is `400`.\n\nNote that the overlap must not exceed half of `max_chunk_size_tokens`.\n",
            "type": "integer"
          },
          "max_chunk_size_tokens": {
            "description": "The maximum number of tokens in each chunk. The default value is `800`. The minimum value is `100` and the maximum value is `4096`.",
            "maximum": 4096,
            "minimum": 100,
            "type": "integer"
          }
        },
        "required": [
          "max_chunk_size_tokens",
          "chunk_overlap_tokens"
        ],
        "type": "object"
      }
    }
  }
}

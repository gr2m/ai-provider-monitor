{
  "description": "Retrieves a run step.",
  "operationId": "getRunStep",
  "parameters": [
    {
      "description": "The ID of the thread to which the run and run step belongs.",
      "in": "path",
      "name": "thread_id",
      "required": true,
      "schema": {
        "type": "string"
      }
    },
    {
      "description": "The ID of the run to which the run step belongs.",
      "in": "path",
      "name": "run_id",
      "required": true,
      "schema": {
        "type": "string"
      }
    },
    {
      "description": "The ID of the run step to retrieve.",
      "in": "path",
      "name": "step_id",
      "required": true,
      "schema": {
        "type": "string"
      }
    },
    {
      "description": "A list of additional fields to include in the response. Currently the only supported value is `step_details.tool_calls[*].file_search.results[*].content` to fetch the file search result content.\n\nSee the [file search tool documentation](https://platform.openai.com/docs/assistants/tools/file-search#customizing-file-search-settings) for more information.\n",
      "in": "query",
      "name": "include[]",
      "schema": {
        "items": {
          "enum": [
            "step_details.tool_calls[*].file_search.results[*].content"
          ],
          "type": "string"
        },
        "type": "array"
      }
    }
  ],
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Represents a step in execution of a run.\n",
            "properties": {
              "assistant_id": {
                "description": "The ID of the [assistant](https://platform.openai.com/docs/api-reference/assistants) associated with the run step.",
                "type": "string"
              },
              "cancelled_at": {
                "anyOf": [
                  {
                    "description": "The Unix timestamp (in seconds) for when the run step was cancelled.",
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "completed_at": {
                "anyOf": [
                  {
                    "description": "The Unix timestamp (in seconds) for when the run step completed.",
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "created_at": {
                "description": "The Unix timestamp (in seconds) for when the run step was created.",
                "type": "integer"
              },
              "expired_at": {
                "anyOf": [
                  {
                    "description": "The Unix timestamp (in seconds) for when the run step expired. A step is considered expired if the parent run is expired.",
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "failed_at": {
                "anyOf": [
                  {
                    "description": "The Unix timestamp (in seconds) for when the run step failed.",
                    "type": "integer"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "id": {
                "description": "The identifier of the run step, which can be referenced in API endpoints.",
                "type": "string"
              },
              "last_error": {
                "anyOf": [
                  {
                    "description": "The last error associated with this run step. Will be `null` if there are no errors.",
                    "properties": {
                      "code": {
                        "description": "One of `server_error` or `rate_limit_exceeded`.",
                        "enum": [
                          "server_error",
                          "rate_limit_exceeded"
                        ],
                        "type": "string"
                      },
                      "message": {
                        "description": "A human-readable description of the error.",
                        "type": "string"
                      }
                    },
                    "required": [
                      "code",
                      "message"
                    ],
                    "type": "object"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "metadata": {
                "anyOf": [
                  {
                    "additionalProperties": {
                      "type": "string"
                    },
                    "description": "Set of 16 key-value pairs that can be attached to an object. This can be\nuseful for storing additional information about the object in a structured\nformat, and querying for objects via API or the dashboard.\n\nKeys are strings with a maximum length of 64 characters. Values are strings\nwith a maximum length of 512 characters.\n",
                    "type": "object"
                  },
                  {
                    "type": "null"
                  }
                ]
              },
              "object": {
                "description": "The object type, which is always `thread.run.step`.",
                "enum": [
                  "thread.run.step"
                ],
                "type": "string"
              },
              "run_id": {
                "description": "The ID of the [run](https://platform.openai.com/docs/api-reference/runs) that this run step is a part of.",
                "type": "string"
              },
              "status": {
                "description": "The status of the run step, which can be either `in_progress`, `cancelled`, `failed`, `completed`, or `expired`.",
                "enum": [
                  "in_progress",
                  "cancelled",
                  "failed",
                  "completed",
                  "expired"
                ],
                "type": "string"
              },
              "step_details": {
                "anyOf": [
                  {
                    "description": "Details of the message creation by the run step.",
                    "properties": {
                      "message_creation": {
                        "properties": {
                          "message_id": {
                            "description": "The ID of the message that was created by this run step.",
                            "type": "string"
                          }
                        },
                        "required": [
                          "message_id"
                        ],
                        "type": "object"
                      },
                      "type": {
                        "description": "Always `message_creation`.",
                        "enum": [
                          "message_creation"
                        ],
                        "type": "string"
                      }
                    },
                    "required": [
                      "type",
                      "message_creation"
                    ],
                    "title": "Message creation",
                    "type": "object"
                  },
                  {
                    "description": "Details of the tool call.",
                    "properties": {
                      "tool_calls": {
                        "description": "An array of tool calls the run step was involved in. These can be associated with one of three types of tools: `code_interpreter`, `file_search`, or `function`.\n",
                        "items": {
                          "anyOf": [
                            {
                              "description": "Details of the Code Interpreter tool call the run step was involved in.",
                              "properties": {
                                "code_interpreter": {
                                  "description": "The Code Interpreter tool call definition.",
                                  "properties": {
                                    "input": {
                                      "description": "The input to the Code Interpreter tool call.",
                                      "type": "string"
                                    },
                                    "outputs": {
                                      "description": "The outputs from the Code Interpreter tool call. Code Interpreter can output one or more items, including text (`logs`) or images (`image`). Each of these are represented by a different object type.",
                                      "items": {
                                        "anyOf": [
                                          {
                                            "description": "Text output from the Code Interpreter tool call as part of a run step.",
                                            "properties": {
                                              "logs": {
                                                "description": "The text output from the Code Interpreter tool call.",
                                                "type": "string"
                                              },
                                              "type": {
                                                "description": "Always `logs`.",
                                                "enum": [
                                                  "logs"
                                                ],
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "logs"
                                            ],
                                            "title": "Code Interpreter log output",
                                            "type": "object"
                                          },
                                          {
                                            "properties": {
                                              "image": {
                                                "properties": {
                                                  "file_id": {
                                                    "description": "The [file](https://platform.openai.com/docs/api-reference/files) ID of the image.",
                                                    "type": "string"
                                                  }
                                                },
                                                "required": [
                                                  "file_id"
                                                ],
                                                "type": "object"
                                              },
                                              "type": {
                                                "description": "Always `image`.",
                                                "enum": [
                                                  "image"
                                                ],
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "type",
                                              "image"
                                            ],
                                            "title": "Code Interpreter image output",
                                            "type": "object"
                                          }
                                        ],
                                        "discriminator": {
                                          "propertyName": "type"
                                        },
                                        "type": "object"
                                      },
                                      "type": "array"
                                    }
                                  },
                                  "required": [
                                    "input",
                                    "outputs"
                                  ],
                                  "type": "object"
                                },
                                "id": {
                                  "description": "The ID of the tool call.",
                                  "type": "string"
                                },
                                "type": {
                                  "description": "The type of tool call. This is always going to be `code_interpreter` for this type of tool call.",
                                  "enum": [
                                    "code_interpreter"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "type",
                                "code_interpreter"
                              ],
                              "title": "Code Interpreter tool call",
                              "type": "object"
                            },
                            {
                              "properties": {
                                "file_search": {
                                  "description": "For now, this is always going to be an empty object.",
                                  "properties": {
                                    "ranking_options": {
                                      "description": "The ranking options for the file search.",
                                      "properties": {
                                        "ranker": {
                                          "description": "The ranker to use for the file search. If not specified will use the `auto` ranker.",
                                          "enum": [
                                            "auto",
                                            "default_2024_08_21"
                                          ],
                                          "type": "string"
                                        },
                                        "score_threshold": {
                                          "description": "The score threshold for the file search. All values must be a floating point number between 0 and 1.",
                                          "maximum": 1,
                                          "minimum": 0,
                                          "type": "number"
                                        }
                                      },
                                      "required": [
                                        "ranker",
                                        "score_threshold"
                                      ],
                                      "title": "File search tool call ranking options",
                                      "type": "object"
                                    },
                                    "results": {
                                      "description": "The results of the file search.",
                                      "items": {
                                        "description": "A result instance of the file search.",
                                        "properties": {
                                          "content": {
                                            "description": "The content of the result that was found. The content is only included if requested via the include query parameter.",
                                            "items": {
                                              "properties": {
                                                "text": {
                                                  "description": "The text content of the file.",
                                                  "type": "string"
                                                },
                                                "type": {
                                                  "description": "The type of the content.",
                                                  "enum": [
                                                    "text"
                                                  ],
                                                  "type": "string"
                                                }
                                              },
                                              "type": "object"
                                            },
                                            "type": "array"
                                          },
                                          "file_id": {
                                            "description": "The ID of the file that result was found in.",
                                            "type": "string"
                                          },
                                          "file_name": {
                                            "description": "The name of the file that result was found in.",
                                            "type": "string"
                                          },
                                          "score": {
                                            "description": "The score of the result. All values must be a floating point number between 0 and 1.",
                                            "maximum": 1,
                                            "minimum": 0,
                                            "type": "number"
                                          }
                                        },
                                        "required": [
                                          "file_id",
                                          "file_name",
                                          "score"
                                        ],
                                        "title": "File search tool call result",
                                        "type": "object"
                                      },
                                      "type": "array"
                                    }
                                  },
                                  "type": "object"
                                },
                                "id": {
                                  "description": "The ID of the tool call object.",
                                  "type": "string"
                                },
                                "type": {
                                  "description": "The type of tool call. This is always going to be `file_search` for this type of tool call.",
                                  "enum": [
                                    "file_search"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "type",
                                "file_search"
                              ],
                              "title": "File search tool call",
                              "type": "object"
                            },
                            {
                              "properties": {
                                "function": {
                                  "description": "The definition of the function that was called.",
                                  "properties": {
                                    "arguments": {
                                      "description": "The arguments passed to the function.",
                                      "type": "string"
                                    },
                                    "name": {
                                      "description": "The name of the function.",
                                      "type": "string"
                                    },
                                    "output": {
                                      "anyOf": [
                                        {
                                          "description": "The output of the function. This will be `null` if the outputs have not been [submitted](https://platform.openai.com/docs/api-reference/runs/submitToolOutputs) yet.",
                                          "type": "string"
                                        },
                                        {
                                          "type": "null"
                                        }
                                      ]
                                    }
                                  },
                                  "required": [
                                    "name",
                                    "arguments",
                                    "output"
                                  ],
                                  "type": "object"
                                },
                                "id": {
                                  "description": "The ID of the tool call object.",
                                  "type": "string"
                                },
                                "type": {
                                  "description": "The type of tool call. This is always going to be `function` for this type of tool call.",
                                  "enum": [
                                    "function"
                                  ],
                                  "type": "string"
                                }
                              },
                              "required": [
                                "id",
                                "type",
                                "function"
                              ],
                              "title": "Function tool call",
                              "type": "object"
                            }
                          ],
                          "discriminator": {
                            "propertyName": "type"
                          }
                        },
                        "type": "array"
                      },
                      "type": {
                        "description": "Always `tool_calls`.",
                        "enum": [
                          "tool_calls"
                        ],
                        "type": "string"
                      }
                    },
                    "required": [
                      "type",
                      "tool_calls"
                    ],
                    "title": "Tool calls",
                    "type": "object"
                  }
                ],
                "description": "The details of the run step.",
                "discriminator": {
                  "propertyName": "type"
                },
                "type": "object"
              },
              "thread_id": {
                "description": "The ID of the [thread](https://platform.openai.com/docs/api-reference/threads) that was run.",
                "type": "string"
              },
              "type": {
                "description": "The type of run step, which can be either `message_creation` or `tool_calls`.",
                "enum": [
                  "message_creation",
                  "tool_calls"
                ],
                "type": "string"
              },
              "usage": {
                "anyOf": [
                  {
                    "description": "Usage statistics related to the run step. This value will be `null` while the run step's status is `in_progress`.",
                    "properties": {
                      "completion_tokens": {
                        "description": "Number of completion tokens used over the course of the run step.",
                        "type": "integer"
                      },
                      "prompt_tokens": {
                        "description": "Number of prompt tokens used over the course of the run step.",
                        "type": "integer"
                      },
                      "total_tokens": {
                        "description": "Total number of tokens used (prompt + completion).",
                        "type": "integer"
                      }
                    },
                    "required": [
                      "prompt_tokens",
                      "completion_tokens",
                      "total_tokens"
                    ],
                    "type": "object"
                  },
                  {
                    "type": "null"
                  }
                ]
              }
            },
            "required": [
              "id",
              "object",
              "created_at",
              "assistant_id",
              "thread_id",
              "run_id",
              "type",
              "status",
              "step_details",
              "last_error",
              "expired_at",
              "cancelled_at",
              "failed_at",
              "completed_at",
              "metadata",
              "usage"
            ],
            "title": "Run steps",
            "type": "object"
          }
        }
      },
      "description": "OK"
    }
  },
  "summary": "Retrieve run step",
  "tags": [
    "Assistants"
  ]
}

{
  "operationId": "CreateChatSessionMethod",
  "parameters": [],
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "description": "Parameters for provisioning a new ChatKit session.",
          "properties": {
            "chatkit_configuration": {
              "description": "Optional overrides for ChatKit runtime configuration features",
              "properties": {
                "automatic_thread_titling": {
                  "description": "Configuration for automatic thread titling. When omitted, automatic thread titling is enabled by default.",
                  "properties": {
                    "enabled": {
                      "description": "Enable automatic thread title generation. Defaults to true.",
                      "type": "boolean"
                    }
                  },
                  "required": [],
                  "title": "Automatic thread titling configuration",
                  "type": "object"
                },
                "file_upload": {
                  "description": "Configuration for upload enablement and limits. When omitted, uploads are disabled by default (max_files 10, max_file_size 512 MB).",
                  "properties": {
                    "enabled": {
                      "description": "Enable uploads for this session. Defaults to false.",
                      "type": "boolean"
                    },
                    "max_file_size": {
                      "description": "Maximum size in megabytes for each uploaded file. Defaults to 512 MB, which is the maximum allowable size.",
                      "maximum": 512,
                      "minimum": 1,
                      "type": "integer"
                    },
                    "max_files": {
                      "description": "Maximum number of files that can be uploaded to the session. Defaults to 10.",
                      "minimum": 1,
                      "type": "integer"
                    }
                  },
                  "required": [],
                  "title": "File upload configuration",
                  "type": "object"
                },
                "history": {
                  "description": "Configuration for chat history retention. When omitted, history is enabled by default with no limit on recent_threads (null).",
                  "properties": {
                    "enabled": {
                      "description": "Enables chat users to access previous ChatKit threads. Defaults to true.",
                      "type": "boolean"
                    },
                    "recent_threads": {
                      "description": "Number of recent ChatKit threads users have access to. Defaults to unlimited when unset.",
                      "minimum": 1,
                      "type": "integer"
                    }
                  },
                  "required": [],
                  "title": "Chat history configuration",
                  "type": "object"
                }
              },
              "required": [],
              "title": "ChatKit configuration overrides",
              "type": "object"
            },
            "expires_after": {
              "description": "Optional override for session expiration timing in seconds from creation. Defaults to 10 minutes.",
              "properties": {
                "anchor": {
                  "default": "created_at",
                  "description": "Base timestamp used to calculate expiration. Currently fixed to `created_at`.",
                  "enum": [
                    "created_at"
                  ],
                  "type": "string"
                },
                "seconds": {
                  "description": "Number of seconds after the anchor when the session expires.",
                  "maximum": 600,
                  "minimum": 1,
                  "type": "integer"
                }
              },
              "required": [
                "anchor",
                "seconds"
              ],
              "title": "Expiration overrides",
              "type": "object"
            },
            "rate_limits": {
              "description": "Optional override for per-minute request limits. When omitted, defaults to 10.",
              "properties": {
                "max_requests_per_1_minute": {
                  "description": "Maximum number of requests allowed per minute for the session. Defaults to 10.",
                  "minimum": 1,
                  "type": "integer"
                }
              },
              "required": [],
              "title": "Rate limit overrides",
              "type": "object"
            },
            "user": {
              "description": "A free-form string that identifies your end user; ensures this Session can access other objects that have the same `user` scope.",
              "minLength": 1,
              "type": "string"
            },
            "workflow": {
              "description": "Workflow that powers the session.",
              "properties": {
                "id": {
                  "description": "Identifier for the workflow invoked by the session.",
                  "type": "string"
                },
                "state_variables": {
                  "additionalProperties": {
                    "oneOf": [
                      {
                        "maxLength": 10485760,
                        "type": "string"
                      },
                      {
                        "type": "integer"
                      },
                      {
                        "type": "boolean"
                      },
                      {
                        "type": "number"
                      }
                    ]
                  },
                  "description": "State variables forwarded to the workflow. Keys may be up to 64 characters, values must be primitive types, and the map defaults to an empty object.",
                  "maxProperties": 64,
                  "type": "object"
                },
                "tracing": {
                  "description": "Optional tracing overrides for the workflow invocation. When omitted, tracing is enabled by default.",
                  "properties": {
                    "enabled": {
                      "description": "Whether tracing is enabled during the session. Defaults to true.",
                      "type": "boolean"
                    }
                  },
                  "required": [],
                  "title": "Tracing Configuration",
                  "type": "object"
                },
                "version": {
                  "description": "Specific workflow version to run. Defaults to the latest deployed version.",
                  "type": "string"
                }
              },
              "required": [
                "id"
              ],
              "title": "Workflow settings",
              "type": "object"
            }
          },
          "required": [
            "workflow",
            "user"
          ],
          "title": "Create chat session request",
          "type": "object"
        }
      }
    }
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Represents a ChatKit session and its resolved configuration.",
            "example": {
              "chatkit_configuration": {
                "automatic_thread_titling": {
                  "enabled": true
                },
                "file_upload": {
                  "enabled": true,
                  "max_file_size": 16,
                  "max_files": 20
                },
                "history": {
                  "enabled": true,
                  "recent_threads": 10
                }
              },
              "client_secret": "ek_token_123",
              "expires_at": 1712349876,
              "id": "cksess_123",
              "max_requests_per_1_minute": 60,
              "object": "chatkit.session",
              "rate_limits": {
                "max_requests_per_1_minute": 60
              },
              "status": "cancelled",
              "user": "user_789",
              "workflow": {
                "id": "workflow_alpha",
                "version": "2024-10-01T00:00:00.000Z"
              }
            },
            "properties": {
              "chatkit_configuration": {
                "description": "Resolved ChatKit feature configuration for the session.",
                "properties": {
                  "automatic_thread_titling": {
                    "description": "Automatic thread titling preferences.",
                    "properties": {
                      "enabled": {
                        "description": "Whether automatic thread titling is enabled.",
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "enabled"
                    ],
                    "title": "Automatic thread titling",
                    "type": "object"
                  },
                  "file_upload": {
                    "description": "Upload settings for the session.",
                    "properties": {
                      "enabled": {
                        "description": "Indicates if uploads are enabled for the session.",
                        "type": "boolean"
                      },
                      "max_file_size": {
                        "anyOf": [
                          {
                            "description": "Maximum upload size in megabytes.",
                            "type": "integer"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      },
                      "max_files": {
                        "anyOf": [
                          {
                            "description": "Maximum number of uploads allowed during the session.",
                            "type": "integer"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    },
                    "required": [
                      "enabled",
                      "max_file_size",
                      "max_files"
                    ],
                    "title": "File upload settings",
                    "type": "object"
                  },
                  "history": {
                    "description": "History retention configuration.",
                    "properties": {
                      "enabled": {
                        "description": "Indicates if chat history is persisted for the session.",
                        "type": "boolean"
                      },
                      "recent_threads": {
                        "anyOf": [
                          {
                            "description": "Number of prior threads surfaced in history views. Defaults to null when all history is retained.",
                            "type": "integer"
                          },
                          {
                            "type": "null"
                          }
                        ]
                      }
                    },
                    "required": [
                      "enabled",
                      "recent_threads"
                    ],
                    "title": "History settings",
                    "type": "object"
                  }
                },
                "required": [
                  "automatic_thread_titling",
                  "file_upload",
                  "history"
                ],
                "title": "ChatKit configuration",
                "type": "object"
              },
              "client_secret": {
                "description": "Ephemeral client secret that authenticates session requests.",
                "type": "string"
              },
              "expires_at": {
                "description": "Unix timestamp (in seconds) for when the session expires.",
                "type": "integer"
              },
              "id": {
                "description": "Identifier for the ChatKit session.",
                "type": "string"
              },
              "max_requests_per_1_minute": {
                "description": "Convenience copy of the per-minute request limit.",
                "type": "integer"
              },
              "object": {
                "default": "chatkit.session",
                "description": "Type discriminator that is always `chatkit.session`.",
                "enum": [
                  "chatkit.session"
                ],
                "type": "string"
              },
              "rate_limits": {
                "description": "Resolved rate limit values.",
                "properties": {
                  "max_requests_per_1_minute": {
                    "description": "Maximum allowed requests per one-minute window.",
                    "type": "integer"
                  }
                },
                "required": [
                  "max_requests_per_1_minute"
                ],
                "title": "Rate limits",
                "type": "object"
              },
              "status": {
                "description": "Current lifecycle state of the session.",
                "enum": [
                  "active",
                  "expired",
                  "cancelled"
                ],
                "type": "string"
              },
              "user": {
                "description": "User identifier associated with the session.",
                "type": "string"
              },
              "workflow": {
                "description": "Workflow metadata for the session.",
                "properties": {
                  "id": {
                    "description": "Identifier of the workflow backing the session.",
                    "type": "string"
                  },
                  "state_variables": {
                    "anyOf": [
                      {
                        "additionalProperties": {
                          "oneOf": [
                            {
                              "type": "string"
                            },
                            {
                              "type": "integer"
                            },
                            {
                              "type": "boolean"
                            },
                            {
                              "type": "number"
                            }
                          ]
                        },
                        "description": "State variable key-value pairs applied when invoking the workflow. Defaults to null when no overrides were provided.",
                        "type": "object"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  },
                  "tracing": {
                    "description": "Tracing settings applied to the workflow.",
                    "properties": {
                      "enabled": {
                        "description": "Indicates whether tracing is enabled.",
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "enabled"
                    ],
                    "title": "Tracing Configuration",
                    "type": "object"
                  },
                  "version": {
                    "anyOf": [
                      {
                        "description": "Specific workflow version used for the session. Defaults to null when using the latest deployment.",
                        "type": "string"
                      },
                      {
                        "type": "null"
                      }
                    ]
                  }
                },
                "required": [
                  "id",
                  "version",
                  "state_variables",
                  "tracing"
                ],
                "title": "Workflow",
                "type": "object"
              }
            },
            "required": [
              "id",
              "object",
              "expires_at",
              "client_secret",
              "workflow",
              "user",
              "rate_limits",
              "max_requests_per_1_minute",
              "status",
              "chatkit_configuration"
            ],
            "title": "The chat session object",
            "type": "object"
          }
        }
      },
      "description": "Success"
    }
  },
  "summary": "Create a ChatKit session."
}

{
  "description": "Returns paginated historical logs that match the provided filters.",
  "operationId": "serverlessLogsHistory",
  "parameters": [
    {
      "description": "Number of results per page",
      "in": "query",
      "name": "limit",
      "required": false,
      "schema": {
        "description": "Number of results per page",
        "example": 100,
        "maximum": 1000,
        "minimum": 1,
        "type": "integer"
      }
    },
    {
      "description": "Pagination cursor from previous response (timestamp-based). Use as 'until' parameter for next page.",
      "in": "query",
      "name": "cursor",
      "required": false,
      "schema": {
        "description": "Pagination cursor from previous response (timestamp-based). Use as 'until' parameter for next page.",
        "example": "2024-11-09T00:00:00.000Z",
        "type": "string"
      }
    },
    {
      "description": "Start date in ISO8601 format (e.g., '2025-01-01T00:00:00Z' or '2025-01-01'). Defaults to 24 hours ago.",
      "in": "query",
      "name": "start",
      "required": false,
      "schema": {
        "anyOf": [
          {
            "format": "date-time",
            "type": "string"
          },
          {
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
            "type": "string"
          }
        ],
        "description": "Start date in ISO8601 format (e.g., '2025-01-01T00:00:00Z' or '2025-01-01'). Defaults to 24 hours ago.",
        "example": "2025-01-01T00:00:00Z"
      }
    },
    {
      "description": "End date in ISO8601 format (e.g., '2025-01-31T23:59:59Z' or '2025-01-31'). Defaults to current time.",
      "in": "query",
      "name": "end",
      "required": false,
      "schema": {
        "anyOf": [
          {
            "format": "date-time",
            "type": "string"
          },
          {
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
            "type": "string"
          }
        ],
        "description": "End date in ISO8601 format (e.g., '2025-01-31T23:59:59Z' or '2025-01-31'). Defaults to current time.",
        "example": "2025-01-31T23:59:59Z"
      }
    },
    {
      "description": "Filter by app IDs",
      "in": "query",
      "name": "app_id",
      "required": false,
      "schema": {
        "description": "Filter by app IDs",
        "example": [
          "my-app"
        ],
        "items": {
          "type": "string"
        },
        "type": "array"
      }
    },
    {
      "description": "Filter by revision",
      "in": "query",
      "name": "revision",
      "required": false,
      "schema": {
        "description": "Filter by revision",
        "example": "rev_abc123",
        "type": "string"
      }
    },
    {
      "description": "Filter by run source",
      "in": "query",
      "name": "run_source",
      "required": false,
      "schema": {
        "description": "Filter by run source",
        "enum": [
          "grpc-run",
          "grpc-register",
          "gateway",
          "cron"
        ],
        "example": "grpc-run",
        "type": "string"
      }
    },
    {
      "description": "Include tracebacks",
      "in": "query",
      "name": "traceback",
      "required": false,
      "schema": {
        "default": false,
        "description": "Include tracebacks",
        "example": false,
        "type": [
          "boolean",
          "null"
        ]
      }
    },
    {
      "description": "Free-text search",
      "in": "query",
      "name": "search",
      "required": false,
      "schema": {
        "description": "Free-text search",
        "example": "error",
        "type": "string"
      }
    },
    {
      "description": "Minimum log level",
      "in": "query",
      "name": "level",
      "required": false,
      "schema": {
        "description": "Minimum log level",
        "example": "error",
        "type": "string"
      }
    },
    {
      "description": "Filter by job id",
      "in": "query",
      "name": "job_id",
      "required": false,
      "schema": {
        "description": "Filter by job id",
        "example": "job_123",
        "type": "string"
      }
    },
    {
      "description": "Filter by request id",
      "in": "query",
      "name": "request_id",
      "required": false,
      "schema": {
        "description": "Filter by request id",
        "example": "req_abc123",
        "type": "string"
      }
    }
  ],
  "requestBody": {
    "content": {
      "application/json": {
        "examples": {
          "single": {
            "summary": "Filter by a single label",
            "value": [
              {
                "key": "fal_job_id",
                "value": "job_123"
              }
            ]
          }
        },
        "schema": {
          "items": {
            "additionalProperties": false,
            "description": "Filter for log labels",
            "properties": {
              "condition_type": {
                "description": "Condition type for label filtering",
                "enum": [
                  "equals",
                  "in",
                  "not_equals",
                  "not_in"
                ],
                "type": "string"
              },
              "key": {
                "description": "Label key to filter",
                "type": "string"
              },
              "value": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "items": {
                      "type": "string"
                    },
                    "type": "array"
                  }
                ],
                "description": "Filter value"
              }
            },
            "required": [
              "key",
              "value"
            ],
            "type": "object"
          },
          "type": "array"
        }
      }
    }
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "examples": {
            "success": {
              "summary": "Paginated logs response",
              "value": {
                "has_more": true,
                "items": [
                  {
                    "app": "my-app",
                    "labels": {
                      "fal_job_id": "job_123"
                    },
                    "level": "info",
                    "message": "Application started",
                    "revision": "rev_abc123",
                    "timestamp": "2024-11-09T10:30:45.123Z"
                  }
                ],
                "next_cursor": "2024-11-09T10:30:44.000Z"
              }
            }
          },
          "schema": {
            "description": "Paginated logs response",
            "properties": {
              "has_more": {
                "description": "Boolean indicating if more results are available (convenience field derived from next_cursor)",
                "type": "boolean"
              },
              "items": {
                "description": "Array of log entries matching the query",
                "items": {
                  "additionalProperties": false,
                  "description": "A single log entry",
                  "properties": {
                    "app": {
                      "description": "App identifier",
                      "type": "string"
                    },
                    "labels": {
                      "additionalProperties": {
                        "type": "string"
                      },
                      "description": "Additional labels",
                      "type": "object"
                    },
                    "level": {
                      "description": "Log level",
                      "type": "string"
                    },
                    "message": {
                      "description": "Log message",
                      "type": "string"
                    },
                    "revision": {
                      "description": "Revision identifier",
                      "type": "string"
                    },
                    "timestamp": {
                      "description": "ISO timestamp of the log line",
                      "type": "string"
                    }
                  },
                  "required": [
                    "timestamp",
                    "level",
                    "message",
                    "app",
                    "revision"
                  ],
                  "type": "object"
                },
                "type": "array"
              },
              "next_cursor": {
                "description": "Cursor for the next page of results, null if no more pages",
                "type": [
                  "string",
                  "null"
                ]
              }
            },
            "required": [
              "next_cursor",
              "has_more",
              "items"
            ],
            "type": "object"
          }
        }
      },
      "description": "Logs history retrieved successfully"
    },
    "401": {
      "content": {
        "application/json": {
          "example": {
            "error": {
              "message": "Authentication required",
              "type": "authorization_error"
            }
          },
          "schema": {
            "description": "Standard error response format",
            "properties": {
              "error": {
                "description": "Error details",
                "properties": {
                  "docs_url": {
                    "description": "Link to relevant documentation",
                    "format": "uri",
                    "type": "string"
                  },
                  "message": {
                    "description": "Human-readable error message",
                    "type": "string"
                  },
                  "request_id": {
                    "description": "Unique request identifier for debugging",
                    "type": "string"
                  },
                  "type": {
                    "description": "The category of error that occurred",
                    "enum": [
                      "authorization_error",
                      "validation_error",
                      "not_found",
                      "rate_limited",
                      "server_error",
                      "not_implemented"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "type",
                  "message"
                ],
                "type": "object"
              }
            },
            "required": [
              "error"
            ],
            "type": "object"
          }
        }
      },
      "description": "Authentication required"
    },
    "429": {
      "content": {
        "application/json": {
          "example": {
            "error": {
              "message": "Rate limit exceeded",
              "type": "rate_limited"
            }
          },
          "schema": {
            "description": "Standard error response format",
            "properties": {
              "error": {
                "description": "Error details",
                "properties": {
                  "docs_url": {
                    "description": "Link to relevant documentation",
                    "format": "uri",
                    "type": "string"
                  },
                  "message": {
                    "description": "Human-readable error message",
                    "type": "string"
                  },
                  "request_id": {
                    "description": "Unique request identifier for debugging",
                    "type": "string"
                  },
                  "type": {
                    "description": "The category of error that occurred",
                    "enum": [
                      "authorization_error",
                      "validation_error",
                      "not_found",
                      "rate_limited",
                      "server_error",
                      "not_implemented"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "type",
                  "message"
                ],
                "type": "object"
              }
            },
            "required": [
              "error"
            ],
            "type": "object"
          }
        }
      },
      "description": "Rate limit exceeded"
    },
    "500": {
      "content": {
        "application/json": {
          "example": {
            "error": {
              "message": "An unexpected error occurred",
              "type": "server_error"
            }
          },
          "schema": {
            "description": "Standard error response format",
            "properties": {
              "error": {
                "description": "Error details",
                "properties": {
                  "docs_url": {
                    "description": "Link to relevant documentation",
                    "format": "uri",
                    "type": "string"
                  },
                  "message": {
                    "description": "Human-readable error message",
                    "type": "string"
                  },
                  "request_id": {
                    "description": "Unique request identifier for debugging",
                    "type": "string"
                  },
                  "type": {
                    "description": "The category of error that occurred",
                    "enum": [
                      "authorization_error",
                      "validation_error",
                      "not_found",
                      "rate_limited",
                      "server_error",
                      "not_implemented"
                    ],
                    "type": "string"
                  }
                },
                "required": [
                  "type",
                  "message"
                ],
                "type": "object"
              }
            },
            "required": [
              "error"
            ],
            "type": "object"
          }
        }
      },
      "description": "Internal server error"
    }
  },
  "security": [
    {
      "apiKey": []
    }
  ],
  "summary": "Logs history (paginated)",
  "tags": [
    "Serverless",
    "Logs"
  ]
}

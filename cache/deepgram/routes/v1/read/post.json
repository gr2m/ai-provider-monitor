{
  "callbacks": {
    "readCallback": {
      "{$request.query.callback}": {
        "post": {
          "description": "Callback endpoint for text analysis results",
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadV1Response"
                }
              }
            },
            "description": "The text analysis results",
            "required": true
          },
          "responses": {
            "200": {
              "description": "We expect a 200 to determine whether the callback was successfully received"
            }
          }
        }
      }
    }
  },
  "description": "Analyze text content using Deepgrams text analysis API",
  "operationId": "read.v1.text.analyze",
  "parameters": [
    {
      "$ref": "#/components/parameters/SharedCallback"
    },
    {
      "$ref": "#/components/parameters/SharedCallbackMethod"
    },
    {
      "$ref": "#/components/parameters/SharedSentiment"
    },
    {
      "$ref": "#/components/parameters/SharedSummarize"
    },
    {
      "$ref": "#/components/parameters/SharedTag"
    },
    {
      "$ref": "#/components/parameters/SharedTopics"
    },
    {
      "$ref": "#/components/parameters/SharedCustomTopic"
    },
    {
      "$ref": "#/components/parameters/SharedCustomTopicMode"
    },
    {
      "$ref": "#/components/parameters/SharedIntents"
    },
    {
      "$ref": "#/components/parameters/SharedCustomIntent"
    },
    {
      "$ref": "#/components/parameters/SharedCustomIntentMode"
    },
    {
      "$ref": "#/components/parameters/ReadV1Language"
    }
  ],
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "$ref": "#/components/schemas/ReadV1Request"
        }
      }
    },
    "description": "Analyze a text file"
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ReadV1Response"
          }
        }
      },
      "description": "Successful text analysis"
    },
    "400": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ErrorResponse"
          }
        }
      },
      "description": "Invalid Request"
    }
  },
  "security": [
    {
      "ApiKeyAuth": []
    },
    {
      "JwtAuth": []
    }
  ],
  "summary": "Analyze text content",
  "tags": [
    "Read",
    "V1",
    "Text"
  ],
  "components": {
    "schemas": {
      "ReadV1Response": {
        "description": "The standard text response",
        "properties": {
          "metadata": {
            "$ref": "#/components/schemas/ReadV1ResponseMetadata"
          },
          "results": {
            "$ref": "#/components/schemas/ReadV1ResponseResults"
          }
        },
        "required": [
          "metadata",
          "results"
        ],
        "type": "object"
      },
      "ReadV1Request": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/ReadV1RequestUrl"
          },
          {
            "$ref": "#/components/schemas/ReadV1RequestText"
          }
        ]
      },
      "ErrorResponse": {
        "oneOf": [
          {
            "$ref": "#/components/schemas/ErrorResponseTextError"
          },
          {
            "$ref": "#/components/schemas/ErrorResponseLegacyError"
          },
          {
            "$ref": "#/components/schemas/ErrorResponseModernError"
          }
        ]
      },
      "ReadV1ResponseMetadata": {
        "properties": {
          "metadata": {
            "properties": {
              "created": {
                "example": "2024-11-18T23:47:44.674Z",
                "format": "date-time",
                "type": "string"
              },
              "intents_info": {
                "properties": {
                  "input_tokens": {
                    "type": "number"
                  },
                  "model_uuid": {
                    "format": "uuid",
                    "type": "string"
                  },
                  "output_tokens": {
                    "type": "number"
                  }
                },
                "type": "object"
              },
              "language": {
                "example": "en",
                "type": "string"
              },
              "request_id": {
                "example": "d04af392-db11-4c1d-83e1-20e34f0b8999",
                "format": "uuid",
                "type": "string"
              },
              "sentiment_info": {
                "properties": {
                  "input_tokens": {
                    "type": "number"
                  },
                  "model_uuid": {
                    "format": "uuid",
                    "type": "string"
                  },
                  "output_tokens": {
                    "type": "number"
                  }
                },
                "type": "object"
              },
              "summary_info": {
                "properties": {
                  "input_tokens": {
                    "type": "number"
                  },
                  "model_uuid": {
                    "format": "uuid",
                    "type": "string"
                  },
                  "output_tokens": {
                    "type": "number"
                  }
                },
                "type": "object"
              },
              "topics_info": {
                "properties": {
                  "input_tokens": {
                    "type": "number"
                  },
                  "model_uuid": {
                    "format": "uuid",
                    "type": "string"
                  },
                  "output_tokens": {
                    "type": "number"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          }
        },
        "required": [
          "request_id",
          "created",
          "language",
          "summary_info",
          "sentiment_info",
          "topics_info",
          "intents_info"
        ],
        "type": "object"
      },
      "ReadV1ResponseResults": {
        "properties": {
          "intents": {
            "$ref": "#/components/schemas/SharedIntents"
          },
          "sentiments": {
            "$ref": "#/components/schemas/SharedSentiments"
          },
          "summary": {
            "$ref": "#/components/schemas/ReadV1ResponseResultsSummary"
          },
          "topics": {
            "$ref": "#/components/schemas/SharedTopics"
          }
        },
        "type": "object"
      },
      "ReadV1RequestUrl": {
        "properties": {
          "url": {
            "description": "A URL pointing to the text source",
            "format": "uri",
            "type": "string"
          }
        },
        "required": [
          "url"
        ],
        "type": "object"
      },
      "ReadV1RequestText": {
        "properties": {
          "text": {
            "description": "The plain text to analyze",
            "type": "string"
          }
        },
        "required": [
          "text"
        ],
        "type": "object"
      },
      "ErrorResponseTextError": {
        "type": "string"
      },
      "ErrorResponseLegacyError": {
        "properties": {
          "err_code": {
            "description": "The error code",
            "type": "string"
          },
          "err_msg": {
            "description": "The error message",
            "type": "string"
          },
          "request_id": {
            "description": "The request ID",
            "type": "string"
          }
        },
        "type": "object"
      },
      "ErrorResponseModernError": {
        "properties": {
          "category": {
            "description": "The category of the error",
            "type": "string"
          },
          "details": {
            "description": "A description of the error",
            "type": "string"
          },
          "message": {
            "description": "A message about the error",
            "type": "string"
          },
          "request_id": {
            "description": "The unique identifier of the request",
            "type": "string"
          }
        },
        "type": "object"
      },
      "SharedIntents": {
        "description": "Output whenever `intents=true` is used",
        "properties": {
          "results": {
            "properties": {
              "intents": {
                "properties": {
                  "segments": {
                    "items": {
                      "properties": {
                        "end_word": {
                          "example": 414,
                          "type": "number"
                        },
                        "intents": {
                          "items": {
                            "properties": {
                              "confidence_score": {
                                "example": 0.0038975573,
                                "format": "float",
                                "type": "number"
                              },
                              "intent": {
                                "example": "Encourage podcasting",
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "type": "array"
                        },
                        "start_word": {
                          "example": 354,
                          "type": "number"
                        },
                        "text": {
                          "example": "If you found this valuable, you can subscribe to the show on spotify or your favorite podcast app.",
                          "type": "string"
                        }
                      },
                      "type": "object"
                    },
                    "type": "array"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      },
      "SharedSentiments": {
        "description": "Output whenever `sentiment=true` is used",
        "properties": {
          "average": {
            "properties": {
              "sentiment": {
                "example": "positive",
                "type": "string"
              },
              "sentiment_score": {
                "example": 0.5810185185185185,
                "type": "number"
              }
            },
            "type": "object"
          },
          "segments": {
            "items": {
              "properties": {
                "end_word": {
                  "example": 69,
                  "type": "number"
                },
                "sentiment": {
                  "example": "positive",
                  "type": "string"
                },
                "sentiment_score": {
                  "example": 0.5810546875,
                  "type": "number"
                },
                "start_word": {
                  "example": 0,
                  "type": "number"
                },
                "text": {
                  "example": "Yeah. As as much as, um, it's worth celebrating, uh, the first, uh, spacewalk, um, with an all-female team, I think many of us are looking forward to it just being normal. And, um, I think if it signifies anything, it is, uh, to honor the the women who came before us who, um, were skilled and qualified, um, and didn't get the the same opportunities that we have today.",
                  "type": "string"
                }
              },
              "type": "object"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "ReadV1ResponseResultsSummary": {
        "description": "Output whenever `summary=true` is used",
        "properties": {
          "results": {
            "properties": {
              "summary": {
                "properties": {
                  "text": {
                    "example": "The summary of the text submitted.",
                    "type": "string"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      },
      "SharedTopics": {
        "description": "Output whenever `topics=true` is used",
        "properties": {
          "results": {
            "properties": {
              "topics": {
                "properties": {
                  "segments": {
                    "items": {
                      "properties": {
                        "end_word": {
                          "example": 69,
                          "type": "number"
                        },
                        "start_word": {
                          "example": 32,
                          "type": "number"
                        },
                        "text": {
                          "example": "And, um, I think if it signifies anything, it is, uh, to honor the the women who came before us who, um, were skilled and qualified, um, and didn't get the the same opportunities that we have today.",
                          "type": "string"
                        },
                        "topics": {
                          "items": {
                            "properties": {
                              "confidence_score": {
                                "example": 0.91581345,
                                "format": "float",
                                "type": "number"
                              },
                              "topic": {
                                "example": "Spacewalk",
                                "type": "string"
                              }
                            },
                            "type": "object"
                          },
                          "type": "array"
                        }
                      },
                      "type": "object"
                    },
                    "type": "array"
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      }
    },
    "parameters": {
      "SharedCallback": {
        "description": "URL to which we'll make the callback request",
        "in": "query",
        "name": "callback",
        "required": false,
        "schema": {
          "type": "string"
        }
      },
      "SharedCallbackMethod": {
        "description": "HTTP method by which the callback request will be made",
        "in": "query",
        "name": "callback_method",
        "required": false,
        "schema": {
          "default": "POST",
          "enum": [
            "POST",
            "PUT"
          ]
        }
      },
      "SharedSentiment": {
        "description": "Recognizes the sentiment throughout a transcript or text",
        "in": "query",
        "name": "sentiment",
        "required": false,
        "schema": {
          "default": false,
          "type": "boolean"
        }
      },
      "SharedSummarize": {
        "description": "Summarize content. For Listen API, supports string version option. For Read API, accepts boolean only.",
        "in": "query",
        "name": "summarize",
        "required": false,
        "schema": {
          "oneOf": [
            {
              "enum": [
                "v2"
              ],
              "title": "Listen API Version Option",
              "type": "string"
            },
            {
              "default": false,
              "title": "Read API Boolean Option",
              "type": "boolean"
            }
          ]
        }
      },
      "SharedTag": {
        "description": "Label your requests for the purpose of identification during usage reporting",
        "explode": true,
        "in": "query",
        "name": "tag",
        "required": false,
        "schema": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          ]
        },
        "style": "form"
      },
      "SharedTopics": {
        "description": "Detect topics throughout a transcript or text",
        "in": "query",
        "name": "topics",
        "required": false,
        "schema": {
          "default": false,
          "type": "boolean"
        }
      },
      "SharedCustomTopic": {
        "description": "Custom topics you want the model to detect within your input audio or text if present Submit up to `100`.",
        "explode": true,
        "in": "query",
        "name": "custom_topic",
        "required": false,
        "schema": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "type": "string"
              },
              "maxItems": 100,
              "type": "array"
            }
          ]
        },
        "style": "form"
      },
      "SharedCustomTopicMode": {
        "description": "Sets how the model will interpret strings submitted to the `custom_topic` param. When `strict`, the model will only return topics submitted using the `custom_topic` param. When `extended`, the model will return its own detected topics in addition to those submitted using the `custom_topic` param",
        "in": "query",
        "name": "custom_topic_mode",
        "required": false,
        "schema": {
          "default": "extended",
          "enum": [
            "extended",
            "strict"
          ],
          "type": "string"
        }
      },
      "SharedIntents": {
        "description": "Recognizes speaker intent throughout a transcript or text",
        "in": "query",
        "name": "intents",
        "required": false,
        "schema": {
          "default": false,
          "type": "boolean"
        }
      },
      "SharedCustomIntent": {
        "description": "Custom intents you want the model to detect within your input audio if present",
        "explode": true,
        "in": "query",
        "name": "custom_intent",
        "required": false,
        "schema": {
          "oneOf": [
            {
              "type": "string"
            },
            {
              "items": {
                "maxItems": 100,
                "type": "string"
              },
              "type": "array"
            }
          ]
        },
        "style": "form"
      },
      "SharedCustomIntentMode": {
        "description": "Sets how the model will interpret intents submitted to the `custom_intent` param. When `strict`, the model will only return intents submitted using the `custom_intent` param. When `extended`, the model will return its own detected intents in the `custom_intent` param.",
        "in": "query",
        "name": "custom_intent_mode",
        "required": false,
        "schema": {
          "default": "extended",
          "enum": [
            "extended",
            "strict"
          ],
          "type": "string"
        }
      },
      "ReadV1Language": {
        "description": "The [BCP-47 language tag](https://tools.ietf.org/html/bcp47) that hints at the primary spoken language. Depending on the Model and API endpoint you choose only certain languages are available",
        "in": "query",
        "name": "language",
        "required": false,
        "schema": {
          "default": "en",
          "type": "string"
        }
      }
    }
  }
}

{
  "deprecated": true,
  "description": "Creates a new connector. The connector is tested during registration and will cancel registration when the test is unsuccessful. See ['Creating and Deploying a Connector'](https://docs.cohere.com/v1/docs/creating-and-deploying-a-connector) for more information.",
  "operationId": "create-connector",
  "parameters": [
    {
      "$ref": "#/components/parameters/RequestSource"
    }
  ],
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "$ref": "#/components/schemas/CreateConnectorRequest"
        }
      }
    },
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/CreateConnectorResponse"
          }
        }
      },
      "description": "OK"
    },
    "400": {
      "$ref": "#/components/responses/BadRequest"
    },
    "401": {
      "$ref": "#/components/responses/Unauthorized"
    },
    "403": {
      "$ref": "#/components/responses/Forbidden"
    },
    "404": {
      "$ref": "#/components/responses/NotFound"
    },
    "422": {
      "$ref": "#/components/responses/UnprocessableEntity"
    },
    "429": {
      "$ref": "#/components/responses/RateLimit"
    },
    "498": {
      "$ref": "#/components/responses/InvalidToken"
    },
    "499": {
      "$ref": "#/components/responses/RequestCancelled"
    },
    "500": {
      "$ref": "#/components/responses/InternalServerError"
    },
    "501": {
      "$ref": "#/components/responses/NotImplemented"
    },
    "503": {
      "$ref": "#/components/responses/ServiceUnavailable"
    },
    "504": {
      "$ref": "#/components/responses/GatewayTimeout"
    }
  },
  "summary": "Create a Connector",
  "tags": [
    "/connectors"
  ],
  "components": {
    "parameters": {
      "RequestSource": {
        "description": "The name of the project that is making the request.\n",
        "example": "my-cool-project",
        "in": "header",
        "name": "X-Client-Name",
        "required": false,
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "CreateConnectorRequest": {
        "properties": {
          "active": {
            "default": true,
            "description": "Whether the connector is active or not.",
            "type": "boolean"
          },
          "continue_on_failure": {
            "default": false,
            "description": "Whether a chat request should continue or not if the request to this connector fails.",
            "type": "boolean"
          },
          "description": {
            "description": "A description of the connector.",
            "type": "string"
          },
          "excludes": {
            "description": "A list of fields to exclude from the prompt (fields remain in the document).",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "name": {
            "description": "A human-readable name for the connector.",
            "type": "string"
          },
          "oauth": {
            "$ref": "#/components/schemas/CreateConnectorOAuth",
            "description": "The OAuth 2.0 configuration for the connector. Cannot be specified if service_auth is specified."
          },
          "service_auth": {
            "$ref": "#/components/schemas/CreateConnectorServiceAuth",
            "description": "The service to service authentication configuration for the connector. Cannot be specified if oauth is specified."
          },
          "url": {
            "description": "The URL of the connector that will be used to search for documents.",
            "type": "string"
          }
        },
        "required": [
          "name",
          "url"
        ],
        "type": "object"
      },
      "CreateConnectorResponse": {
        "properties": {
          "connector": {
            "$ref": "#/components/schemas/Connector"
          }
        },
        "required": [
          "connector"
        ],
        "type": "object"
      },
      "CreateConnectorOAuth": {
        "properties": {
          "authorize_url": {
            "description": "The OAuth 2.0 /authorize endpoint to use when users authorize the connector.",
            "type": "string"
          },
          "client_id": {
            "description": "The OAuth 2.0 client ID. This fields is encrypted at rest.",
            "type": "string"
          },
          "client_secret": {
            "description": "The OAuth 2.0 client Secret. This field is encrypted at rest and never returned in a response.",
            "type": "string"
          },
          "scope": {
            "description": "The OAuth scopes to request when users authorize the connector.",
            "type": "string"
          },
          "token_url": {
            "description": "The OAuth 2.0 /token endpoint to use when users authorize the connector.",
            "type": "string"
          }
        },
        "required": [
          "clientId",
          "clientSecret",
          "authorizeUrl",
          "tokenUrl"
        ],
        "type": "object"
      },
      "CreateConnectorServiceAuth": {
        "properties": {
          "token": {
            "description": "The token that will be used in the HTTP Authorization header when making requests to the connector. This field is encrypted at rest and never returned in a response.",
            "type": "string"
          },
          "type": {
            "$ref": "#/components/schemas/AuthTokenType"
          }
        },
        "required": [
          "type",
          "token"
        ],
        "type": "object"
      },
      "Connector": {
        "description": "A connector allows you to integrate data sources with the '/chat' endpoint to create grounded generations with citations to the data source.\ndocuments to help answer users.",
        "properties": {
          "active": {
            "description": "Whether the connector is active or not.",
            "type": "boolean"
          },
          "auth_status": {
            "description": "The OAuth status for the user making the request. One of [\"valid\", \"expired\", \"\"]. Empty string (field is omitted) means the user has not authorized the connector yet.",
            "enum": [
              "valid",
              "expired"
            ],
            "type": "string"
          },
          "auth_type": {
            "description": "The type of authentication/authorization used by the connector. Possible values: [oauth, service_auth]",
            "format": "enum",
            "type": "string"
          },
          "continue_on_failure": {
            "description": "Whether a chat request should continue or not if the request to this connector fails.",
            "type": "boolean"
          },
          "created_at": {
            "description": "The UTC time at which the connector was created.",
            "format": "date-time",
            "type": "string"
          },
          "description": {
            "description": "A description of the connector.",
            "type": "string"
          },
          "excludes": {
            "description": "A list of fields to exclude from the prompt (fields remain in the document).",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "id": {
            "description": "The unique identifier of the connector (used in both `/connectors` & `/chat` endpoints).\nThis is automatically created from the name of the connector upon registration.",
            "type": "string"
          },
          "name": {
            "description": "A human-readable name for the connector.",
            "type": "string"
          },
          "oauth": {
            "$ref": "#/components/schemas/ConnectorOAuth",
            "description": "The OAuth 2.0 configuration for the connector."
          },
          "organization_id": {
            "description": "The organization to which this connector belongs. This is automatically set to\nthe organization of the user who created the connector.",
            "type": "string"
          },
          "updated_at": {
            "description": "The UTC time at which the connector was last updated.",
            "format": "date-time",
            "type": "string"
          },
          "url": {
            "description": "The URL of the connector that will be used to search for documents.",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at"
        ],
        "type": "object"
      },
      "AuthTokenType": {
        "default": "noscheme",
        "description": "The token_type specifies the way the token is passed in the Authorization header. Valid values are \"bearer\", \"basic\", and \"noscheme\".",
        "enum": [
          "bearer",
          "basic",
          "noscheme"
        ],
        "type": "string"
      },
      "ConnectorOAuth": {
        "properties": {
          "authorize_url": {
            "description": "The OAuth 2.0 /authorize endpoint to use when users authorize the connector.",
            "type": "string"
          },
          "client_id": {
            "description": "The OAuth 2.0 client ID. This field is encrypted at rest.",
            "type": "string"
          },
          "client_secret": {
            "description": "The OAuth 2.0 client Secret. This field is encrypted at rest and never returned in a response.",
            "type": "string"
          },
          "scope": {
            "description": "The OAuth scopes to request when users authorize the connector.",
            "type": "string"
          },
          "token_url": {
            "description": "The OAuth 2.0 /token endpoint to use when users authorize the connector.",
            "type": "string"
          }
        },
        "required": [
          "authorize_url",
          "token_url"
        ],
        "type": "object"
      }
    },
    "responses": {
      "BadRequest": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the request is not well formed. This could be because:\n  - JSON is invalid\n  - The request is missing required fields\n  - The request contains an invalid combination of fields\n"
      },
      "Unauthorized": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error indicates that the operation attempted to be performed is not allowed. This could be because:\n  - The api token is invalid\n  - The user does not have the necessary permissions\n"
      },
      "Forbidden": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error indicates that the operation attempted to be performed is not allowed. This could be because:\n  - The api token is invalid\n  - The user does not have the necessary permissions\n"
      },
      "NotFound": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a resource is not found. This could be because:\n  - The endpoint does not exist\n  - The resource does not exist eg model id, dataset id\n"
      },
      "UnprocessableEntity": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the request is not well formed. This could be because:\n  - JSON is invalid\n  - The request is missing required fields\n  - The request contains an invalid combination of fields\n"
      },
      "RateLimit": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "Too many requests"
      },
      "InvalidToken": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a request or response contains a deny-listed token.\n"
      },
      "RequestCancelled": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a request is cancelled by the user.\n"
      },
      "InternalServerError": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when an uncategorised internal server error occurs.\n"
      },
      "NotImplemented": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the requested feature is not implemented.\n"
      },
      "ServiceUnavailable": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the service is unavailable. This could be due to:\n  - Too many users trying to access the service at the same time\n"
      },
      "GatewayTimeout": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a request to the server times out. This could be due to:\n  - An internal services taking too long to respond\n"
      }
    }
  }
}

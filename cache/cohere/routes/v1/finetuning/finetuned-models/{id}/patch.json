{
  "deprecated": true,
  "description": "Updates the fine-tuned model with the given ID. The model will be updated with the new settings and name provided in the request body.",
  "operationId": "UpdateFinetunedModel",
  "parameters": [
    {
      "description": "FinetunedModel ID.",
      "in": "path",
      "name": "id",
      "required": true,
      "schema": {
        "type": "string"
      }
    },
    {
      "$ref": "#/components/parameters/RequestSource"
    }
  ],
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "properties": {
            "completed_at": {
              "description": "Timestamp for the completed fine-tuning.",
              "format": "date-time",
              "readOnly": true,
              "type": "string"
            },
            "created_at": {
              "description": "Creation timestamp.",
              "format": "date-time",
              "readOnly": true,
              "type": "string"
            },
            "creator_id": {
              "description": "User ID of the creator.",
              "readOnly": true,
              "type": "string"
            },
            "last_used": {
              "description": "Deprecated: Timestamp for the latest request to this fine-tuned model.",
              "format": "date-time",
              "readOnly": true,
              "type": "string"
            },
            "name": {
              "description": "FinetunedModel name (e.g. `foobar`).",
              "type": "string"
            },
            "organization_id": {
              "description": "Organization ID.",
              "readOnly": true,
              "type": "string"
            },
            "settings": {
              "$ref": "#/components/schemas/Settings",
              "description": "FinetunedModel settings such as dataset, hyperparameters..."
            },
            "status": {
              "$ref": "#/components/schemas/Status",
              "description": "Current stage in the life-cycle of the fine-tuned model.",
              "readOnly": true
            },
            "updated_at": {
              "description": "Latest update timestamp.",
              "format": "date-time",
              "readOnly": true,
              "type": "string"
            }
          },
          "required": [
            "name",
            "settings",
            "finetuned_model"
          ],
          "title": "Information about the fine-tuned model. Must contain name and settings.",
          "type": "object"
        }
      }
    },
    "description": "Information about the fine-tuned model. Must contain name and settings.",
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/UpdateFinetunedModelResponse"
          }
        }
      },
      "description": "A successful response."
    },
    "400": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      },
      "description": "Bad Request"
    },
    "401": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      },
      "description": "Unauthorized"
    },
    "403": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      },
      "description": "Forbidden"
    },
    "404": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      },
      "description": "Not Found"
    },
    "500": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      },
      "description": "Internal Server Error"
    },
    "503": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/Error"
          }
        }
      },
      "description": "Status Service Unavailable"
    }
  },
  "summary": "Updates a fine-tuned model.",
  "tags": [
    "/finetuning"
  ],
  "components": {
    "parameters": {
      "RequestSource": {
        "description": "The name of the project that is making the request.\n",
        "example": "my-cool-project",
        "in": "header",
        "name": "X-Client-Name",
        "required": false,
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "Settings": {
        "deprecated": true,
        "description": "The configuration used for fine-tuning.",
        "properties": {
          "base_model": {
            "$ref": "#/components/schemas/BaseModel",
            "description": "The base model to fine-tune."
          },
          "dataset_id": {
            "description": "The data used for training and evaluating the fine-tuned model.",
            "type": "string"
          },
          "hyperparameters": {
            "$ref": "#/components/schemas/Hyperparameters",
            "description": "Fine-tuning hyper-parameters."
          },
          "multi_label": {
            "description": "read-only. Whether the model is single-label or multi-label (only for classification).",
            "readOnly": true,
            "type": "boolean"
          },
          "wandb": {
            "$ref": "#/components/schemas/WandbConfig",
            "description": "The Weights & Biases configuration (Chat fine-tuning only)."
          }
        },
        "required": [
          "base_model",
          "dataset_id"
        ],
        "type": "object"
      },
      "Status": {
        "default": "STATUS_UNSPECIFIED",
        "deprecated": true,
        "description": "The possible stages of a fine-tuned model life-cycle.\n\n - STATUS_UNSPECIFIED: Unspecified status.\n - STATUS_FINETUNING: The fine-tuned model is being fine-tuned.\n - STATUS_DEPLOYING_API: Deprecated: The fine-tuned model is being deployed.\n - STATUS_READY: The fine-tuned model is ready to receive requests.\n - STATUS_FAILED: The fine-tuned model failed.\n - STATUS_DELETED: The fine-tuned model was deleted.\n - STATUS_TEMPORARILY_OFFLINE: Deprecated: The fine-tuned model is temporarily unavailable.\n - STATUS_PAUSED: Deprecated: The fine-tuned model is paused (Vanilla only).\n - STATUS_QUEUED: The fine-tuned model is queued for training.",
        "enum": [
          "STATUS_UNSPECIFIED",
          "STATUS_FINETUNING",
          "STATUS_DEPLOYING_API",
          "STATUS_READY",
          "STATUS_FAILED",
          "STATUS_DELETED",
          "STATUS_TEMPORARILY_OFFLINE",
          "STATUS_PAUSED",
          "STATUS_QUEUED"
        ],
        "type": "string"
      },
      "UpdateFinetunedModelResponse": {
        "deprecated": true,
        "description": "Response to a request to update a fine-tuned model.",
        "properties": {
          "finetuned_model": {
            "$ref": "#/components/schemas/FinetunedModel",
            "description": "Information about the fine-tuned model."
          }
        },
        "type": "object"
      },
      "Error": {
        "deprecated": true,
        "description": "Error is the response for any unsuccessful event.",
        "properties": {
          "message": {
            "description": "A developer-facing error message.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "BaseModel": {
        "deprecated": true,
        "description": "The base model used for fine-tuning.",
        "properties": {
          "base_type": {
            "$ref": "#/components/schemas/BaseType",
            "description": "The type of the base model."
          },
          "name": {
            "description": "The name of the base model.",
            "type": "string"
          },
          "strategy": {
            "$ref": "#/components/schemas/Strategy",
            "description": "Deprecated: The fine-tuning strategy."
          },
          "version": {
            "description": "read-only. The version of the base model.",
            "readOnly": true,
            "type": "string"
          }
        },
        "required": [
          "base_type"
        ],
        "type": "object"
      },
      "Hyperparameters": {
        "deprecated": true,
        "description": "The fine-tuning hyperparameters.",
        "properties": {
          "early_stopping_patience": {
            "description": "Stops training if the loss metric does not improve beyond the value of\n`early_stopping_threshold` after this many times of evaluation.",
            "format": "int32",
            "type": "integer"
          },
          "early_stopping_threshold": {
            "description": "How much the loss must improve to prevent early stopping.",
            "format": "double",
            "type": "number"
          },
          "learning_rate": {
            "description": "The learning rate to be used during training.",
            "format": "double",
            "type": "number"
          },
          "lora_alpha": {
            "description": "Controls the scaling factor for LoRA updates. Higher values make the\nupdates more impactful.",
            "format": "int32",
            "type": "integer"
          },
          "lora_rank": {
            "description": "Specifies the rank for low-rank matrices. Lower ranks reduce parameters\nbut may limit model flexibility.",
            "format": "int32",
            "type": "integer"
          },
          "lora_target_modules": {
            "$ref": "#/components/schemas/LoraTargetModules",
            "description": "The combination of LoRA modules to target."
          },
          "train_batch_size": {
            "description": "The batch size is the number of training examples included in a single\ntraining pass.",
            "format": "int32",
            "type": "integer"
          },
          "train_epochs": {
            "description": "The number of epochs to train for.",
            "format": "int32",
            "type": "integer"
          }
        },
        "type": "object"
      },
      "WandbConfig": {
        "deprecated": true,
        "description": "The Weights & Biases configuration.",
        "properties": {
          "api_key": {
            "description": "The WandB API key to be used during training.",
            "type": "string"
          },
          "entity": {
            "description": "The WandB entity name to be used during training.",
            "type": "string"
          },
          "project": {
            "description": "The WandB project name to be used during training.",
            "type": "string"
          }
        },
        "required": [
          "project",
          "api_key"
        ],
        "type": "object"
      },
      "FinetunedModel": {
        "deprecated": true,
        "description": "This resource represents a fine-tuned model.",
        "properties": {
          "completed_at": {
            "description": "read-only. Timestamp for the completed fine-tuning.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          },
          "created_at": {
            "description": "read-only. Creation timestamp.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          },
          "creator_id": {
            "description": "read-only. User ID of the creator.",
            "readOnly": true,
            "type": "string"
          },
          "id": {
            "description": "read-only. FinetunedModel ID.",
            "readOnly": true,
            "type": "string"
          },
          "last_used": {
            "description": "read-only. Deprecated: Timestamp for the latest request to this fine-tuned model.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          },
          "name": {
            "description": "FinetunedModel name (e.g. `foobar`).",
            "type": "string"
          },
          "organization_id": {
            "description": "read-only. Organization ID.",
            "readOnly": true,
            "type": "string"
          },
          "settings": {
            "$ref": "#/components/schemas/Settings",
            "description": "FinetunedModel settings such as dataset, hyperparameters..."
          },
          "status": {
            "$ref": "#/components/schemas/Status",
            "description": "read-only. Current stage in the life-cycle of the fine-tuned model.",
            "readOnly": true
          },
          "updated_at": {
            "description": "read-only. Latest update timestamp.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          }
        },
        "required": [
          "name",
          "settings"
        ],
        "type": "object"
      },
      "BaseType": {
        "default": "BASE_TYPE_UNSPECIFIED",
        "deprecated": true,
        "description": "The possible types of fine-tuned models.\n\n - BASE_TYPE_UNSPECIFIED: Unspecified model.\n - BASE_TYPE_GENERATIVE: Deprecated: Generative model.\n - BASE_TYPE_CLASSIFICATION: Classification model.\n - BASE_TYPE_RERANK: Rerank model.\n - BASE_TYPE_CHAT: Chat model.",
        "enum": [
          "BASE_TYPE_UNSPECIFIED",
          "BASE_TYPE_GENERATIVE",
          "BASE_TYPE_CLASSIFICATION",
          "BASE_TYPE_RERANK",
          "BASE_TYPE_CHAT"
        ],
        "type": "string"
      },
      "Strategy": {
        "default": "STRATEGY_UNSPECIFIED",
        "deprecated": true,
        "description": "The possible strategy used to serve a fine-tuned models.\n\n - STRATEGY_UNSPECIFIED: Unspecified strategy.\n - STRATEGY_VANILLA: Deprecated: Serve the fine-tuned model on a dedicated GPU.\n - STRATEGY_TFEW: Deprecated: Serve the fine-tuned model on a shared GPU.",
        "enum": [
          "STRATEGY_UNSPECIFIED",
          "STRATEGY_VANILLA",
          "STRATEGY_TFEW"
        ],
        "type": "string"
      },
      "LoraTargetModules": {
        "default": "LORA_TARGET_MODULES_UNSPECIFIED",
        "deprecated": true,
        "description": "The possible combinations of LoRA modules to target.\n\n - LORA_TARGET_MODULES_UNSPECIFIED: Unspecified LoRA target modules.\n - LORA_TARGET_MODULES_QV: LoRA adapts the query and value matrices in transformer attention layers.\n - LORA_TARGET_MODULES_QKVO: LoRA adapts query, key, value, and output matrices in attention layers.\n - LORA_TARGET_MODULES_QKVO_FFN: LoRA adapts attention projection matrices and feed-forward networks (FFN).",
        "enum": [
          "LORA_TARGET_MODULES_UNSPECIFIED",
          "LORA_TARGET_MODULES_QV",
          "LORA_TARGET_MODULES_QKVO",
          "LORA_TARGET_MODULES_QKVO_FFN"
        ],
        "type": "string"
      }
    }
  }
}

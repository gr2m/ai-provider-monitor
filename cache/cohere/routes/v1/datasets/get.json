{
  "description": "List datasets that have been created.",
  "operationId": "list-datasets",
  "parameters": [
    {
      "description": "optional filter by dataset type",
      "in": "query",
      "name": "datasetType",
      "schema": {
        "type": "string"
      }
    },
    {
      "description": "optional filter before a date",
      "in": "query",
      "name": "before",
      "schema": {
        "format": "date-time",
        "type": "string"
      }
    },
    {
      "description": "optional filter after a date",
      "in": "query",
      "name": "after",
      "schema": {
        "format": "date-time",
        "type": "string"
      }
    },
    {
      "description": "optional limit to number of results",
      "in": "query",
      "name": "limit",
      "schema": {
        "type": "number"
      }
    },
    {
      "description": "optional offset to start of results",
      "in": "query",
      "name": "offset",
      "schema": {
        "type": "number"
      }
    },
    {
      "description": "optional filter by validation status",
      "in": "query",
      "name": "validationStatus",
      "schema": {
        "$ref": "#/components/schemas/DatasetValidationStatus"
      }
    },
    {
      "$ref": "#/components/parameters/RequestSource"
    }
  ],
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "properties": {
              "datasets": {
                "items": {
                  "$ref": "#/components/schemas/Dataset"
                },
                "type": "array"
              }
            },
            "type": "object"
          }
        }
      },
      "description": "A successful response."
    },
    "400": {
      "$ref": "#/components/responses/BadRequest"
    },
    "401": {
      "$ref": "#/components/responses/Unauthorized"
    },
    "403": {
      "$ref": "#/components/responses/Forbidden"
    },
    "404": {
      "$ref": "#/components/responses/NotFound"
    },
    "422": {
      "$ref": "#/components/responses/UnprocessableEntity"
    },
    "429": {
      "$ref": "#/components/responses/RateLimit"
    },
    "498": {
      "$ref": "#/components/responses/InvalidToken"
    },
    "499": {
      "$ref": "#/components/responses/RequestCancelled"
    },
    "500": {
      "$ref": "#/components/responses/InternalServerError"
    },
    "501": {
      "$ref": "#/components/responses/NotImplemented"
    },
    "503": {
      "$ref": "#/components/responses/ServiceUnavailable"
    },
    "504": {
      "$ref": "#/components/responses/GatewayTimeout"
    }
  },
  "summary": "List Datasets",
  "tags": [
    "/datasets"
  ],
  "components": {
    "schemas": {
      "DatasetValidationStatus": {
        "description": "The validation status of the dataset",
        "enum": [
          "unknown",
          "queued",
          "processing",
          "failed",
          "validated",
          "skipped"
        ],
        "type": "string"
      },
      "Dataset": {
        "properties": {
          "created_at": {
            "description": "The creation date",
            "format": "date-time",
            "type": "string"
          },
          "dataset_parts": {
            "description": "the underlying files that make up the dataset",
            "items": {
              "$ref": "#/components/schemas/DatasetPart"
            },
            "type": "array"
          },
          "dataset_type": {
            "$ref": "#/components/schemas/DatasetType"
          },
          "id": {
            "description": "The dataset ID",
            "type": "string"
          },
          "metrics": {
            "$ref": "#/components/schemas/Metrics"
          },
          "name": {
            "description": "The name of the dataset",
            "type": "string"
          },
          "parse_info": {
            "$ref": "#/components/schemas/ParseInfo"
          },
          "preserve_fields": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "required_fields": {
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "schema": {
            "description": "the avro schema of the dataset",
            "type": "string"
          },
          "updated_at": {
            "description": "The last update date",
            "format": "date-time",
            "type": "string"
          },
          "validation_error": {
            "description": "Errors found during validation",
            "type": "string"
          },
          "validation_status": {
            "$ref": "#/components/schemas/DatasetValidationStatus"
          },
          "validation_warnings": {
            "description": "warnings found during validation",
            "items": {
              "type": "string"
            },
            "type": "array"
          }
        },
        "required": [
          "id",
          "name",
          "created_at",
          "updated_at",
          "dataset_type",
          "validation_status"
        ],
        "type": "object"
      },
      "DatasetPart": {
        "properties": {
          "id": {
            "description": "The dataset part ID",
            "type": "string"
          },
          "index": {
            "description": "The index of the file",
            "format": "int32",
            "type": "integer"
          },
          "name": {
            "description": "The name of the dataset part",
            "type": "string"
          },
          "num_rows": {
            "description": "The number of rows in the file",
            "format": "int32",
            "type": "integer"
          },
          "original_url": {
            "description": "The download url of the original file",
            "type": "string"
          },
          "samples": {
            "description": "The first few rows of the parsed file",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "size_bytes": {
            "description": "The size of the file in bytes",
            "format": "int32",
            "type": "integer"
          },
          "url": {
            "description": "The download url of the file",
            "type": "string"
          }
        },
        "required": [
          "id",
          "name"
        ],
        "type": "object"
      },
      "DatasetType": {
        "description": "The type of the dataset",
        "enum": [
          "embed-input",
          "embed-result",
          "cluster-result",
          "cluster-outliers",
          "reranker-finetune-input",
          "single-label-classification-finetune-input",
          "chat-finetune-input",
          "multi-label-classification-finetune-input",
          "batch-chat-input",
          "batch-openai-chat-input",
          "batch-embed-v2-input",
          "batch-chat-v2-input"
        ],
        "type": "string"
      },
      "Metrics": {
        "properties": {
          "finetune_dataset_metrics": {
            "$ref": "#/components/schemas/FinetuneDatasetMetrics"
          }
        },
        "type": "object"
      },
      "ParseInfo": {
        "properties": {
          "delimiter": {
            "type": "string",
            "writeOnly": true
          },
          "separator": {
            "type": "string",
            "writeOnly": true
          }
        },
        "type": "object",
        "writeOnly": true
      },
      "FinetuneDatasetMetrics": {
        "properties": {
          "chat_data_metrics": {
            "$ref": "#/components/schemas/ChatDataMetrics"
          },
          "classify_data_metrics": {
            "$ref": "#/components/schemas/ClassifyDataMetrics"
          },
          "eval_examples": {
            "description": "Number of evaluation examples.",
            "format": "int64",
            "type": "number"
          },
          "eval_size_bytes": {
            "description": "The size in bytes of all eval examples.",
            "format": "int64",
            "type": "number"
          },
          "reranker_data_metrics": {
            "$ref": "#/components/schemas/RerankerDataMetrics"
          },
          "total_examples": {
            "description": "The overall number of examples.",
            "format": "int64",
            "type": "number"
          },
          "train_examples": {
            "description": "The number of training examples.",
            "format": "int64",
            "type": "number"
          },
          "train_size_bytes": {
            "description": "The size in bytes of all training examples.",
            "format": "int64",
            "type": "number"
          },
          "trainable_token_count": {
            "description": "The number of tokens of valid examples that can be used for training.",
            "format": "int64",
            "type": "number"
          }
        },
        "type": "object"
      },
      "ChatDataMetrics": {
        "properties": {
          "num_eval_turns": {
            "description": "The sum of all turns of valid eval examples.",
            "format": "int64",
            "type": "number"
          },
          "num_train_turns": {
            "description": "The sum of all turns of valid train examples.",
            "format": "int64",
            "type": "number"
          },
          "preamble": {
            "description": "The preamble of this dataset.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "ClassifyDataMetrics": {
        "properties": {
          "label_metrics": {
            "items": {
              "$ref": "#/components/schemas/LabelMetric"
            },
            "type": "array"
          }
        },
        "type": "object"
      },
      "RerankerDataMetrics": {
        "properties": {
          "num_eval_hard_negatives": {
            "description": "The sum of all hard negatives of valid eval examples.",
            "format": "int64",
            "type": "number"
          },
          "num_eval_queries": {
            "description": "The number of evaluation queries.",
            "format": "int64",
            "type": "number"
          },
          "num_eval_relevant_passages": {
            "description": "The sum of all relevant passages of valid eval examples.",
            "format": "int64",
            "type": "number"
          },
          "num_train_hard_negatives": {
            "description": "The sum of all hard negatives of valid training examples.",
            "format": "int64",
            "type": "number"
          },
          "num_train_queries": {
            "description": "The number of training queries.",
            "format": "int64",
            "type": "number"
          },
          "num_train_relevant_passages": {
            "description": "The sum of all relevant passages of valid training examples.",
            "format": "int64",
            "type": "number"
          }
        },
        "type": "object"
      },
      "LabelMetric": {
        "properties": {
          "label": {
            "description": "value of the label",
            "type": "string"
          },
          "samples": {
            "description": "samples for this label",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "total_examples": {
            "description": "Total number of examples for this label",
            "format": "int64",
            "type": "number"
          }
        },
        "type": "object"
      }
    },
    "parameters": {
      "RequestSource": {
        "description": "The name of the project that is making the request.\n",
        "example": "my-cool-project",
        "in": "header",
        "name": "X-Client-Name",
        "required": false,
        "schema": {
          "type": "string"
        }
      }
    },
    "responses": {
      "BadRequest": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the request is not well formed. This could be because:\n  - JSON is invalid\n  - The request is missing required fields\n  - The request contains an invalid combination of fields\n"
      },
      "Unauthorized": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error indicates that the operation attempted to be performed is not allowed. This could be because:\n  - The api token is invalid\n  - The user does not have the necessary permissions\n"
      },
      "Forbidden": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error indicates that the operation attempted to be performed is not allowed. This could be because:\n  - The api token is invalid\n  - The user does not have the necessary permissions\n"
      },
      "NotFound": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a resource is not found. This could be because:\n  - The endpoint does not exist\n  - The resource does not exist eg model id, dataset id\n"
      },
      "UnprocessableEntity": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the request is not well formed. This could be because:\n  - JSON is invalid\n  - The request is missing required fields\n  - The request contains an invalid combination of fields\n"
      },
      "RateLimit": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "Too many requests"
      },
      "InvalidToken": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a request or response contains a deny-listed token.\n"
      },
      "RequestCancelled": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a request is cancelled by the user.\n"
      },
      "InternalServerError": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when an uncategorised internal server error occurs.\n"
      },
      "NotImplemented": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the requested feature is not implemented.\n"
      },
      "ServiceUnavailable": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when the service is unavailable. This could be due to:\n  - Too many users trying to access the service at the same time\n"
      },
      "GatewayTimeout": {
        "content": {
          "application/json": {
            "schema": {
              "properties": {
                "id": {
                  "type": "string"
                },
                "message": {
                  "type": "string"
                }
              },
              "type": "object"
            }
          }
        },
        "description": "This error is returned when a request to the server times out. This could be due to:\n  - An internal services taking too long to respond\n"
      }
    }
  }
}

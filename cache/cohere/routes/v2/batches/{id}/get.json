{
  "description": "Retrieves a batch",
  "operationId": "GetBatch",
  "parameters": [
    {
      "description": "The batch ID.",
      "in": "path",
      "name": "id",
      "required": true,
      "schema": {
        "type": "string"
      }
    },
    {
      "$ref": "#/components/parameters/RequestSource"
    }
  ],
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "example": {
            "batch": {
              "created_at": "2025-03-05T14:59:25.438Z",
              "creator_id": "b5e1ffb9-49a1-4653-9927-94083316309d",
              "id": "9439e0e3-49a4-4336-93e3-485fc420bc18",
              "input_dataset_id": "my-requests-dataset",
              "input_tokens": "0",
              "model": "batch-command",
              "name": "my-batch",
              "num_failed_records": 0,
              "num_records": 5000,
              "num_successful_records": 8,
              "org_id": "62603116-1750-4c04-b1b6-9d5046764bc4",
              "output_dataset_id": "my-batch-output-c2waz1",
              "output_tokens": "0",
              "status": "BATCH_STATUS_IN_PROGRESS",
              "updated_at": "2025-03-05T15:00:26.126Z"
            }
          },
          "schema": {
            "$ref": "#/components/schemas/GetBatchResponse"
          }
        }
      },
      "description": "A successful response."
    },
    "400": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/BatchError"
          }
        }
      },
      "description": "Bad Request"
    },
    "401": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/BatchError"
          }
        }
      },
      "description": "Unauthorized"
    },
    "403": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/BatchError"
          }
        }
      },
      "description": "Forbidden"
    },
    "404": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/BatchError"
          }
        }
      },
      "description": "Not Found"
    },
    "500": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/BatchError"
          }
        }
      },
      "description": "Internal Server Error"
    },
    "503": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/BatchError"
          }
        }
      },
      "description": "Status Service Unavailable"
    }
  },
  "summary": "Retrieve a batch",
  "tags": [
    "/batches"
  ],
  "components": {
    "parameters": {
      "RequestSource": {
        "description": "The name of the project that is making the request.\n",
        "example": "my-cool-project",
        "in": "header",
        "name": "X-Client-Name",
        "required": false,
        "schema": {
          "type": "string"
        }
      }
    },
    "schemas": {
      "GetBatchResponse": {
        "description": "Response to a request to get a batch.",
        "properties": {
          "batch": {
            "$ref": "#/components/schemas/Batch",
            "description": "Information about the batch."
          }
        },
        "required": [
          "batch"
        ],
        "type": "object"
      },
      "BatchError": {
        "description": "Error is the response for any unsuccessful event.",
        "properties": {
          "message": {
            "description": "A developer-facing error message.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "Batch": {
        "description": "This resource represents a batch job.",
        "properties": {
          "created_at": {
            "description": "read-only. Creation timestamp.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          },
          "creator_id": {
            "description": "read-only. User ID of the creator.",
            "readOnly": true,
            "type": "string"
          },
          "id": {
            "description": "read-only. Batch ID.",
            "readOnly": true,
            "type": "string"
          },
          "input_dataset_id": {
            "description": "ID of the dataset the batch reads inputs from.",
            "type": "string"
          },
          "input_tokens": {
            "description": "read-only. The total number of input tokens in the batch.",
            "format": "int64",
            "readOnly": true,
            "type": "string"
          },
          "model": {
            "description": "The name of the model the batch uses.",
            "type": "string"
          },
          "name": {
            "description": "Batch name (e.g. `foobar`).",
            "type": "string"
          },
          "num_failed_records": {
            "description": "read-only. The current number of failed records in the batch.",
            "format": "int32",
            "readOnly": true,
            "type": "integer"
          },
          "num_records": {
            "description": "read-only. The total number of records in the batch.",
            "format": "int32",
            "readOnly": true,
            "type": "integer"
          },
          "num_successful_records": {
            "description": "read-only. The current number of successful records in the batch.",
            "format": "int32",
            "readOnly": true,
            "type": "integer"
          },
          "org_id": {
            "description": "read-only. Organization ID.",
            "readOnly": true,
            "type": "string"
          },
          "output_dataset_id": {
            "readOnly": true,
            "title": "ID of the dataset the batch writes outputs to",
            "type": "string"
          },
          "output_tokens": {
            "description": "read-only. The total number of output tokens in the batch.",
            "format": "int64",
            "readOnly": true,
            "type": "string"
          },
          "status": {
            "$ref": "#/components/schemas/BatchStatus",
            "description": "read-only. Current stage in the life-cycle of the batch.",
            "readOnly": true
          },
          "status_reason": {
            "description": "read-only. More details about the reason for the status of a batch job.",
            "readOnly": true,
            "type": "string"
          },
          "updated_at": {
            "description": "read-only. Latest update timestamp.",
            "format": "date-time",
            "readOnly": true,
            "type": "string"
          }
        },
        "required": [
          "name",
          "input_dataset_id",
          "model"
        ],
        "type": "object"
      },
      "BatchStatus": {
        "default": "BATCH_STATUS_UNSPECIFIED",
        "description": "The possible stages of a batch life-cycle.\n\n - BATCH_STATUS_UNSPECIFIED: Unspecified status.\n - BATCH_STATUS_QUEUED: The batch has been queued.\n - BATCH_STATUS_IN_PROGRESS: The batch is in-progress.\n - BATCH_STATUS_CANCELING: The batch is being canceled.\n - BATCH_STATUS_COMPLETED: The batch has been completed.\n - BATCH_STATUS_FAILED: The batch has failed.\n - BATCH_STATUS_CANCELED: The batch has been canceled.",
        "enum": [
          "BATCH_STATUS_UNSPECIFIED",
          "BATCH_STATUS_QUEUED",
          "BATCH_STATUS_IN_PROGRESS",
          "BATCH_STATUS_CANCELING",
          "BATCH_STATUS_COMPLETED",
          "BATCH_STATUS_FAILED",
          "BATCH_STATUS_CANCELED"
        ],
        "readOnly": true,
        "type": "string"
      }
    }
  }
}

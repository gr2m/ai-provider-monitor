{
  "description": "Creates and executes a batch from an uploaded dataset of requests",
  "operationId": "CreateBatch",
  "parameters": [
    {
      "description": "The name of the project that is making the request.\n",
      "example": "my-cool-project",
      "in": "header",
      "name": "X-Client-Name",
      "required": false,
      "schema": {
        "type": "string"
      }
    }
  ],
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "description": "This resource represents a batch job.",
          "properties": {
            "created_at": {
              "description": "read-only. Creation timestamp.",
              "format": "date-time",
              "readOnly": true,
              "type": "string"
            },
            "creator_id": {
              "description": "read-only. User ID of the creator.",
              "readOnly": true,
              "type": "string"
            },
            "id": {
              "description": "read-only. Batch ID.",
              "readOnly": true,
              "type": "string"
            },
            "input_dataset_id": {
              "description": "ID of the dataset the batch reads inputs from.",
              "type": "string"
            },
            "input_tokens": {
              "description": "read-only. The total number of input tokens in the batch.",
              "format": "int64",
              "readOnly": true,
              "type": "string"
            },
            "model": {
              "description": "The name of the model the batch uses.",
              "type": "string"
            },
            "name": {
              "description": "Batch name (e.g. `foobar`).",
              "type": "string"
            },
            "num_failed_records": {
              "description": "read-only. The current number of failed records in the batch.",
              "format": "int32",
              "readOnly": true,
              "type": "integer"
            },
            "num_records": {
              "description": "read-only. The total number of records in the batch.",
              "format": "int32",
              "readOnly": true,
              "type": "integer"
            },
            "num_successful_records": {
              "description": "read-only. The current number of successful records in the batch.",
              "format": "int32",
              "readOnly": true,
              "type": "integer"
            },
            "org_id": {
              "description": "read-only. Organization ID.",
              "readOnly": true,
              "type": "string"
            },
            "output_dataset_id": {
              "readOnly": true,
              "title": "ID of the dataset the batch writes outputs to",
              "type": "string"
            },
            "output_tokens": {
              "description": "read-only. The total number of output tokens in the batch.",
              "format": "int64",
              "readOnly": true,
              "type": "string"
            },
            "status": {
              "description": "read-only. Current stage in the life-cycle of the batch.",
              "readOnly": true,
              "default": "BATCH_STATUS_UNSPECIFIED",
              "enum": [
                "BATCH_STATUS_UNSPECIFIED",
                "BATCH_STATUS_QUEUED",
                "BATCH_STATUS_IN_PROGRESS",
                "BATCH_STATUS_CANCELING",
                "BATCH_STATUS_COMPLETED",
                "BATCH_STATUS_FAILED",
                "BATCH_STATUS_CANCELED"
              ],
              "type": "string"
            },
            "status_reason": {
              "description": "read-only. More details about the reason for the status of a batch job.",
              "readOnly": true,
              "type": "string"
            },
            "updated_at": {
              "description": "read-only. Latest update timestamp.",
              "format": "date-time",
              "readOnly": true,
              "type": "string"
            }
          },
          "required": [
            "name",
            "input_dataset_id",
            "model"
          ],
          "type": "object"
        }
      }
    },
    "description": "Information about the batch. Must contain name, input_dataset_id, and\nmodel. Output-only fields are ignored.",
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Response to request to create a batch.",
            "properties": {
              "batch": {
                "description": "Information about the batch.",
                "properties": {
                  "created_at": {
                    "description": "read-only. Creation timestamp.",
                    "format": "date-time",
                    "readOnly": true,
                    "type": "string"
                  },
                  "creator_id": {
                    "description": "read-only. User ID of the creator.",
                    "readOnly": true,
                    "type": "string"
                  },
                  "id": {
                    "description": "read-only. Batch ID.",
                    "readOnly": true,
                    "type": "string"
                  },
                  "input_dataset_id": {
                    "description": "ID of the dataset the batch reads inputs from.",
                    "type": "string"
                  },
                  "input_tokens": {
                    "description": "read-only. The total number of input tokens in the batch.",
                    "format": "int64",
                    "readOnly": true,
                    "type": "string"
                  },
                  "model": {
                    "description": "The name of the model the batch uses.",
                    "type": "string"
                  },
                  "name": {
                    "description": "Batch name (e.g. `foobar`).",
                    "type": "string"
                  },
                  "num_failed_records": {
                    "description": "read-only. The current number of failed records in the batch.",
                    "format": "int32",
                    "readOnly": true,
                    "type": "integer"
                  },
                  "num_records": {
                    "description": "read-only. The total number of records in the batch.",
                    "format": "int32",
                    "readOnly": true,
                    "type": "integer"
                  },
                  "num_successful_records": {
                    "description": "read-only. The current number of successful records in the batch.",
                    "format": "int32",
                    "readOnly": true,
                    "type": "integer"
                  },
                  "org_id": {
                    "description": "read-only. Organization ID.",
                    "readOnly": true,
                    "type": "string"
                  },
                  "output_dataset_id": {
                    "readOnly": true,
                    "title": "ID of the dataset the batch writes outputs to",
                    "type": "string"
                  },
                  "output_tokens": {
                    "description": "read-only. The total number of output tokens in the batch.",
                    "format": "int64",
                    "readOnly": true,
                    "type": "string"
                  },
                  "status": {
                    "description": "read-only. Current stage in the life-cycle of the batch.",
                    "readOnly": true,
                    "default": "BATCH_STATUS_UNSPECIFIED",
                    "enum": [
                      "BATCH_STATUS_UNSPECIFIED",
                      "BATCH_STATUS_QUEUED",
                      "BATCH_STATUS_IN_PROGRESS",
                      "BATCH_STATUS_CANCELING",
                      "BATCH_STATUS_COMPLETED",
                      "BATCH_STATUS_FAILED",
                      "BATCH_STATUS_CANCELED"
                    ],
                    "type": "string"
                  },
                  "status_reason": {
                    "description": "read-only. More details about the reason for the status of a batch job.",
                    "readOnly": true,
                    "type": "string"
                  },
                  "updated_at": {
                    "description": "read-only. Latest update timestamp.",
                    "format": "date-time",
                    "readOnly": true,
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "input_dataset_id",
                  "model"
                ],
                "type": "object"
              }
            },
            "required": [
              "batch"
            ],
            "type": "object"
          }
        }
      },
      "description": "A successful response."
    },
    "400": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Error is the response for any unsuccessful event.",
            "properties": {
              "message": {
                "description": "A developer-facing error message.",
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      },
      "description": "Bad Request"
    },
    "401": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Error is the response for any unsuccessful event.",
            "properties": {
              "message": {
                "description": "A developer-facing error message.",
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      },
      "description": "Unauthorized"
    },
    "403": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Error is the response for any unsuccessful event.",
            "properties": {
              "message": {
                "description": "A developer-facing error message.",
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      },
      "description": "Forbidden"
    },
    "404": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Error is the response for any unsuccessful event.",
            "properties": {
              "message": {
                "description": "A developer-facing error message.",
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      },
      "description": "Not Found"
    },
    "500": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Error is the response for any unsuccessful event.",
            "properties": {
              "message": {
                "description": "A developer-facing error message.",
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      },
      "description": "Internal Server Error"
    },
    "503": {
      "content": {
        "application/json": {
          "schema": {
            "description": "Error is the response for any unsuccessful event.",
            "properties": {
              "message": {
                "description": "A developer-facing error message.",
                "type": "string"
              }
            },
            "type": "object"
          }
        }
      },
      "description": "Status Service Unavailable"
    }
  },
  "summary": "Create a batch",
  "tags": [
    "/batches"
  ]
}

{
  "deprecated": false,
  "description": "Rerank a list of documents by relevance to a query. Returns a relevance score and ordering index for each document.",
  "operationId": "rerank",
  "requestBody": {
    "content": {
      "application/json": {
        "schema": {
          "$ref": "#/components/schemas/RerankRequest"
        }
      }
    }
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/RerankResponse"
          }
        }
      },
      "description": "200"
    },
    "400": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ErrorData"
          }
        }
      },
      "description": "BadRequest"
    },
    "401": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ErrorData"
          }
        }
      },
      "description": "Unauthorized"
    },
    "404": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ErrorData"
          }
        }
      },
      "description": "NotFound"
    },
    "429": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ErrorData"
          }
        }
      },
      "description": "RateLimit"
    },
    "503": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ErrorData"
          }
        }
      },
      "description": "Overloaded"
    },
    "504": {
      "content": {
        "application/json": {
          "schema": {
            "$ref": "#/components/schemas/ErrorData"
          }
        }
      },
      "description": "Timeout"
    }
  },
  "summary": "Create a rerank request",
  "tags": [
    "Rerank"
  ],
  "components": {
    "schemas": {
      "RerankRequest": {
        "additionalProperties": false,
        "properties": {
          "documents": {
            "description": "List of documents, which can be either strings or objects.",
            "example": [
              {
                "text": "The llama is a domesticated South American camelid, widely used as a meat and pack animal by Andean cultures since the pre-Columbian era.",
                "title": "Llama"
              },
              {
                "text": "The giant panda (Ailuropoda melanoleuca), also known as the panda bear or simply panda, is a bear species endemic to China.",
                "title": "Panda"
              },
              {
                "text": "The guanaco is a camelid native to South America, closely related to the llama. Guanacos are one of two wild South American camelids; the other species is the vicuña, which lives at higher elevations.",
                "title": "Guanaco"
              },
              {
                "text": "The wild Bactrian camel (Camelus ferus) is an endangered species of camel endemic to Northwest China and southwestern Mongolia.",
                "title": "Wild Bactrian camel"
              }
            ],
            "oneOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "items": {
                  "example": "Our solar system orbits the Milky Way galaxy at about 515,000 mph",
                  "type": "string"
                },
                "type": "array"
              }
            ]
          },
          "model": {
            "anyOf": [
              {
                "enum": [
                  "Salesforce/Llama-Rank-v1"
                ],
                "type": "string"
              },
              {
                "type": "string"
              }
            ],
            "description": "The model to be used for the rerank request.<br> <br> [See all of Together AI's rerank models](https://docs.together.ai/docs/serverless-models#rerank-models)\n",
            "example": "Salesforce/Llama-Rank-V1",
            "type": "string"
          },
          "query": {
            "description": "The search query to be used for ranking.",
            "example": "What animals can I find near Peru?",
            "type": "string"
          },
          "rank_fields": {
            "description": "List of keys in the JSON Object document to rank by. Defaults to use all supplied keys for ranking.",
            "example": [
              "title",
              "text"
            ],
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "return_documents": {
            "description": "Whether to return supplied documents with the response.",
            "example": true,
            "type": "boolean"
          },
          "top_n": {
            "description": "The number of top results to return.",
            "example": 2,
            "type": "integer"
          }
        },
        "required": [
          "model",
          "query",
          "documents"
        ],
        "type": "object"
      },
      "RerankResponse": {
        "properties": {
          "id": {
            "description": "Request ID",
            "example": "9dfa1a09-5ebc-4a40-970f-586cb8f4ae47",
            "type": "string"
          },
          "model": {
            "description": "The model to be used for the rerank request.",
            "example": "salesforce/turboranker-0.8-3778-6328",
            "type": "string"
          },
          "object": {
            "const": "rerank",
            "description": "The object type, which is always `rerank`."
          },
          "results": {
            "example": [
              {
                "document": {
                  "text": "{\"title\":\"Llama\",\"text\":\"The llama is a domesticated South American camelid, widely used as a meat and pack animal by Andean cultures since the pre-Columbian era.\"}"
                },
                "index": 0,
                "relevance_score": 0.29980177813003117
              },
              {
                "document": {
                  "text": "{\"title\":\"Guanaco\",\"text\":\"The guanaco is a camelid native to South America, closely related to the llama. Guanacos are one of two wild South American camelids; the other species is the vicuña, which lives at higher elevations.\"}"
                },
                "index": 2,
                "relevance_score": 0.2752447527354349
              }
            ],
            "items": {
              "properties": {
                "document": {
                  "properties": {
                    "text": {
                      "nullable": true,
                      "type": "string"
                    }
                  },
                  "type": "object"
                },
                "index": {
                  "type": "integer"
                },
                "relevance_score": {
                  "type": "number"
                }
              },
              "required": [
                "index",
                "relevance_score",
                "document"
              ],
              "type": "object"
            },
            "type": "array"
          },
          "usage": {
            "$ref": "#/components/schemas/UsageData",
            "example": {
              "completion_tokens": 0,
              "prompt_tokens": 1837,
              "total_tokens": 1837
            }
          }
        },
        "required": [
          "object",
          "model",
          "results"
        ],
        "type": "object"
      },
      "ErrorData": {
        "properties": {
          "error": {
            "properties": {
              "code": {
                "default": null,
                "nullable": true,
                "type": "string"
              },
              "message": {
                "nullable": false,
                "type": "string"
              },
              "param": {
                "default": null,
                "nullable": true,
                "type": "string"
              },
              "type": {
                "nullable": false,
                "type": "string"
              }
            },
            "required": [
              "type",
              "message"
            ],
            "type": "object"
          }
        },
        "required": [
          "error"
        ],
        "type": "object"
      },
      "UsageData": {
        "nullable": true,
        "properties": {
          "completion_tokens": {
            "type": "integer"
          },
          "prompt_tokens": {
            "type": "integer"
          },
          "total_tokens": {
            "type": "integer"
          }
        },
        "required": [
          "prompt_tokens",
          "completion_tokens",
          "total_tokens"
        ],
        "type": "object"
      }
    }
  }
}

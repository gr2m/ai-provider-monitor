{
  "operationId": "handle_edit_image_request",
  "requestBody": {
    "content": {
      "application/json": {
        "example": {
          "image": {
            "url": "..."
          },
          "model": "grok-2-image",
          "prompt": "Add a hat to this cat."
        },
        "schema": {
          "description": "Request for editing image",
          "properties": {
            "image": {
              "description": "Input image to perform edit on.",
              "properties": {
                "detail": {
                  "description": "Specifies the detail level of the image.",
                  "type": [
                    "string",
                    "null"
                  ]
                },
                "url": {
                  "description": "URL of the image.",
                  "type": "string"
                }
              },
              "required": [
                "url"
              ],
              "type": "object"
            },
            "mask": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Image URL object of Image prompt",
                  "properties": {
                    "detail": {
                      "description": "Specifies the detail level of the image.",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "url": {
                      "description": "URL of the image.",
                      "type": "string"
                    }
                  },
                  "required": [
                    "url"
                  ],
                  "type": "object"
                }
              ]
            },
            "model": {
              "description": "Model to be used.",
              "example": "grok-2-image",
              "type": [
                "string",
                "null"
              ]
            },
            "moderation": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Moderation level for content filtering. Can be `low`, `auto`, or `high`. Defaults to `auto`.",
                  "enum": [
                    "low",
                    "auto",
                    "high"
                  ],
                  "type": "string"
                }
              ]
            },
            "n": {
              "description": "Number of image edits to be generated.",
              "format": "int32",
              "type": [
                "integer",
                "null"
              ]
            },
            "prompt": {
              "description": "Prompt for image editing.",
              "type": "string"
            },
            "quality": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Quality of the output image. Can be `low`, `medium`, or `high`. Currently a no-op, reserved for future use.",
                  "enum": [
                    "low",
                    "medium",
                    "high"
                  ],
                  "type": "string"
                }
              ]
            },
            "resolution": {
              "oneOf": [
                {
                  "type": "null"
                },
                {
                  "description": "Resolution of the generated image. Defaults to `1k`.\nAspect ratio is automatically detected from the input image.\nOnly supported by grok-imagine models.",
                  "enum": [
                    "1k",
                    "2k"
                  ],
                  "type": "string"
                }
              ]
            },
            "response_format": {
              "default": "url",
              "description": "Response format to return the image in. Can be `url` or `b64_json`. If `b64_json` is specified, the image will be returned as a base64-encoded string instead of a url to the generated image file.",
              "type": [
                "string",
                "null"
              ]
            },
            "size": {
              "description": "(Not supported) Size of the image.",
              "type": [
                "string",
                "null"
              ]
            },
            "style": {
              "description": "(Not supported) Style of the image.",
              "type": [
                "string",
                "null"
              ]
            },
            "user": {
              "description": "A unique identifier representing your end-user, which can help xAI to monitor and detect abuse.",
              "type": [
                "string",
                "null"
              ]
            }
          },
          "required": [
            "prompt",
            "image"
          ],
          "type": "object"
        }
      }
    },
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "example": {
            "data": [
              {
                "url": "..."
              }
            ]
          },
          "schema": {
            "description": "Image generation response for `/v1/image/generations` endpoint",
            "properties": {
              "data": {
                "description": "A list of generated image objects.",
                "items": {
                  "description": "Generated images",
                  "properties": {
                    "b64_json": {
                      "description": "A base64-encoded string representation of the generated image in `jpeg` encoding, if `b64_json` is specified as `response_format` in the request.",
                      "type": [
                        "string",
                        "null"
                      ]
                    },
                    "debug_output": {
                      "oneOf": [
                        {
                          "type": "null"
                        },
                        {
                          "description": "Debug output for the image generation. Only available to trusted testers.",
                          "properties": {
                            "best_local_idx": {
                              "description": "The index of the best image selected from the candidates.",
                              "format": "int32",
                              "type": "integer"
                            },
                            "candidate_images": {
                              "description": "List of candidate images generated during Best-of-N selection.",
                              "items": {
                                "description": "A candidate image generated during Best-of-N selection.",
                                "properties": {
                                  "b64_json": {
                                    "description": "A base64-encoded string representation of the candidate image.",
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  },
                                  "up_sampled_prompt": {
                                    "description": "The upsampled prompt used to generate this candidate image.",
                                    "type": "string"
                                  },
                                  "url": {
                                    "description": "A url to the candidate image.",
                                    "type": [
                                      "string",
                                      "null"
                                    ]
                                  }
                                },
                                "required": [
                                  "up_sampled_prompt"
                                ],
                                "type": "object"
                              },
                              "type": "array"
                            },
                            "grading_scores": {
                              "description": "Grading scores for each candidate image.",
                              "items": {
                                "format": "int32",
                                "type": "integer"
                              },
                              "type": "array"
                            },
                            "raw_grading": {
                              "description": "The raw grading output from the grader model.",
                              "type": "string"
                            }
                          },
                          "required": [
                            "candidate_images",
                            "grading_scores",
                            "best_local_idx",
                            "raw_grading"
                          ],
                          "type": "object"
                        }
                      ]
                    },
                    "revised_prompt": {
                      "description": "The revised prompt generated by a chat model from the original prompt. This prompt is used in the final image generation.",
                      "type": "string"
                    },
                    "url": {
                      "description": "A url to the generated image, if `response_format` is not specified or with `url` in the request.",
                      "type": [
                        "string",
                        "null"
                      ]
                    }
                  },
                  "required": [
                    "revised_prompt"
                  ],
                  "type": "object"
                },
                "type": "array"
              }
            },
            "required": [
              "data"
            ],
            "type": "object"
          }
        }
      },
      "description": "Success"
    },
    "400": {
      "description": "Bad request. The request is invalid or an invalid API key is provided."
    },
    "422": {
      "description": "Unprocessable Entity. There are missing fields in the request body."
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "summary": "Edit an image based on a prompt. This is the endpoint for making edit requests to image generation models.",
  "tags": [
    "v1"
  ]
}

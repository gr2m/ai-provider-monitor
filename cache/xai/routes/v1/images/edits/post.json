{
  "operationId": "handle_edit_image_request",
  "requestBody": {
    "content": {
      "application/json": {
        "example": {
          "image": {
            "url": "..."
          },
          "model": "grok-imagine-image",
          "prompt": "Add a hat to this cat."
        },
        "schema": {
          "$ref": "#/components/schemas/EditImageRequest"
        }
      }
    },
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "example": {
            "data": [
              {
                "url": "..."
              }
            ]
          },
          "schema": {
            "$ref": "#/components/schemas/GeneratedImageResponse"
          }
        }
      },
      "description": "Success"
    },
    "400": {
      "description": "Bad request. The request is invalid or an invalid API key is provided."
    },
    "422": {
      "description": "Unprocessable Entity. There are missing fields in the request body."
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "summary": "Edit an image based on a prompt. This is the endpoint for making edit requests to image generation models.",
  "tags": [
    "v1"
  ],
  "components": {
    "schemas": {
      "EditImageRequest": {
        "description": "Request for editing image",
        "properties": {
          "aspect_ratio": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ImageAspectRatio",
                "description": "Aspect ratio of the output image for image editing with multiple images.\nFor single image editing, do not set this. It will always auto-detect from the input image."
              }
            ]
          },
          "image": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ImageUrl",
                "description": "Input image to perform edit on. Mutually exclusive with `images`."
              }
            ]
          },
          "images": {
            "description": "List of input images for multi-reference editing.\nMutually exclusive with `image`. When multiple images are provided,\nrefer to them as \\<IMAGE_0\\>, \\<IMAGE_1\\>, etc. in the prompt.",
            "items": {
              "$ref": "#/components/schemas/ImageUrl"
            },
            "type": "array"
          },
          "mask": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ImageUrl"
              }
            ]
          },
          "model": {
            "description": "Model to be used.",
            "example": "grok-imagine-image",
            "type": [
              "string",
              "null"
            ]
          },
          "n": {
            "description": "Number of image edits to be generated.",
            "format": "int32",
            "type": [
              "integer",
              "null"
            ]
          },
          "prompt": {
            "description": "Prompt for image editing.",
            "type": "string"
          },
          "quality": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ImageQuality",
                "description": "Quality of the output image. Can be `low`, `medium`, or `high`. Currently a no-op, reserved for future use."
              }
            ]
          },
          "resolution": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/ImageResolution",
                "description": "Resolution of the generated image. Defaults to `1k`.\nOnly supported by grok-imagine models."
              }
            ]
          },
          "response_format": {
            "default": "url",
            "description": "Response format to return the image in. Can be `url` or `b64_json`. If `b64_json` is specified, the image will be returned as a base64-encoded string instead of a url to the generated image file.",
            "type": [
              "string",
              "null"
            ]
          },
          "size": {
            "description": "(Not supported) Size of the image.",
            "type": [
              "string",
              "null"
            ]
          },
          "style": {
            "description": "(Not supported) Style of the image.",
            "type": [
              "string",
              "null"
            ]
          },
          "user": {
            "description": "A unique identifier representing your end-user, which can help xAI to monitor and detect abuse.",
            "type": [
              "string",
              "null"
            ]
          }
        },
        "required": [
          "prompt"
        ],
        "type": "object"
      },
      "GeneratedImageResponse": {
        "description": "Image generation response for `/v1/image/generations` endpoint",
        "properties": {
          "data": {
            "description": "A list of generated image objects.",
            "items": {
              "$ref": "#/components/schemas/GeneratedImage"
            },
            "type": "array"
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/MediaUsage",
                "description": "Usage information for the image generation request."
              }
            ]
          }
        },
        "required": [
          "data"
        ],
        "type": "object"
      },
      "ImageAspectRatio": {
        "description": "Aspect ratio for image generation.\nOnly supported by grok-imagine models.",
        "enum": [
          "1:1",
          "3:4",
          "4:3",
          "9:16",
          "16:9",
          "2:3",
          "3:2",
          "9:19.5",
          "19.5:9",
          "9:20",
          "20:9",
          "1:2",
          "2:1",
          "auto"
        ],
        "type": "string"
      },
      "ImageUrl": {
        "description": "Image URL object of Image prompt",
        "properties": {
          "url": {
            "description": "URL of the image.",
            "type": "string"
          }
        },
        "required": [
          "url"
        ],
        "type": "object"
      },
      "ImageQuality": {
        "description": "Request to generate image for `/v1/image/generations` endpoint\nQuality level for image generation.\nNote: Currently a no-op, reserved for future use.",
        "enum": [
          "low",
          "medium",
          "high"
        ],
        "type": "string"
      },
      "ImageResolution": {
        "description": "Resolution for image generation.\nOnly supported by grok-imagine models.",
        "enum": [
          "1k",
          "2k"
        ],
        "type": "string"
      },
      "GeneratedImage": {
        "description": "Generated images",
        "properties": {
          "b64_json": {
            "description": "A base64-encoded string representation of the generated image in `jpeg` encoding, if `b64_json` is specified as `response_format` in the request.",
            "type": [
              "string",
              "null"
            ]
          },
          "revised_prompt": {
            "deprecated": true,
            "description": "(Deprecated: Always return empty string) The revised prompt generated by a chat model from the original prompt. This prompt is used in the final image generation.",
            "type": "string"
          },
          "url": {
            "description": "A url to the generated image, if `response_format` is not specified or with `url` in the request.",
            "type": [
              "string",
              "null"
            ]
          }
        },
        "required": [
          "revised_prompt"
        ],
        "type": "object"
      },
      "MediaUsage": {
        "description": "Usage information for media generation requests (image and video).",
        "properties": {
          "cost_in_usd_ticks": {
            "description": "Accurate cost of this request in USD ticks, where \"tick\" is defined as follows:\nTICKS_IN_USD_CENT: i64 = 100_000_000\nwhich means there are 10_000_000_000 ticks in one *dollar*.",
            "format": "int64",
            "type": "integer"
          }
        },
        "required": [
          "cost_in_usd_ticks"
        ],
        "type": "object"
      }
    }
  }
}

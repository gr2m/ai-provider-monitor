{
  "operationId": "handle_embedding_request",
  "requestBody": {
    "content": {
      "application/json": {
        "example": "{\n            \"input\": [\"This is an example content to embed...\"],\n            \"model\": \"v1\",\n            \"encoding_format\": \"float\"\n        }",
        "schema": {
          "$ref": "#/components/schemas/EmbeddingRequest"
        }
      }
    },
    "required": true
  },
  "responses": {
    "200": {
      "content": {
        "application/json": {
          "example": {
            "data": [
              {
                "embedding": [
                  0.01567895,
                  0.063257694,
                  0.045925662
                ],
                "index": 0,
                "object": "embedding"
              }
            ],
            "model": "v1",
            "object": "list",
            "usage": {
              "prompt_tokens": 1,
              "total_tokens": 1
            }
          },
          "schema": {
            "$ref": "#/components/schemas/EmbeddingResponse"
          }
        }
      },
      "description": "Success"
    },
    "400": {
      "description": "Bad request. The request is invalid or an invalid API key is provided."
    },
    "422": {
      "description": "Unprocessable Entity. There are missing fields in the request body."
    }
  },
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "summary": "Create an embedding vector representation corresponding to the input text. This is the endpoint for making requests to embedding models.",
  "tags": [
    "v1"
  ],
  "components": {
    "schemas": {
      "EmbeddingRequest": {
        "properties": {
          "dimensions": {
            "description": "The number of dimensions the resulting output embeddings should have.",
            "format": "int32",
            "type": [
              "integer",
              "null"
            ]
          },
          "encoding_format": {
            "description": "The format to return the embeddings in. Can be either `float` or `base64`.",
            "type": [
              "string",
              "null"
            ]
          },
          "input": {
            "$ref": "#/components/schemas/EmbeddingInput",
            "description": "Input text to embed, encoded as a string or list of tokens. To embed multiple inputs in a single request, pass a list of strings or list of token lists. The total tokens in the input must not exceed the context window for the model and cannot be an empty string. If the input is a list, the maximum length of the list is 128."
          },
          "model": {
            "description": "ID of the model to use.",
            "example": "v1",
            "type": "string"
          },
          "preview": {
            "description": "Flag to use the new format of the API.",
            "type": [
              "boolean",
              "null"
            ]
          },
          "user": {
            "description": "A unique identifier representing your end-user, which can help xAI to monitor and detect abuse.",
            "type": [
              "string",
              "null"
            ]
          }
        },
        "type": "object"
      },
      "EmbeddingResponse": {
        "properties": {
          "data": {
            "description": "A list of embedding objects.",
            "items": {
              "$ref": "#/components/schemas/Embedding"
            },
            "type": "array"
          },
          "model": {
            "description": "Model ID used to create embedding.",
            "type": "string"
          },
          "object": {
            "description": "The object type of `data` field, which is always `\"list\"`.",
            "type": "string"
          },
          "usage": {
            "oneOf": [
              {
                "type": "null"
              },
              {
                "$ref": "#/components/schemas/EmbeddingUsage",
                "description": "Token usage information."
              }
            ]
          }
        },
        "required": [
          "object",
          "model",
          "data"
        ],
        "type": "object"
      },
      "EmbeddingInput": {
        "oneOf": [
          {
            "description": "A strings to be embedded. For best performance, prepend \"query: \" in front of query content and prepend \"passage: \" in front of passage/text",
            "properties": {
              "String": {
                "description": "A strings to be embedded. For best performance, prepend \"query: \" in front of query content and prepend \"passage: \" in front of passage/text",
                "type": "string"
              }
            },
            "required": [
              "String"
            ],
            "type": "object"
          },
          {
            "description": "An array of strings to be embedded",
            "properties": {
              "StringArray": {
                "description": "An array of strings to be embedded",
                "items": {
                  "type": "string"
                },
                "type": "array"
              }
            },
            "required": [
              "StringArray"
            ],
            "type": "object"
          },
          {
            "description": "A token in integer to be embedded",
            "properties": {
              "Ints": {
                "description": "A token in integer to be embedded",
                "items": {
                  "format": "int32",
                  "type": "integer"
                },
                "type": "array"
              }
            },
            "required": [
              "Ints"
            ],
            "type": "object"
          },
          {
            "description": "An array of tokens in integers to be embedded",
            "properties": {
              "IntsArray": {
                "description": "An array of tokens in integers to be embedded",
                "items": {
                  "items": {
                    "format": "int32",
                    "type": "integer"
                  },
                  "type": "array"
                },
                "type": "array"
              }
            },
            "required": [
              "IntsArray"
            ],
            "type": "object"
          }
        ]
      },
      "Embedding": {
        "properties": {
          "embedding": {
            "$ref": "#/components/schemas/EmbeddingContent",
            "description": "Embedding content."
          },
          "index": {
            "description": "Index of the embedding object in the data list.",
            "format": "int32",
            "type": "integer"
          },
          "object": {
            "description": "The object type, which is always `\"embedding\"`.",
            "type": "string"
          }
        },
        "required": [
          "index",
          "embedding",
          "object"
        ],
        "type": "object"
      },
      "EmbeddingUsage": {
        "properties": {
          "prompt_tokens": {
            "description": "Prompt token used.",
            "format": "int32",
            "type": "integer"
          },
          "total_tokens": {
            "description": "Total token used.",
            "format": "int32",
            "type": "integer"
          }
        },
        "required": [
          "prompt_tokens",
          "total_tokens"
        ],
        "type": "object"
      },
      "EmbeddingContent": {
        "oneOf": [
          {
            "description": "Embedding in base64 string.",
            "type": "string"
          },
          {
            "description": "Embedding as an array of floats.",
            "items": {
              "format": "float",
              "type": "number"
            },
            "type": "array"
          }
        ]
      }
    }
  }
}
